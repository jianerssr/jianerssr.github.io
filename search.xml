<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>将hexo部署到服务器上</title>
      <link href="/2023/02/01/%E5%B0%86hexo%E9%83%A8%E7%BD%B2%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A/"/>
      <url>/2023/02/01/%E5%B0%86hexo%E9%83%A8%E7%BD%B2%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A/</url>
      
        <content type="html"><![CDATA[<blockquote></blockquote><ol><li><p>前提。</p><p>已经搭建好<a href="https://www.heyjian.top/2023/02/01/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BAgit%E6%9C%8D%E5%8A%A1%E5%99%A8/"><code>git</code>服务器</a>。</p></li><li><p>创建仓库。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /home/git/gitrepo</span><br><span class="line">git init --bare blog.git</span><br></pre></td></tr></table></figure></li><li><p>配置git-hooks</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd blog.git/hooks</span><br><span class="line">vim post-receive</span><br></pre></td></tr></table></figure><p>在<code>post-receive</code>文件中添加下述内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">git --work-tree=/www/wwwroot/myblog --git-dir=/home/git/gitrepo/blog.git checkout -f</span><br></pre></td></tr></table></figure><p>上述代码意思是把提交到<code>git</code>仓库的文件同步到博客目录中，我的博客目录为:<code>/www/wwwroot/myblog</code>。</p><p>为其添加权限并改变博客文件所有者：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /home/git/gitrepo/blog.git/hooks/post-receive</span><br><span class="line">chown -R git:git /home/git/gitrepo/blog.git</span><br></pre></td></tr></table></figure></li><li><p>创建博客目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir /www/wwwroot/myblog</span><br><span class="line">chown -R git:git /www/wwwroot/myblog</span><br><span class="line">chmod -R 755 /www/wwwroot/myblog</span><br></pre></td></tr></table></figure></li><li><p>配置本地站点文件。</p><p>打开<code>_config.yml</code>文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">- type: git</span><br><span class="line">  repo: git@github.com:jianerssr/jianerssr.github.io.git</span><br><span class="line">  branch: main</span><br><span class="line">- type: git #自己服务器网站</span><br><span class="line">  repo: git@myip:/home/git/gitrepo/blog.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>over，尽情地<code>hexo &amp;&amp; clean &amp;&amp; hexo g &amp;&amp; hexo d</code>吧。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 云服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何搭建git服务器</title>
      <link href="/2023/02/01/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BAgit%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2023/02/01/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BAgit%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>本文章仅仅只是最基础的git服务器搭建方法，不是基于gitlab、gitea搭建的git                                          服务器。</p><p>前提：默认服务器已装好git。                                                                     </p></blockquote><h1 id="创建git用户并设置密码"><a href="#创建git用户并设置密码" class="headerlink" title="创建git用户并设置密码"></a>创建git用户并设置密码</h1><p>利用<code>git</code>用户来管理<code>git</code>服务器。</p><p><code>root</code>账户下进行下述操作。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd -m git</span><br><span class="line">passwd git</span><br></pre></td></tr></table></figure><h1 id="配置ssh-key"><a href="#配置ssh-key" class="headerlink" title="配置ssh key"></a>配置ssh key</h1><p><code>git</code>账户下进行下述操作。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - git</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /home/git/</span><br><span class="line">mkdir .ssh</span><br><span class="line">chmod 755 .ssh</span><br><span class="line">touch .ssh/authorized_keys</span><br><span class="line">chmod 644 .ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>然后将本地已经创建好的<code>ssh</code>公钥写进<code>authorized_keys</code>文件中，一行一个公钥。</p><h1 id="创建git仓库并初始化"><a href="#创建git仓库并初始化" class="headerlink" title="创建git仓库并初始化"></a>创建git仓库并初始化</h1><p>同<code>git</code>账户下进行。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /home/git/</span><br><span class="line">mkdir gitrepo</span><br><span class="line">cd gitrepo</span><br><span class="line">git init --bare first.git</span><br></pre></td></tr></table></figure><p>以后可用<code>git init --bare</code>指令创建多个空仓库。</p><h1 id="克隆仓库验证是否配置正确"><a href="#克隆仓库验证是否配置正确" class="headerlink" title="克隆仓库验证是否配置正确"></a>克隆仓库验证是否配置正确</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@my ip:/home/git/gitrepo/first.git</span><br></pre></td></tr></table></figure><h1 id="限制git用户"><a href="#限制git用户" class="headerlink" title="限制git用户"></a>限制git用户</h1><p>为了系统安全，在<code>root</code>账户下，限制<code>git</code>用户，使其活动限制在于<code>git</code>指令相关的范围。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh git -s $(which git-shell)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 云服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客魔改内容（二）</title>
      <link href="/2023/01/25/%E5%8D%9A%E5%AE%A2%E9%AD%94%E6%94%B9%E5%86%85%E5%AE%B9%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2023/01/25/%E5%8D%9A%E5%AE%A2%E9%AD%94%E6%94%B9%E5%86%85%E5%AE%B9%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="博客页脚自定义"><a href="#博客页脚自定义" class="headerlink" title="博客页脚自定义"></a>博客页脚自定义</h1><p>来源：<a href="https://blog.leonus.cn/2022/footer.html">博客底部运行时间</a></p><ol><li><p>打开<code>_config.butterfly.yml</code>文件，更改<code>footer_bg</code>设置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">footer_bg: transparent</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/css/custom.css</code>文件中插入。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*页脚设置*/</span></span><br><span class="line"><span class="selector-id">#footer</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer-wrap</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#4c4948</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>随后，博客页脚与博客主体融为一体，页脚字体清晰，没有之前那种颜色差带来的割裂感。</p></li><li><p>页脚底部设置网站运行时间。</p><p>打开<code>_config.butterfly.yml</code>文件，更改<code>custom_text</code>设置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">custom_text: &lt;div class=&quot;footer_custom_text_motto&quot;&gt;弃我去者，昨日之日不可留；乱我心者，今日之日多烦忧&lt;/div&gt;&lt;div id=&quot;runtime&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>打开<code>/source/js/custom.js</code>，插入代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//页脚底部运行时间</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// let create_time = Math.round(new Date(&#x27;2023-01-14 22:00:00&#x27;).getTime() / 1000); //在此行修改建站时间</span></span><br><span class="line">    <span class="comment">// 有苹果用户发现safari浏览器不能正常运行，百度了一下发现是格式化的问题，改成下面这种应该就可以了。感谢反馈。</span></span><br><span class="line">    <span class="keyword">let</span> create_time = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2023/01/14 22:00:00&#x27;</span>).<span class="title function_">getTime</span>() / <span class="number">1000</span>); <span class="comment">//在此行修改建站时间</span></span><br><span class="line">    <span class="keyword">let</span> timestamp = <span class="title class_">Math</span>.<span class="title function_">round</span>((<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()) / <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">let</span> second = timestamp - create_time;</span><br><span class="line">    <span class="keyword">let</span> time = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">var</span> nol = <span class="keyword">function</span>(<span class="params">h</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> h &gt; <span class="number">9</span> ? h : <span class="string">&#x27;0&#x27;</span> + h;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">24</span> * <span class="number">3600</span>) &#123;</span><br><span class="line">        time[<span class="number">0</span>] = <span class="built_in">parseInt</span>(second / (<span class="number">24</span> * <span class="number">3600</span>));</span><br><span class="line">        second %= <span class="number">24</span> * <span class="number">3600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">3600</span>) &#123;</span><br><span class="line">        time[<span class="number">1</span>] = <span class="title function_">nol</span>(<span class="built_in">parseInt</span>(second / <span class="number">3600</span>));</span><br><span class="line">        second %= <span class="number">3600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">        time[<span class="number">2</span>] = <span class="title function_">nol</span>(<span class="built_in">parseInt</span>(second / <span class="number">60</span>));</span><br><span class="line">        second %= <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        time[<span class="number">3</span>] = <span class="title function_">nol</span>(second);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> currentTimeHtml = <span class="string">&quot;&quot;</span></span><br><span class="line">    currentTimeHtml += <span class="string">&#x27; 本站已安全运行 &#x27;</span> + time[<span class="number">0</span>] + <span class="string">&#x27; 天 &#x27;</span> + time[<span class="number">1</span>] + <span class="string">&#x27; 小时 &#x27;</span> + time[<span class="number">2</span>] + <span class="string">&#x27; 分 &#x27;</span> + time[<span class="number">3</span>] + <span class="string">&#x27; 秒 &#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;runtime&quot;</span>).<span class="property">innerHTML</span> = currentTimeHtml;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure></li></ol><h1 id="gitcalender"><a href="#gitcalender" class="headerlink" title="gitcalender"></a>gitcalender</h1><p>来源：<a href="https://www.fomal.cc/posts/eec9786.html#GitCalendar-%E5%BA%97%E9%95%BF">博客魔改教程总结（一）</a></p><ol><li><p>自定义api。</p><p>在<code>github</code>上<code>fork</code><a href="https://github.com/Zfour/python_github_calendar_api">Zfour&#x2F;python_github_calendar_api</a>，根据教程自建api。</p><p>注：<code>github</code>页面已改版，需要修改一下，原作者暂未修改。</p></li><li><p>安装插件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-filter-gitcalendar --save</span><br></pre></td></tr></table></figure></li><li><p>在<code>_config.yml</code>中添加配置文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># hexo-filter-gitcalendar</span><br><span class="line">gitcalendar:</span><br><span class="line">  enable: true # 开关</span><br><span class="line">  priority: 5 #过滤器优先权，数值越小，执行越早，默认为10，选填</span><br><span class="line">  enable_page: /gitcalendar/ # 应用页面,若要应用于所有页面，就填’all’，默认为’/‘</span><br><span class="line">  # butterfly挂载容器</span><br><span class="line">  layout: </span><br><span class="line">    type: id #挂载容器类型，填写id或class，不填则默认为id</span><br><span class="line">    name: gitcalendar #挂载容器名称</span><br><span class="line">    index: 0 #前提是layout.type为class，因为同一页面可能有多个class，此项用来确认究竟排在第几个顺位</span><br><span class="line">  user: jianerssr #git用户名</span><br><span class="line">  apiurl: &#x27;https://gitcalendar.heyjian.top&#x27;# 这是我的API，最好自己弄一个</span><br><span class="line">  minheight:</span><br><span class="line">    pc: 280px #桌面端最小高度</span><br><span class="line">    mibile: 0px #移动端最小高度</span><br><span class="line">  #color: &quot;[&#x27;#d9e0df&#x27;, &#x27;#c6e0dc&#x27;, &#x27;#a8dcd4&#x27;, &#x27;#9adcd2&#x27;, &#x27;#89ded1&#x27;, &#x27;#77e0d0&#x27;, &#x27;#5fdecb&#x27;, &#x27;#47dcc6&#x27;, &#x27;#39dcc3&#x27;, &#x27;#1fdabe&#x27;, &#x27;#00dab9&#x27;]&quot; </span><br><span class="line">  # &quot;[&#x27;#e4dfd7&#x27;, &#x27;#f9f4dc&#x27;, &#x27;#f7e8aa&#x27;, &#x27;#f7e8aa&#x27;, &#x27;#f8df72&#x27;, &#x27;#fcd217&#x27;, &#x27;#fcc515&#x27;, &#x27;#f28e16&#x27;, &#x27;#fb8b05&#x27;, &#x27;#d85916&#x27;, &#x27;#f43e06&#x27;]&quot; #橘黄色调</span><br><span class="line">    #color: &quot;[&#x27;#ebedf0&#x27;, &#x27;#fdcdec&#x27;, &#x27;#fc9bd9&#x27;, &#x27;#fa6ac5&#x27;, &#x27;#f838b2&#x27;, &#x27;#f5089f&#x27;, &#x27;#c4067e&#x27;, &#x27;#92055e&#x27;, &#x27;#540336&#x27;, &#x27;#48022f&#x27;, &#x27;#30021f&#x27;]&quot; #浅紫色调</span><br><span class="line">  color: &quot;[&#x27;#ebedf0&#x27;, &#x27;#f0fff4&#x27;, &#x27;#dcffe4&#x27;, &#x27;#bef5cb&#x27;, &#x27;#85e89d&#x27;, &#x27;#34d058&#x27;, &#x27;#28a745&#x27;, &#x27;#22863a&#x27;, &#x27;#176f2c&#x27;, &#x27;#165c26&#x27;, &#x27;#144620&#x27;]&quot; #翠绿色调</span><br><span class="line">  # color: &quot;[&#x27;#ebedf0&#x27;, &#x27;#f1f8ff&#x27;, &#x27;#dbedff&#x27;, &#x27;#c8e1ff&#x27;, &#x27;#79b8ff&#x27;, &#x27;#2188ff&#x27;, &#x27;#0366d6&#x27;, &#x27;#005cc5&#x27;, &#x27;#044289&#x27;, &#x27;#032f62&#x27;, &#x27;#05264c&#x27;]&quot; #天青色调</span><br><span class="line">  container: .recent-post-item(style=&#x27;width:100%;height:auto;padding:10px;&#x27;) #父元素容器，需要使用pug语法</span><br><span class="line">  gitcalendar_css: https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css</span><br><span class="line">  gitcalendar_js: https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js</span><br></pre></td></tr></table></figure><p>gitcalendar默认挂在首页，如果不想挂在首页除需更改<code>enable_page:</code>项为相应页面外，还需在相应页面写入一个<code>div</code>块。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- GitCalendar容器 --&gt;</span><br><span class="line">&lt;div id=&quot;gitcalendar&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>注：此处id名一定要跟<code>layout.name</code>一致。</p></li></ol><h1 id="页面样式调节"><a href="#页面样式调节" class="headerlink" title="页面样式调节"></a>页面样式调节</h1><p>来源：<a href="https://www.fomal.cc/posts/5389e93f.html">博客魔改教程总结（二）</a></p><ol><li><p>在<code>/source/css/custom.css</code>中插入。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*页面样式调节*/</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--trans-light</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.88</span>);</span><br><span class="line">  <span class="attr">--trans-dark</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.88</span>);</span><br><span class="line">  <span class="attr">--border-style</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">169</span>, <span class="number">169</span>, <span class="number">169</span>);</span><br><span class="line">  <span class="attr">--backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">5px</span>) <span class="built_in">saturate</span>(<span class="number">150%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 首页文章卡片 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 首页侧栏卡片 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 文章页、归档页、普通页面 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#page</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 导航栏 */</span></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.75</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式遮罩 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#archive</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式页脚页头遮罩透明 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 阅读模式 */</span></span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式下的阅读模式 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>备注。</p><p> <code>-trans-light:</code>日间模式背景色<br> <code>--trans-dark: </code>夜间模式背景色<br> <code>--border-style:</code> 边框样式<br><code>--backdrop-filter:</code>b背景过滤器</p><p>懒得改了，就这个样式了。</p></li></ol><h1 id="导航栏美化"><a href="#导航栏美化" class="headerlink" title="导航栏美化"></a>导航栏美化</h1><p>来源：<a href="https://yisous.xyz/posts/895003b5/#%E5%89%8D%E8%A8%80">关于butterfly的导航栏的一些教程</a></p><ol><li><p>分离搜索栏与菜单栏。</p><p>打开<code>/themes/butterfly/layout/includes/header/nav.pug</code></p><p>原代码为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- const isFixedClass = theme.nav.fixed ? &#x27;fixed&#x27; : &#x27;&#x27;</span><br><span class="line">nav#nav(class=isFixedClass)</span><br><span class="line">  span#blog-info</span><br><span class="line">    a(href=url_for(&#x27;/&#x27;) title=config.title)</span><br><span class="line">      if theme.nav.logo</span><br><span class="line">        img.site-icon(src=url_for(theme.nav.logo))</span><br><span class="line">      if theme.nav.display_title</span><br><span class="line">        span.site-name=config.title</span><br><span class="line">    </span><br><span class="line">  #menus</span><br><span class="line">    if (theme.algolia_search.enable || theme.local_search.enable)</span><br><span class="line">      #search-button</span><br><span class="line">        a.site-page.social-icon.search(href=&quot;javascript:void(0);&quot;)</span><br><span class="line">          i.fas.fa-search.fa-fw</span><br><span class="line">          span=&#x27; &#x27;+_p(&#x27;search.title&#x27;)</span><br><span class="line">    !=partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"></span><br><span class="line">    #toggle-menu</span><br><span class="line">      a.site-page(href=&quot;javascript:void(0);&quot;)</span><br><span class="line">        i.fas.fa-bars.fa-fw</span><br></pre></td></tr></table></figure><p>改为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- const isFixedClass = theme.nav.fixed ? &#x27;fixed&#x27; : &#x27;&#x27;</span><br><span class="line">nav#nav(class=isFixedClass)</span><br><span class="line">  span#blog-info</span><br><span class="line">    a#site-name(href=url_for(&#x27;/&#x27;))</span><br><span class="line">      if theme.nav.logo</span><br><span class="line">        img.site-icon(src=url_for(theme.nav.logo))</span><br><span class="line">      if theme.nav.display_title</span><br><span class="line">        span.sitename=config.title</span><br><span class="line">   </span><br><span class="line">  #menus</span><br><span class="line">  !=partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"></span><br><span class="line">  #nav-right</span><br><span class="line">    if (theme.algolia_search.enable || theme.local_search.enable)</span><br><span class="line">      #search-button</span><br><span class="line">        a.site-page.social-icon.search</span><br><span class="line">          i.fas.fa-search.fa-fw</span><br><span class="line"></span><br><span class="line">      #toggle-menu</span><br><span class="line">        a.site-page</span><br><span class="line">          i.fas.fa-bars.fa-fw</span><br></pre></td></tr></table></figure></li><li><p>导航栏居中。</p><p>在<code>/sourcr/cs/custom.css</code>中添加：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#nav-right</span>&#123;</span><br><span class="line">    <span class="attribute">flex</span>:<span class="number">1</span> <span class="number">1</span> auto;</span><br><span class="line">    <span class="attribute">justify-content</span>: flex-end;</span><br><span class="line">    <span class="attribute">margin-left</span>: auto;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>:nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>去掉导航栏项目底下的蓝色长条。</p><p>在自定义<code>css</code>文件中添加：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#nav</span> *<span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>子菜单栏横向布局。</p><p>同上文件中，添加：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span><span class="selector-pseudo">:not</span>(<span class="selector-id">#sidebar-menus</span> <span class="selector-tag">li</span>)&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -webkit-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -moz-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -ms-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -o-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.menus_item_child</span><span class="selector-pseudo">:not</span>(<span class="selector-id">#sidebar-menus</span> <span class="selector-tag">ul</span>)&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    left:calc(-150%)!important;这是估算值，为了保持元素居中的，如果不合适可以自己调</span></span><br><span class="line"><span class="comment">  改为：*/</span></span><br><span class="line">  <span class="attribute">left</span>:<span class="number">50%</span>;</span><br><span class="line">  translate:-<span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>网站标题的增强版。</p><p>即鼠标悬浮在左上角的网站名时，显示主页图标。</p><p>同上文件夹，添加：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*左上角标题移动*/</span></span><br><span class="line"><span class="selector-id">#site-name</span>&#123;</span><br><span class="line"><span class="attribute">left</span>:<span class="number">25px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#site-name</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#3366ff</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -webkit-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -moz-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -ms-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -o-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">right</span>:<span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;\f015&quot;</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#3366ff</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: FontAwesome;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>:white;</span><br><span class="line">    <span class="attribute">line-height</span>:<span class="number">34px</span>;<span class="comment">/*如果有溢出或者垂直不居中的现象微调一下这个参数*/</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;<span class="comment">/*根据个人喜好*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#site-name</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    scale:<span class="number">1.05</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#site-name</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24px</span>; <span class="comment">/*一定要把字体调大点，否则效果惨不忍睹！*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注：此处有个<code>bug</code>，原文 <code>font-family:</code>为<code> &quot;Font Awesome 6 Free&quot;;</code>，但这样主页图标乱码，我改成<code> FontAwesome;</code>就好了，真神奇。</p></li><li><p>显示标题。</p><p>同样打开<code>/themes/butterfly/layout/includes/header/nav.pug</code>文件，在<code>!=partial(&#39;includes/header/menu_item&#39;, &#123;&#125;, &#123;cache: true&#125;)</code>下添加代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">!=partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">  center(id=&quot;name-container&quot;)</span><br><span class="line">    a(id=&quot;page-name&quot; href=&quot;javascript:scrollToTop()&quot;) PAGE_NAME</span><br></pre></td></tr></table></figure><p>打开自定义<code>js</code>文件，添加代码:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//js有一个小问题：就是只要鼠标滚动不论哪里都会响应，即便你滚动的是子元素</span></span><br><span class="line"><span class="comment">//2022.9.11 已修复，需要jq，请自行引入</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;display:none&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> position = $(<span class="variable language_">window</span>).<span class="title function_">scrollTop</span>();</span><br><span class="line">$(<span class="variable language_">window</span>).<span class="title function_">scroll</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> scroll = $(<span class="variable language_">window</span>).<span class="title function_">scrollTop</span>();</span><br><span class="line">  <span class="keyword">if</span> (scroll &gt; position) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;menus_items&quot;</span>)[<span class="number">1</span>].<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;display:none!important&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;menus_items&quot;</span>)[<span class="number">1</span>].<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;display:none&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  position = scroll;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">scrollToTop</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;menus_items&quot;</span>)[<span class="number">1</span>].<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;display:none&quot;</span>);</span><br><span class="line">    btf.<span class="title function_">scrollToDest</span>(<span class="number">0</span>, <span class="number">500</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//修复没有弄右键菜单的童鞋无法回顶部的问题</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;page-name&quot;</span>).<span class="property">innerText</span> = <span class="variable language_">document</span>.<span class="property">title</span>.<span class="title function_">split</span>(<span class="string">&quot; | jianerssr的个人小屋&quot;</span>)[<span class="number">0</span>];</span><br></pre></td></tr></table></figure><p>打开自定义文件夹，添加代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#page-name</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">color</span>:white<span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">&#x27;回到顶部&#x27;</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#3366ff</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="number">#3366ff</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">45px</span>; <span class="comment">/*如果垂直位置不居中可以微调此值，也可以删了*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-name</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">900px</span>)&#123;</span><br><span class="line">    <span class="selector-id">#page-name</span>,<span class="selector-id">#menus</span>&#123;</span><br><span class="line">      <span class="attribute">display</span>:none<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#name-container</span>&#123;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#name-container</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    scale:<span class="number">1.03</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-name</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding</span>:<span class="number">10px</span> <span class="number">30px</span><span class="comment">/*如果文字间隔不合理可以微调修改，第二个是水平方向的padding，第一个是垂直的*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#nav</span>&#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="通过GitHub-Actions自动化部署hexo博客（已弃用）"><a href="#通过GitHub-Actions自动化部署hexo博客（已弃用）" class="headerlink" title="通过GitHub Actions自动化部署hexo博客（已弃用）"></a>通过GitHub Actions自动化部署hexo博客（已弃用）</h1><blockquote><p>猛然发现，使用Github Actions后，更新日期全部刷新。因此，我又重新看了一下下述代码，发现每次git push提交后，工作流都会在public文件夹下重新生成一次仓库，再覆盖jianerssr.github.io原有仓库，除非每篇文章自定义updated，不然博客仓库相当于一直都是新仓库，没想到解决办法，遂弃用。<br>而hexo为什么可以保持更新记录呢？我理解是因为输入hexo g指令后，生成publi文件夹，与此同时，public文件夹下的内容复制到.deploy_git文件夹下。该文件夹有个.git文件夹，可以推断，这个仓库是jianerssr.github.io的本地仓库，hexo代替我们执行了git指令。</p></blockquote><p>来源：<a href="https://akilar.top/posts/f752c86d/">使用Github Action实现全自动部署</a></p><ol><li><p>获取Token。</p><p>记得勾选<code>repo</code>以及<code>workflows</code>项，<code>Token</code>有效期设为永久。</p></li><li><p>github上创建私有仓库。</p><p>防止<code>Token</code>泄露。</p></li><li><p>配置Github Action</p><p>打开<code>.github</code>文件夹，新建<code>workflows</code>文件夹，并在该文件夹下新建<code>autodeploy.yml</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"># 当有改动推送到master分支时，启动Action</span><br><span class="line">name: 自动部署</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    branches:</span><br><span class="line">      - main #2020年10月后github新建仓库默认分支改为main，注意更改</span><br><span class="line"></span><br><span class="line">  release:</span><br><span class="line">    types:</span><br><span class="line">      - published</span><br><span class="line"></span><br><span class="line">jobs:</span><br><span class="line">  deploy:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    steps:</span><br><span class="line">    - name: 检查分支</span><br><span class="line">      uses: actions/checkout@v2</span><br><span class="line">      with:</span><br><span class="line">        ref: main #2020年10月后github新建仓库默认分支改为main，注意更改</span><br><span class="line"></span><br><span class="line">    - name: 安装 Node</span><br><span class="line">      uses: actions/setup-node@v1</span><br><span class="line">      with:</span><br><span class="line">        node-version: &quot;14.17.6&quot; #action使用的node版本，建议大版本和本地保持一致。可以在本地用node -v查询版本号。</span><br><span class="line"></span><br><span class="line">    - name: 安装 Hexo</span><br><span class="line">      run: |</span><br><span class="line">        export TZ=&#x27;Asia/Shanghai&#x27;</span><br><span class="line">        npm install hexo-cli -g</span><br><span class="line"></span><br><span class="line">    - name: 缓存 Hexo</span><br><span class="line">      uses: actions/cache@v1</span><br><span class="line">      id: cache</span><br><span class="line">      with:</span><br><span class="line">        path: node_modules</span><br><span class="line">        key: $&#123;&#123;runner.OS&#125;&#125;-$&#123;&#123;hashFiles(&#x27;**/package-lock.json&#x27;)&#125;&#125;</span><br><span class="line"></span><br><span class="line">    - name: 安装依赖</span><br><span class="line">      if: steps.cache.outputs.cache-hit != &#x27;true&#x27;</span><br><span class="line">      run: |</span><br><span class="line">        npm install --save</span><br><span class="line"></span><br><span class="line">    - name: 生成静态文件</span><br><span class="line">      run: |</span><br><span class="line">        hexo clean</span><br><span class="line">        hexo generate</span><br><span class="line"></span><br><span class="line">    - name: 部署 #此处master:master 指从本地的master分支提交到远程仓库的master分支，若远程仓库没有对应分支则新建一个。如有其他需要，可以根据自己的需求更改。</span><br><span class="line">      run: |</span><br><span class="line">        cd ./public</span><br><span class="line">        git init</span><br><span class="line">        git config --global user.name &#x27;$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;&#x27;</span><br><span class="line">        git config --global user.email &#x27;$&#123;&#123; secrets.GITHUBEMAIL &#125;&#125;&#x27;</span><br><span class="line">        git add .</span><br><span class="line">        git commit -m &quot;$&#123;&#123; github.event.head_commit.message &#125;&#125; $(date +&quot;%Z %Y-%m-%d %A %H:%M:%S&quot;) Updated By Github Actions&quot;</span><br><span class="line">        git push --force --quiet &quot;https://$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;:$&#123;&#123; secrets.GITHUBTOKEN &#125;&#125;@github.com/$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;/$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;.github.io.git&quot; master:main</span><br><span class="line">        #git push --force --quiet &quot;https://$&#123;&#123; secrets.TOKENUSER &#125;&#125;:$&#123;&#123; secrets.CODINGTOKEN &#125;&#125;@e.coding.net/$&#123;&#123; secrets.CODINGUSERNAME &#125;&#125;/$&#123;&#123;  secrets.CODINGBLOGREPO &#125;&#125;.git&quot; master:master #coding部署写法，需要的自行取消注释</span><br><span class="line">        #git push --force --quiet &quot;https://$&#123;&#123; secrets.GITEEUSERNAME &#125;&#125;:$&#123;&#123; secrets.GITEETOKEN &#125;&#125;@gitee.com/$&#123;&#123; secrets.GITEEUSERNAME &#125;&#125;/$&#123;&#123; secrets.GITEEUSERNAME &#125;&#125;.git&quot; master:master #gitee部署写法，需要的自行取消注释</span><br></pre></td></tr></table></figure><blockquote><p>最后一行的master:main 指从工作流使用git创建的仓库master分支(该分支是默认的，不是电脑本地的仓库，是工作流系统中再次创立的仓库)提交到jianerssr.github.io的main分支。</p></blockquote></li><li><p>在私有源代码仓库添加环境变量。</p><p><code>Setting-&gt;Secrets-&gt;actions</code></p><p>根据<code>autodeploy.yml</code>配置文件添加。</p></li><li><p>提交代码。</p><p>删除<code>/themes/butterfly/.git</code>文件夹。</p><p>执行下述指令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin git@私有仓库地址</span><br><span class="line">git branch -M main</span><br></pre></td></tr></table></figure><p>打开<code>.gitignore</code>文件添加屏蔽项，减少文件提交量，加快速度。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br><span class="line">.deploy_git*/</span><br><span class="line">.idea</span><br><span class="line">themes/butterfly/.git</span><br></pre></td></tr></table></figure><p>最后：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;随便&quot;</span><br><span class="line">git push</span><br><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 建站攻略 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> 备忘录 </tag>
            
            <tag> butterfly </tag>
            
            <tag> 自定义 </tag>
            
            <tag> 博客魔改 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义侧边栏以及添加css、js、img文件的说明</title>
      <link href="/2023/01/19/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BE%A7%E8%BE%B9%E6%A0%8F%E4%BB%A5%E5%8F%8A%E6%B7%BB%E5%8A%A0css%E3%80%81js%E3%80%81img%E6%96%87%E4%BB%B6%E7%9A%84%E8%AF%B4%E6%98%8E/"/>
      <url>/2023/01/19/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BE%A7%E8%BE%B9%E6%A0%8F%E4%BB%A5%E5%8F%8A%E6%B7%BB%E5%8A%A0css%E3%80%81js%E3%80%81img%E6%96%87%E4%BB%B6%E7%9A%84%E8%AF%B4%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<h1 id="如何自定义侧边栏"><a href="#如何自定义侧边栏" class="headerlink" title="如何自定义侧边栏"></a>如何自定义侧边栏</h1><p><a href="https://butterfly.js.org/posts/ea33ab97/">详见</a></p><p>在hexo博客目录中的<code>/source/_data</code>创建一个名为<code>widget.yml</code>的文件，如果没有<code>_data</code>文件夹，自己创建一个。<code>widget.yml</code>文件内容如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">top: #创建的 widget 会出现在非 sticky 区域（即所有页面都会显示)</span><br><span class="line">  - class_name: #所创建的 widget 父类 class 名 （可选）</span><br><span class="line">    id_name: #所创建的 widget 父类 id 名（可选）</span><br><span class="line">    name: #所创建的 widget 标题</span><br><span class="line">    icon: #所创建的 widget 图标</span><br><span class="line">    html: #所创建的 widget 相关代码</span><br><span class="line"></span><br><span class="line">bottom: #创建的 widget 会出现在 sticky 区域（除了文章页都会显示)</span><br><span class="line">  - class_name:</span><br><span class="line">    id_name:</span><br><span class="line">    name:</span><br><span class="line">    icon:</span><br><span class="line">    order: #所创建的 widget 排序 （可选），如果不配置，则默认为 0。数字越小，排序越靠前。非自定义侧边栏的排序在主题配置文件（_config.butterfly.yml）sort_order处设置</span><br><span class="line">    html:</span><br></pre></td></tr></table></figure><p>hexo会根据<code>widget.yml</code>内容自动生成代码。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-widget 所写的 class_name&quot;</span> <span class="attr">id</span>=<span class="string">&quot;所写的 id_name&quot;</span> <span class="attr">style</span>=<span class="string">&quot;order: 所写的 order&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-headline&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;所写的 icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>所写的 name<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-content&quot;</span>&gt;</span></span><br><span class="line">        所写的 html</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="如何添加自定义css、js、img文件"><a href="#如何添加自定义css、js、img文件" class="headerlink" title="如何添加自定义css、js、img文件"></a>如何添加自定义css、js、img文件</h1><p>在本地博客根目录的<code>source</code>文件夹里创建<code>css``js``img</code>文件夹（<code>/source/css</code> <code>/source/js</code> <code>/source/img</code>），里面即可存放<code>.css</code> <code>.js</code> <code>img</code>文件。</p><p>随后，在主题配置文件<code>_config.butterfly.yml</code>里面的<code>inject</code>处引入刚才编写的<code>css</code> <code>js</code>文件。</p><p>至于<code>img</code>文件，直接就在需要插入图片的地方引入<code>/img/***.png</code>即可，但一般建议使用图床。</p><p>一般而言，css文件在head引入，js文件在bottom里引入，有的js要求在head引入，不然无法生效。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    # 自定义css</span><br><span class="line">    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/style.css?v1&quot;&gt;</span><br><span class="line">    # 静态文件后面加个  ?任意内容  可以在每次更新之后用户自动重新请求.</span><br><span class="line">    # 例如添加 ?1 ,在修改此文件后改成 ?2 ,用户访问你的网站时,不会使用本地的缓存,而是请求新的内容。没修改的话就不用动。</span><br><span class="line">  bottom:</span><br><span class="line">    # 自定义js</span><br><span class="line">    - &lt;script src=&quot;/js/script.js?v1&quot;&gt;&lt;/script&gt;</span><br><span class="line">    # 引入多个文件就直接往下复制一行改一下文件名即可，如下：</span><br><span class="line">    - &lt;script src=&quot;/js/script1.js?v1&quot;&gt;&lt;/script&gt;</span><br><span class="line">    - &lt;script src=&quot;/js/script2.js?v1&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 建站攻略 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> butterfly </tag>
            
            <tag> 自定义 </tag>
            
            <tag> 博客魔改 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客魔改内容（一）</title>
      <link href="/2023/01/18/%E5%8D%9A%E5%AE%A2%E9%AD%94%E6%94%B9%E5%86%85%E5%AE%B9%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2023/01/18/%E5%8D%9A%E5%AE%A2%E9%AD%94%E6%94%B9%E5%86%85%E5%AE%B9%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<blockquote><p>除参考butterfly主题文档进行正常配置之外，本博客还参照一些教程进行了魔改（复制）。记录一下，以便后期搞不清时查阅。</p></blockquote><h1 id="添加fps显示"><a href="#添加fps显示" class="headerlink" title="添加fps显示"></a>添加fps显示</h1><p>来源：<a href="https://yisous.xyz/posts/670e47f/#fps%E6%98%BE%E7%A4%BA">博客魔改日记(3)</a><br>参考：<a href="https://www.fomal.cc/posts/d739261b.html">博客魔改教程总结（四）</a></p><ol><li><p>在主题配置文件<code>_config.butterfly.yml</code>中找到<code>inject</code>项，插入代码。</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">head:</span><br><span class="line">   - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/fps.css?1&quot;&gt;</span><br><span class="line">   # 在.css后面添加 ?1 ,在修改此文件后改成 ?2 ,用户访问网站时,不会使用本地的缓存,而是请求新的内容。没修改的话就不用动</span><br><span class="line">   - &lt;span id=&quot;fps&quot;&gt;&lt;/span&gt; # 帧率检测</span><br><span class="line"> bottom:</span><br><span class="line">   - &lt;script async src=&quot;/js/fps.js&quot;&gt;&lt;/script&gt; # 帧率检测</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/css</code>文件夹下新建<code>fps.css</code>，插入代码。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 帧率检测 */</span></span><br><span class="line"><span class="selector-id">#fps</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="comment">/* 指定位置 */</span></span><br><span class="line">  <span class="attribute">left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1919810</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#fps</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.85</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#fps</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.72</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/js</code>文件夹下新建<code>fps.js</code>，插入代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;fpson&quot;</span>) == <span class="literal">undefined</span> || <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;fpson&quot;</span>) == <span class="string">&quot;1&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> rAF = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> ||</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> ||</span><br><span class="line">            <span class="keyword">function</span> (<span class="params">callback</span>) &#123;</span><br><span class="line">                <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(callback, <span class="number">1000</span> / <span class="number">60</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;();</span><br><span class="line">    <span class="keyword">var</span> frame = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> allFrameCount = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> lastTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">var</span> lastFameTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">var</span> loop = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="keyword">var</span> fs = (now - lastFameTime);</span><br><span class="line">        <span class="keyword">var</span> fps = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">1000</span> / fs);</span><br><span class="line"></span><br><span class="line">        lastFameTime = now;</span><br><span class="line">        <span class="comment">// 不置 0，在动画的开头及结尾记录此值的差值算出 FPS</span></span><br><span class="line">        allFrameCount++;</span><br><span class="line">        frame++;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (now &gt; <span class="number">1000</span> + lastTime) &#123;</span><br><span class="line">            <span class="keyword">var</span> fps = <span class="title class_">Math</span>.<span class="title function_">round</span>((frame * <span class="number">1000</span>) / (now - lastTime));</span><br><span class="line">            <span class="keyword">if</span> (fps &lt;= <span class="number">5</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:#bd0000&quot;&gt;卡成ppt🤢&lt;/span&gt;`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fps &lt;= <span class="number">15</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:red&quot;&gt;电竞级帧率😖&lt;/span&gt;`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fps &lt;= <span class="number">25</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:orange&quot;&gt;有点难受😨&lt;/span&gt;`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fps &lt; <span class="number">35</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:#9338e6&quot;&gt;不太流畅🙄&lt;/span&gt;`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fps &lt;= <span class="number">45</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:#08b7e4&quot;&gt;还不错哦🤣&lt;/span&gt;`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:#39c5bb&quot;&gt;十分流畅😁&lt;/span&gt;`</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fps&quot;</span>).<span class="property">innerHTML</span> = <span class="string">`FPS:<span class="subst">$&#123;fps&#125;</span> <span class="subst">$&#123;kd&#125;</span>`</span>;</span><br><span class="line">            frame = <span class="number">0</span>;</span><br><span class="line">            lastTime = now;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">rAF</span>(loop);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">loop</span>();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fps&quot;</span>).<span class="property">style</span> = <span class="string">&quot;display:none!important&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="文章统计功能"><a href="#文章统计功能" class="headerlink" title="文章统计功能"></a>文章统计功能</h1><p>来源：<a href="https://blog.eurkon.com/post/1213ef82.html#%E5%BC%95%E5%85%A5-ECharts-js">Hexo博客文章统计图</a></p><ol><li><p>新建<code>charts</code>页面</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page charts</span><br></pre></td></tr></table></figure></li><li><p>引入<code>ECharts.js</code></p><p>有两种引入方式。一种是全局引用，即在<code>_config.butterfly.yml</code>的<code>inject</code>中引入<code>echarts.js</code>文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:  </span><br><span class="line">    - &lt;script src=&quot;https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js&quot;&gt;&lt;/script&gt; </span><br><span class="line">    #文章统计</span><br></pre></td></tr></table></figure><p>另一种为页面引入，即在需要引入文章统计图的页面中插入<code>echarts.js</code>文件。例如，可在<code>/source/charts/index.md</code>中添加以下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>本博客采用第一种方法。</p></li><li><p>文章统计代码</p><p>在<code>/themes/butterfly/scripts/helpers</code>目录下新建<code>charts.js</code>文件，然后添加下述内容：</p><p>更多属性见<a href="https://echarts.apache.org/zh/option.html#title">官方文档</a>，可根据自行喜好对 ECharts 统计图进行修改。但不好意思，看不懂。只粘贴了现有的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> moment = <span class="built_in">require</span>(<span class="string">&#x27;moment&#x27;</span>)</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_render:html&#x27;</span>, <span class="keyword">function</span> (<span class="params">locals</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> $ = cheerio.<span class="title function_">load</span>(locals)</span><br><span class="line">  <span class="keyword">const</span> post = $(<span class="string">&#x27;#posts-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> tag = $(<span class="string">&#x27;#tags-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> category = $(<span class="string">&#x27;#categories-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> htmlEncode = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (post.<span class="property">length</span> &gt; <span class="number">0</span> || tag.<span class="property">length</span> &gt; <span class="number">0</span> || category.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (post.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#postsChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (post.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      post.<span class="title function_">after</span>(<span class="title function_">postsChart</span>(post.<span class="title function_">attr</span>(<span class="string">&#x27;data-start&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tag.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#tagsChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (tag.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      tag.<span class="title function_">after</span>(<span class="title function_">tagsChart</span>(tag.<span class="title function_">attr</span>(<span class="string">&#x27;data-length&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (category.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#categoriesChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (category.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      category.<span class="title function_">after</span>(<span class="title function_">categoriesChart</span>(category.<span class="title function_">attr</span>(<span class="string">&#x27;data-parent&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (htmlEncode) &#123;</span><br><span class="line">      <span class="keyword">return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>().<span class="title function_">replace</span>(<span class="regexp">/&amp;amp;#/g</span>, <span class="string">&#x27;&amp;#&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> locals</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">postsChart</span> (startMonth) &#123;</span><br><span class="line">  <span class="keyword">const</span> startDate = <span class="title function_">moment</span>(startMonth || <span class="string">&#x27;2020-01&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> endDate = <span class="title function_">moment</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> monthMap = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">  <span class="keyword">const</span> dayTime = <span class="number">3600</span> * <span class="number">24</span> * <span class="number">1000</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> time = startDate; time &lt;= endDate; time += dayTime) &#123;</span><br><span class="line">    <span class="keyword">const</span> month = <span class="title function_">moment</span>(time).<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class="line">      monthMap.<span class="title function_">set</span>(month, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;posts&#x27;</span>).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">post</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> month = post.<span class="property">date</span>.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class="line">      monthMap.<span class="title function_">set</span>(month, monthMap.<span class="title function_">get</span>(month) + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">const</span> monthArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">keys</span>()])</span><br><span class="line">  <span class="keyword">const</span> monthValueArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">values</span>()])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;postsChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var postsChart = echarts.init(document.getElementById(&#x27;posts-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var postsOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;文章发布统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;</span></span><br><span class="line"><span class="string">        trigger: &#x27;axis&#x27;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      xAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;日期&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;category&#x27;,</span></span><br><span class="line"><span class="string">        boundaryGap: false,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;monthArr&#125;</span></span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      yAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;value&#x27;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        splitLine: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: [&#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;line&#x27;,</span></span><br><span class="line"><span class="string">        smooth: true,</span></span><br><span class="line"><span class="string">        lineStyle: &#123;</span></span><br><span class="line"><span class="string">            width: 0</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        showSymbol: false,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          opacity: 1,</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;,</span></span><br><span class="line"><span class="string">          &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        areaStyle: &#123;</span></span><br><span class="line"><span class="string">          opacity: 1,</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;, &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;monthValueArr&#125;</span>,</span></span><br><span class="line"><span class="string">        markLine: &#123;</span></span><br><span class="line"><span class="string">          data: [&#123;</span></span><br><span class="line"><span class="string">            name: &#x27;平均值&#x27;,</span></span><br><span class="line"><span class="string">            type: &#x27;average&#x27;,</span></span><br><span class="line"><span class="string">            label: &#123;</span></span><br><span class="line"><span class="string">              color: color</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;]</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    postsChart.setOption(postsOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class="line"><span class="string">      postsChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    postsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if (event.componentType === &#x27;series&#x27;) window.location.href = &#x27;/archives/&#x27; + event.name.replace(&#x27;-&#x27;, &#x27;/&#x27;);</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tagsChart</span> (len) &#123;</span><br><span class="line">  <span class="keyword">const</span> tagArr = []</span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;tags&#x27;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">tag</span>) &#123;</span><br><span class="line">    tagArr.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: tag.<span class="property">name</span>, <span class="attr">value</span>: tag.<span class="property">length</span>, <span class="attr">path</span>: tag.<span class="property">path</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  tagArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123; <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span> &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dataLength = <span class="title class_">Math</span>.<span class="title function_">min</span>(tagArr.<span class="property">length</span>, len) || tagArr.<span class="property">length</span></span><br><span class="line">  <span class="keyword">const</span> tagNameArr = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dataLength; i++) &#123;</span><br><span class="line">    tagNameArr.<span class="title function_">push</span>(tagArr[i].<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> tagNameArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagNameArr)</span><br><span class="line">  <span class="keyword">const</span> tagArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagArr)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;tagsChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var tagsChart = echarts.init(document.getElementById(&#x27;tags-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var tagsOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;Top <span class="subst">$&#123;dataLength&#125;</span> 标签统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;&#125;,</span></span><br><span class="line"><span class="string">      xAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;标签&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;category&#x27;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color,</span></span><br><span class="line"><span class="string">          interval: 0</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;tagNameArrJson&#125;</span></span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      yAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;value&#x27;,</span></span><br><span class="line"><span class="string">        splitLine: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: [&#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;bar&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;tagArrJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          borderRadius: [5, 5, 0, 0],</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;,</span></span><br><span class="line"><span class="string">          &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        emphasis: &#123;</span></span><br><span class="line"><span class="string">          itemStyle: &#123;</span></span><br><span class="line"><span class="string">            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">              offset: 0,</span></span><br><span class="line"><span class="string">              color: &#x27;rgba(128, 255, 195)&#x27;</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">              offset: 1,</span></span><br><span class="line"><span class="string">              color: &#x27;rgba(1, 211, 255)&#x27;</span></span><br><span class="line"><span class="string">            &#125;])</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        markLine: &#123;</span></span><br><span class="line"><span class="string">          data: [&#123;</span></span><br><span class="line"><span class="string">            name: &#x27;平均值&#x27;,</span></span><br><span class="line"><span class="string">            type: &#x27;average&#x27;,</span></span><br><span class="line"><span class="string">            label: &#123;</span></span><br><span class="line"><span class="string">              color: color</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;]</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    tagsChart.setOption(tagsOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class="line"><span class="string">      tagsChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    tagsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">categoriesChart</span> (dataParent) &#123;</span><br><span class="line">  <span class="keyword">const</span> categoryArr = []</span><br><span class="line">  <span class="keyword">let</span> categoryParentFlag = <span class="literal">false</span></span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;categories&#x27;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">category</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (category.<span class="property">parent</span>) categoryParentFlag = <span class="literal">true</span></span><br><span class="line">    categoryArr.<span class="title function_">push</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: category.<span class="property">name</span>,</span><br><span class="line">      <span class="attr">value</span>: category.<span class="property">length</span>,</span><br><span class="line">      <span class="attr">path</span>: category.<span class="property">path</span>,</span><br><span class="line">      <span class="attr">id</span>: category.<span class="property">_id</span>,</span><br><span class="line">      <span class="attr">parentId</span>: category.<span class="property">parent</span> || <span class="string">&#x27;0&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  categoryParentFlag = categoryParentFlag &amp;&amp; dataParent === <span class="string">&#x27;true&#x27;</span></span><br><span class="line">  categoryArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123; <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span> &#125;)</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">translateListToTree</span> (data, parent) &#123;</span><br><span class="line">    <span class="keyword">let</span> tree = []</span><br><span class="line">    <span class="keyword">let</span> temp</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (data[index].<span class="property">parentId</span> == parent) &#123;</span><br><span class="line">        <span class="keyword">let</span> obj = data[index];</span><br><span class="line">        temp = <span class="title function_">translateListToTree</span>(data, data[index].<span class="property">id</span>);</span><br><span class="line">        <span class="keyword">if</span> (temp.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          obj.<span class="property">children</span> = temp</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tree.<span class="title function_">indexOf</span>())</span><br><span class="line">          tree.<span class="title function_">push</span>(obj)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> tree</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> categoryNameJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">category</span>) &#123; <span class="keyword">return</span> category.<span class="property">name</span> &#125;))</span><br><span class="line">  <span class="keyword">const</span> categoryArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr)</span><br><span class="line">  <span class="keyword">const</span> categoryArrParentJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title function_">translateListToTree</span>(categoryArr, <span class="string">&#x27;0&#x27;</span>))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;categoriesChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var categoriesChart = echarts.init(document.getElementById(&#x27;categories-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var categoryParentFlag = <span class="subst">$&#123;categoryParentFlag&#125;</span></span></span><br><span class="line"><span class="string">    var categoriesOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;文章分类统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      legend: &#123;</span></span><br><span class="line"><span class="string">        top: &#x27;bottom&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryNameJson&#125;</span>,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;</span></span><br><span class="line"><span class="string">        trigger: &#x27;item&#x27;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: []</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    categoriesOption.series.push(</span></span><br><span class="line"><span class="string">      categoryParentFlag ? </span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        nodeClick :false,</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;sunburst&#x27;,</span></span><br><span class="line"><span class="string">        radius: [&#x27;15%&#x27;, &#x27;90%&#x27;],</span></span><br><span class="line"><span class="string">        center: [&#x27;50%&#x27;, &#x27;55%&#x27;],</span></span><br><span class="line"><span class="string">        sort: &#x27;desc&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryArrParentJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          borderColor: &#x27;#fff&#x27;,</span></span><br><span class="line"><span class="string">          borderWidth: 2,</span></span><br><span class="line"><span class="string">          emphasis: &#123;</span></span><br><span class="line"><span class="string">            focus: &#x27;ancestor&#x27;,</span></span><br><span class="line"><span class="string">            shadowBlur: 10,</span></span><br><span class="line"><span class="string">            shadowOffsetX: 0,</span></span><br><span class="line"><span class="string">            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      :</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;pie&#x27;,</span></span><br><span class="line"><span class="string">        radius: [30, 80],</span></span><br><span class="line"><span class="string">        roseType: &#x27;area&#x27;,</span></span><br><span class="line"><span class="string">        label: &#123;</span></span><br><span class="line"><span class="string">          color: color,</span></span><br><span class="line"><span class="string">          formatter: &#x27;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&#x27;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryArrJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          emphasis: &#123;</span></span><br><span class="line"><span class="string">            shadowBlur: 10,</span></span><br><span class="line"><span class="string">            shadowOffsetX: 0,</span></span><br><span class="line"><span class="string">            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    categoriesChart.setOption(categoriesOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class="line"><span class="string">      categoriesChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    categoriesChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在建立的charts页面使用统计图</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 文章发布时间统计图 --&gt;</span><br><span class="line">&lt;div id=&quot;posts-chart&quot; data-start=&quot;2023-01&quot; style=&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!-- 文章标签统计图 --&gt;</span><br><span class="line">&lt;div id=&quot;tags-chart&quot; data-length=&quot;10&quot; style=&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!-- 文章分类统计图 --&gt;</span><br><span class="line">&lt;div id=&quot;categories-chart&quot; data-parent=&quot;true&quot; style=&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>其中：</p><ul><li><code>posts-chart</code>的<code>data-start=&quot;2023-01&quot;</code>属性表示文章发布时间统计图仅显示2023年1月及以后的文章数据。</li><li><code>tags-chart</code>的<code>data-length=&quot;10&quot;</code>属性表示仅显示排名前10的标签。</li><li><code>categories-chart</code>的<code>data-parent=&quot;true&quot;</code>属性表示<code>有子分类</code>时以旭日图显示分类，其他<code>无子分类</code>或<code>设置为false</code>或<code>不设置该属性</code>或<code>设置为其他非true属性</code>情况都以饼状图显示分类。</li></ul></li><li><p>在其他页面使用统计图</p><p>本博客暂未引用，详见<a href="https://blog.eurkon.com/post/1213ef82.html#%E5%BC%95%E5%85%A5-ECharts-js">Hexo博客文章统计图</a>。</p></li></ol><h1 id="随机访问一篇文章"><a href="#随机访问一篇文章" class="headerlink" title="随机访问一篇文章"></a>随机访问一篇文章</h1><p>来源：<a href="https://blog.leonus.cn/2022/randomPost.html">随机访问一篇文章的实现</a></p><p>功能主要基于<code>baidusitemap插件</code>实现。</p><ol><li><p>在主题配置文件<code>_config.butterfly.yml</code>中找到<code>inject</code>项，插入代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  bottom:</span><br><span class="line">    - &lt;script src=&quot;/js/randompost.js&quot;&gt;&lt;/script&gt; # 随机访问一篇文章</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/js</code>文件夹下新建<code>randompost.js</code>，插入代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">randomPost</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;/baidusitemap.xml&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">text</span>()).<span class="title function_">then</span>(<span class="function"><span class="params">str</span> =&gt;</span> (<span class="keyword">new</span> <span class="variable language_">window</span>.<span class="title class_">DOMParser</span>()).<span class="title function_">parseFromString</span>(str, <span class="string">&quot;text/xml&quot;</span>)).<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> ls = data.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;url loc&#x27;</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> url = ls[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * ls.<span class="property">length</span>)].<span class="property">innerHTML</span>;</span><br><span class="line">            <span class="keyword">if</span> (location.<span class="property">href</span> == url) <span class="keyword">continue</span>;</span><br><span class="line">            location.<span class="property">href</span> = url;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件<code>_config.butterfly.yml</code>中增加导航按钮即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  随机访问: javascript:randomPost(); || fa-solid fa-shuffle</span><br></pre></td></tr></table></figure></li></ol><h1 id="网站标题提示"><a href="#网站标题提示" class="headerlink" title="网站标题提示"></a>网站标题提示</h1><p>来源：<a href="https://www.fomal.cc/posts/d1927166.html#%E7%BD%91%E7%AB%99%E6%81%B6%E6%90%9E%E6%A0%87%E9%A2%98">博客魔改教程总结（五）</a></p><ol><li><p>在主题配置文件<code>_config.butterfly.yml</code>中找到<code>inject</code>项，插入代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">   bottom:</span><br><span class="line">    - &lt;script async src=&quot;/js/title.js&quot;&gt;&lt;/script&gt; #网站标题提示</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/js</code>文件夹下新建<code>title.js</code>，插入代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//动态标题</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">OriginTitile</span> = <span class="variable language_">document</span>.<span class="property">title</span>;</span><br><span class="line"><span class="keyword">var</span> titleTime;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">hidden</span>) &#123;</span><br><span class="line">    <span class="comment">//离开当前页面时标签显示内容</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;爱你😘~别走&#x27;</span>;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(titleTime);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//返回当前页面时标签显示内容</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;终于等到你/(ㄒoㄒ)/~~~&#x27;</span>;</span><br><span class="line">    <span class="comment">//四秒后变回正常标题</span></span><br><span class="line">    titleTime = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">title</span> = <span class="title class_">OriginTitile</span>;</span><br><span class="line">    &#125;, <span class="number">4000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><h1 id="加载动画"><a href="#加载动画" class="headerlink" title="加载动画"></a>加载动画</h1><p>来源：<a href="https://anzhiy.cn/posts/52d8.html">Heo同款loading动画</a></p><ol><li><p>打开<code>/themes/butterfly/layout/includes/loading/fullpage-loading.pug</code>文件。</p><p>原代码为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#loading-box</span><br><span class="line">  .loading-left-bg</span><br><span class="line">  .loading-right-bg</span><br><span class="line">  .spinner-box</span><br><span class="line">    .configure-border-1</span><br><span class="line">      .configure-core</span><br><span class="line">    .configure-border-2</span><br><span class="line">      .configure-core</span><br><span class="line">    .loading-word= _p(&#x27;loading&#x27;)</span><br><span class="line"></span><br><span class="line">script.</span><br><span class="line">  const preloader = &#123;</span><br><span class="line">    endLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;auto&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.add(&quot;loaded&quot;)</span><br><span class="line">    &#125;,</span><br><span class="line">    initLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.remove(&quot;loaded&quot;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  window.addEventListener(&#x27;load&#x27;,()=&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line"></span><br><span class="line">  if (!&#123;theme.pjax &amp;&amp; theme.pjax.enable&#125;) &#123;</span><br><span class="line">    document.addEventListener(&#x27;pjax:send&#x27;, () =&gt; &#123; preloader.initLoading() &#125;)</span><br><span class="line">    document.addEventListener(&#x27;pjax:complete&#x27;, () =&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>删去，改为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#loading-box(onclick=&#x27;document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)&#x27;)</span><br><span class="line">  .loading-bg</span><br><span class="line">    div.loading-img</span><br><span class="line">    .loading-image-dot</span><br><span class="line"></span><br><span class="line">script.</span><br><span class="line">  const preloader = &#123;</span><br><span class="line">    endLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;auto&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.add(&quot;loaded&quot;)</span><br><span class="line">    &#125;,</span><br><span class="line">    initLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.remove(&quot;loaded&quot;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  window.addEventListener(&#x27;load&#x27;,()=&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line"></span><br><span class="line">  if (!&#123;theme.pjax &amp;&amp; theme.pjax.enable&#125;) &#123;</span><br><span class="line">    document.addEventListener(&#x27;pjax:send&#x27;, () =&gt; &#123; preloader.initLoading() &#125;)</span><br><span class="line">    document.addEventListener(&#x27;pjax:complete&#x27;, () =&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>打开<code>/themes/butterfly/layout/includes/loading/index.pug</code>文件。</p><p>原代码为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if theme.preloader.source === 1</span><br><span class="line">  include ./fullpage-loading.pug</span><br><span class="line">else</span><br><span class="line">  include ./pace.pug</span><br></pre></td></tr></table></figure><p>删去，改为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if theme.preloader.source === 1</span><br><span class="line">  include ./fullpage-loading.pug</span><br><span class="line">else if theme.preloader.source === 2</span><br><span class="line">  include ./pace.pug</span><br><span class="line">else</span><br><span class="line">  include ./fullpage-loading.pug</span><br><span class="line">  include ./pace.pug</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/css</code>中新建<code>progress_bar.css</code>文件，这是加载图片上方胶囊的样式。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">.pace &#123;</span><br><span class="line">  -webkit-pointer-events: none;</span><br><span class="line">  pointer-events: none;</span><br><span class="line">  -webkit-user-select: none;</span><br><span class="line">  -moz-user-select: none;</span><br><span class="line">  user-select: none;</span><br><span class="line">  z-index: 2000;</span><br><span class="line">  position: fixed;</span><br><span class="line">  margin: auto;</span><br><span class="line">  top: 10px;</span><br><span class="line">  left: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  height: 8px;</span><br><span class="line">  border-radius: 8px;</span><br><span class="line">  width: 4rem;</span><br><span class="line">  background: #eaecf2;</span><br><span class="line">  border: 1px #e3e8f7;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.pace-inactive .pace-progress &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transition: 0.3s ease-in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.pace .pace-progress &#123;</span><br><span class="line">  -webkit-box-sizing: border-box;</span><br><span class="line">  -moz-box-sizing: border-box;</span><br><span class="line">  -ms-box-sizing: border-box;</span><br><span class="line">  -o-box-sizing: border-box;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  -webkit-transform: translate3d(0, 0, 0);</span><br><span class="line">  -moz-transform: translate3d(0, 0, 0);</span><br><span class="line">  -ms-transform: translate3d(0, 0, 0);</span><br><span class="line">  -o-transform: translate3d(0, 0, 0);</span><br><span class="line">  transform: translate3d(0, 0, 0);</span><br><span class="line">  max-width: 200px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  z-index: 2000;</span><br><span class="line">  display: block;</span><br><span class="line">  top: 0;</span><br><span class="line">  right: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">  width: 100%;</span><br><span class="line">  background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);</span><br><span class="line">  animation: gradient 1.5s ease infinite;</span><br><span class="line">  background-size: 200%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.pace.pace-inactive &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transition: 0.3s;</span><br><span class="line">  top: -8px;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes gradient &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    background-position: 0% 50%;</span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    background-position: 100% 50%;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    background-position: 0% 50%;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>打开<code>/themes/butterfly/source/css/_layout/loading.styl</code>文件。</p><p>原代码为:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">if hexo-config(&#x27;preloader.enable&#x27;) &amp;&amp; hexo-config(&#x27;preloader.source&#x27;) == 1</span><br><span class="line">  .loading-bg</span><br><span class="line">    position: fixed</span><br><span class="line">    z-index: 1000</span><br><span class="line">    width: 50%</span><br><span class="line">    height: 100%</span><br><span class="line">    background-color: var(--preloader-bg)</span><br><span class="line"></span><br><span class="line">  #loading-box</span><br><span class="line">    .loading-left-bg</span><br><span class="line">      @extend .loading-bg</span><br><span class="line"></span><br><span class="line">    .loading-right-bg</span><br><span class="line">      @extend .loading-bg</span><br><span class="line">      right: 0</span><br><span class="line"></span><br><span class="line">    .spinner-box</span><br><span class="line">      position: fixed</span><br><span class="line">      z-index: 1001</span><br><span class="line">      display: flex</span><br><span class="line">      justify-content: center</span><br><span class="line">      align-items: center</span><br><span class="line">      width: 100%</span><br><span class="line">      height: 100vh</span><br><span class="line"></span><br><span class="line">      .configure-border-1</span><br><span class="line">        position: absolute</span><br><span class="line">        padding: 3px</span><br><span class="line">        width: 115px</span><br><span class="line">        height: 115px</span><br><span class="line">        background: #ffab91</span><br><span class="line">        animation: configure-clockwise 3s ease-in-out 0s infinite alternate</span><br><span class="line"></span><br><span class="line">      .configure-border-2</span><br><span class="line">        left: -115px</span><br><span class="line">        padding: 3px</span><br><span class="line">        width: 115px</span><br><span class="line">        height: 115px</span><br><span class="line">        background: rgb(63, 249, 220)</span><br><span class="line">        transform: rotate(45deg)</span><br><span class="line">        animation: configure-xclockwise 3s ease-in-out 0s infinite alternate</span><br><span class="line"></span><br><span class="line">      .loading-word</span><br><span class="line">        position: absolute</span><br><span class="line">        color: var(--preloader-color)</span><br><span class="line">        font-size: 16px</span><br><span class="line"></span><br><span class="line">      .configure-core</span><br><span class="line">        width: 100%</span><br><span class="line">        height: 100%</span><br><span class="line">        background-color: var(--preloader-bg)</span><br><span class="line"></span><br><span class="line">    &amp;.loaded</span><br><span class="line">      .loading-left-bg</span><br><span class="line">        transition: all .5s</span><br><span class="line">        transform: translate(-100%, 0)</span><br><span class="line"></span><br><span class="line">      .loading-right-bg</span><br><span class="line">        transition: all .5s</span><br><span class="line">        transform: translate(100%, 0)</span><br><span class="line"></span><br><span class="line">      .spinner-box</span><br><span class="line">        display: none</span><br><span class="line"></span><br><span class="line">  @keyframes configure-clockwise</span><br><span class="line">    0%</span><br><span class="line">      transform: rotate(0)</span><br><span class="line"></span><br><span class="line">    25%</span><br><span class="line">      transform: rotate(90deg)</span><br><span class="line"></span><br><span class="line">    50%</span><br><span class="line">      transform: rotate(180deg)</span><br><span class="line"></span><br><span class="line">    75%</span><br><span class="line">      transform: rotate(270deg)</span><br><span class="line"></span><br><span class="line">    100%</span><br><span class="line">      transform: rotate(360deg)</span><br><span class="line"></span><br><span class="line">  @keyframes configure-xclockwise</span><br><span class="line">    0%</span><br><span class="line">      transform: rotate(45deg)</span><br><span class="line"></span><br><span class="line">    25%</span><br><span class="line">      transform: rotate(-45deg)</span><br><span class="line"></span><br><span class="line">    50%</span><br><span class="line">      transform: rotate(-135deg)</span><br><span class="line"></span><br><span class="line">    75%</span><br><span class="line">      transform: rotate(-225deg)</span><br><span class="line"></span><br><span class="line">    100%</span><br><span class="line">      transform: rotate(-315deg)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>删去，改为以下代码。代码中背景颜色修改。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">if hexo-config(&#x27;preloader&#x27;)</span><br><span class="line">  .loading-bg</span><br><span class="line">    display: flex;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    position: fixed;</span><br><span class="line">    background: #f5f5f5;</span><br><span class="line">    z-index: 1001;</span><br><span class="line">    opacity: 1;</span><br><span class="line">    transition: .3s;</span><br><span class="line"></span><br><span class="line">  #loading-box</span><br><span class="line">    .loading-img</span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">      margin: auto;</span><br><span class="line">      border: 4px solid #f0f0f2;</span><br><span class="line">      animation-duration: .3s;</span><br><span class="line">      animation-name: loadingAction;</span><br><span class="line">      animation-iteration-count: infinite;</span><br><span class="line">      animation-direction: alternate;</span><br><span class="line">    .loading-image-dot</span><br><span class="line">      width: 30px;</span><br><span class="line">      height: 30px;</span><br><span class="line">      background: #39ce42; </span><br><span class="line">      position: absolute;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">      border: 6px solid #fff;</span><br><span class="line">      top: 50%;</span><br><span class="line">      left: 50%;</span><br><span class="line">      transform: translate(18px, 24px);</span><br><span class="line">    &amp;.loaded</span><br><span class="line">      .loading-bg</span><br><span class="line">        opacity: 0;</span><br><span class="line">        z-index: -1000;</span><br><span class="line"></span><br><span class="line">  @keyframes loadingAction</span><br><span class="line">    0% &#123;</span><br><span class="line">        opacity: 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    100% &#123;</span><br><span class="line">        opacity: .4;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/css/custom.css</code>中新增代码，其中<code>background</code>中的<code>url</code>用于设置加载图片。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/*加载动画*/</span><br><span class="line">.loading-img &#123;</span><br><span class="line">  background: url(https://imag.heyjian.top/1.jpg) no-repeat center center;</span><br><span class="line">  background-size: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件<code>_config.butterfly.yml</code>中找到<code>inject</code>项，插入代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/custom.css?1&quot;&gt;</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件<code>_config.butterfly.yml</code>中找到<code>preloader</code>项。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">preloader:</span><br><span class="line">  enable: true</span><br><span class="line">  # source</span><br><span class="line">  # 1. fullpage-loading</span><br><span class="line">  # 2. pace (progress bar)</span><br><span class="line">  source: 3</span><br><span class="line">  # pace theme (see https://codebyzach.github.io/pace/)</span><br><span class="line">  pace_css_url: /css/progress_bar.css</span><br></pre></td></tr></table></figure><p>其中<code>source: 1</code>为满屏加载但加载图片上方无胶囊动画，<code>source: 2</code>为有胶囊但无满屏动画，<code>source: 3</code>为两者皆有。</p></li></ol><h1 id="首页文章置顶滚动轮播"><a href="#首页文章置顶滚动轮播" class="headerlink" title="首页文章置顶滚动轮播"></a>首页文章置顶滚动轮播</h1><p>来源：<a href="https://akilar.top/posts/8e1264d1/">Swiper Bar</a></p><ol><li><p>在本地站点根目录执行下述指令，安装插件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-swiper --save</span><br></pre></td></tr></table></figure></li><li><p>在站点配置文件<code>_config.yml</code>中添加下述代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">swiper:</span><br><span class="line">  enable: true # 开关</span><br><span class="line">  priority: 5 #过滤器优先权,数值越小，执行越早，默认为10</span><br><span class="line">  enable_page: / # 填写想要应用的页面的相对路径（即路由地址）,如根目录就填’/‘,分类页面就填’/categories/‘。若要应用于所有页面，就填’all’，默认为all</span><br><span class="line">  timemode: date #date/updated时间显示，date为显示创建日期，updated为显示更新日期,默认为date</span><br><span class="line">  layout: # 挂载容器类型</span><br><span class="line">    type: id #挂载容器类型，填写id或class，不填则默认为id</span><br><span class="line">    name: recent-posts #挂载容器名称</span><br><span class="line">    index: 0 #填0或正整数，前提是layout.type为class，因为同一页面可能有多个class，此项用来确认究竟排在第几个顺位</span><br><span class="line">  default_descr: 怎么可能没有描述呢！！！ #默认文章描述</span><br><span class="line">  swiper_css: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css #swiper css依赖</span><br><span class="line">  swiper_js: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js #swiper js依赖</span><br><span class="line">  custom_css: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css # 适配主题样式补丁</span><br><span class="line">  custom_js: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js # swiper初始化方法</span><br></pre></td></tr></table></figure></li><li><p>使用方法</p><p>在文章<code>front_matter</code>中添加<code>swiper_index: 1</code>即可，其中<code>swiper_index:</code>后的数字为非负整数，代表置顶轮播图顺序，数字越大越靠前。</p></li></ol><h1 id="右下角增加分享分页按钮以及直达底部按钮"><a href="#右下角增加分享分页按钮以及直达底部按钮" class="headerlink" title="右下角增加分享分页按钮以及直达底部按钮"></a>右下角增加分享分页按钮以及直达底部按钮</h1><p>来源：<a href="https://blog.leonus.cn/2022/rightside.html">Butterfly右下角悬浮菜单栏魔改指南</a></p><ol><li><p>打开<code>/themes/butterfly/layout/includes/rightside.pug</code>文件，在一众<code>when</code>下面添加一个<code>when</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;share&#x27;</span><br><span class="line">       button.share(type=&quot;button&quot; title=&#x27;分享链接&#x27; onclick=&quot;share()&quot;)</span><br><span class="line">         i.fas.fa-share-nodes</span><br></pre></td></tr></table></figure></li><li><p>在此文档下面的·#rightside·数组中添加<code>share</code>函数。</p><p>原代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#rightside</span><br><span class="line">  - const &#123; enable, hide, show &#125; = theme.rightside_item_order</span><br><span class="line">  - const hideArray = enable ? hide &amp;&amp; hide.split(&#x27;,&#x27;) : [&#x27;readmode&#x27;,&#x27;translate&#x27;,&#x27;darkmode&#x27;,&#x27;hideAside&#x27;]</span><br><span class="line">  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;toc&#x27;,&#x27;chat&#x27;,&#x27;comment&#x27;]</span><br></pre></td></tr></table></figure><p>添加<code>share</code>函数后的代码:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#rightside</span><br><span class="line">  - const &#123; enable, hide, show &#125; = theme.rightside_item_order</span><br><span class="line">  - const hideArray = enable ? hide &amp;&amp; hide.split(&#x27;,&#x27;) : [&#x27;readmode&#x27;,&#x27;translate&#x27;,&#x27;darkmode&#x27;,&#x27;hideAside&#x27;]</span><br><span class="line">  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;toc&#x27;,&#x27;share&#x27;,&#x27;chat&#x27;,&#x27;comment&#x27;]</span><br></pre></td></tr></table></figure><p>其中：在<code>hideArray</code>里面添加会在点击齿轮按钮之后显示，在<code>showArray</code>里面添加按钮会直接显示。</p><p>虽然，在主题配置文档<code>rightside_item_order</code>中可对右下角按钮进行排序，但由于添加了自定义按钮，为了方便，直接更改此处顺序就可以对其进行排序。</p></li><li><p>在主题配置文档的<code>inject</code>中的<code>bottom</code>项里引入下述代码，其中，该处代码必须要放在自定义分享功能js文件的前面。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bottom:</span><br><span class="line">    - &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js&quot;&gt;&lt;/script&gt; #分享本页引入外部js，一定要在该自定义功能js的上面</span><br><span class="line">    - &lt;script src=&quot;/js/custom.js&quot;&gt;&lt;/script&gt; #自定义分享功能js存放处</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/js/custom.js</code>中插入自定义分享本页js。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 分享本页</span><br><span class="line">function share() &#123;</span><br><span class="line">    let url = window.location.origin + window.location.pathname</span><br><span class="line">    new ClipboardJS(&quot;.share&quot;, &#123; text: function() &#123; return &#x27;标题：&#x27; + document.title + &#x27;\n链接：&#x27; + url &#125; &#125;); #此处可以更改，例如只复制链接，但不想改。</span><br><span class="line">    btf.snackbarShow(&quot;本页面信息已成功复制至剪贴板！小伙子，尽情分享去吧o(*￣▽￣*)ブ&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>直达底部功能在<code>/themes/butterfly/layout/includes/rightside.pug</code>文件最后添加代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">button#go-down(type=&quot;button&quot; title=&quot;直达底部&quot; onclick=&quot;btf.scrollToDest(document.body.scrollHeight, 500)&quot;)</span><br><span class="line">  i.fas.fa-arrow-down</span><br></pre></td></tr></table></figure></li></ol><h1 id="复制、粘贴、F12弹窗提醒"><a href="#复制、粘贴、F12弹窗提醒" class="headerlink" title="复制、粘贴、F12弹窗提醒"></a>复制、粘贴、F12弹窗提醒</h1><p>用<code>f12</code>从<a href="https://blog.leonus.cn/2022/rightside.html">Butterfly右下角悬浮菜单栏魔改指南</a>那扒来的。</p><p>​由于之前已经引用了<code>/source/js/custom.js</code>,因此，只需要在<code>/source/js/custom.js</code>中插入下述代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//f12提醒、复制提醒、粘贴提醒</span><br><span class="line">window.onkeydown=e=&gt;&#123;123===e.keyCode&amp;&amp;btf.snackbarShow(&quot;开发者模式已打开，请记得遵循GPL协议哟(●&#x27;◡&#x27;●)&quot;)&#125;</span><br><span class="line">document.body.addEventListener(&quot;copy&quot;,(e=&gt;&#123;&quot;TEXTAREA&quot;==e.target.tagName&amp;&amp;&quot;&quot;==e.target.className||btf.snackbarShow(&quot;滴\^o^/复制成功~&quot;)&#125;))</span><br><span class="line">document.body.addEventListener(&quot;paste&quot;,(e=&gt;&#123;btf.snackbarShow(&quot;滴\^o^/粘贴成功~&quot;)&#125;))</span><br></pre></td></tr></table></figure><h1 id="控制台样式自定义"><a href="#控制台样式自定义" class="headerlink" title="控制台样式自定义"></a>控制台样式自定义</h1><p>来源：<a href="https://www.fomal.cc/posts/d739261b.html">博客魔改教程总结（四）</a></p><ol><li><p>在已经建立并在主题配置文件中引用的<code>/source/js/custom.js</code>文件中加入下述代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">//控制台样式自定义</span><br><span class="line">var now1 = new Date();</span><br><span class="line">function createtime1() &#123;</span><br><span class="line">    var grt = new Date(&quot;01/14/2023 22:00:00&quot;); //此处修改你的建站时间或者网站上线时间</span><br><span class="line">    now1.setTime(now1.getTime() + 250);</span><br><span class="line">    var days = (now1 - grt) / 1000 / 60 / 60 / 24;</span><br><span class="line">    var dnum = Math.floor(days);</span><br><span class="line"></span><br><span class="line">    var ascll = [</span><br><span class="line">        `欢迎来到jianerssr的个人小屋`,</span><br><span class="line">        `---便是仙禁春深，御炉香袅，临轩亲试。对天颜咫尺，定然魁甲登高第。`,</span><br><span class="line">        `</span><br><span class="line">     ██╗██╗ █████╗ ███╗   ██╗███████╗██████╗ ███████╗███████╗██████╗ </span><br><span class="line">     ██║██║██╔══██╗████╗  ██║██╔════╝██╔══██╗██╔════╝██╔════╝██╔══██╗</span><br><span class="line">     ██║██║███████║██╔██╗ ██║█████╗  ██████╔╝███████╗███████╗██████╔╝</span><br><span class="line">██   ██║██║██╔══██║██║╚██╗██║██╔══╝  ██╔══██╗╚════██║╚════██║██╔══██╗</span><br><span class="line">╚█████╔╝██║██║  ██║██║ ╚████║███████╗██║  ██║███████║███████║██║  ██║</span><br><span class="line"> ╚════╝ ╚═╝╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚══════╝╚══════╝╚═╝  ╚═╝</span><br><span class="line">`,</span><br><span class="line">        &quot;jianerssr的个人小屋已经运行&quot;,</span><br><span class="line">        dnum,</span><br><span class="line">        &quot;天啦!&quot;,</span><br><span class="line">        &quot;©2023 By jianerssr&quot;,</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    setTimeout(</span><br><span class="line">        console.log.bind(</span><br><span class="line">            console,</span><br><span class="line">            `\n%c$&#123;ascll[0]&#125; %c $&#123;ascll[1]&#125; %c $&#123;ascll[2]&#125; %c$&#123;ascll[3]&#125;%c $&#123;ascll[4]&#125;%c $&#123;ascll[5]&#125;\n\n%c $&#123;ascll[6]&#125;\n`,</span><br><span class="line">            &quot;color:#3366ff&quot;,</span><br><span class="line">            &quot;&quot;,</span><br><span class="line">            &quot;color:#3366ff&quot;,</span><br><span class="line">            &quot;color:#3366ff&quot;,</span><br><span class="line">            &quot;&quot;,</span><br><span class="line">            &quot;color:#3366ff&quot;,</span><br><span class="line">            &quot;&quot;</span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">createtime1();</span><br><span class="line">// 重写console方法</span><br><span class="line">console.log = function () &#123; &#125;;</span><br><span class="line">console.error = function () &#123; &#125;;</span><br><span class="line">console.warn = function () &#123; &#125;;</span><br></pre></td></tr></table></figure></li><li><p><code>F12</code>控制台处可看到效果。</p></li></ol><h1 id="文章顶部添加波浪效果"><a href="#文章顶部添加波浪效果" class="headerlink" title="文章顶部添加波浪效果"></a>文章顶部添加波浪效果</h1><p>来源：<a href="https://anzhiy.cn/posts/98c4.html">butterfly文章顶部添加波浪效果</a></p><ol><li><p>打开<code>/themes/butterfly/layout/includes/header/index.pug</code>文件。</p><p>找到<code>35</code>行<code>include ./post-info.pug</code>，在其下添加下述代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">if is_post() #原有</span><br><span class="line">     include ./post-info.pug #原有</span><br><span class="line">     section.main-hero-waves-area.waves-area</span><br><span class="line">       svg.waves-svg(xmlns=&#x27;http://www.w3.org/2000/svg&#x27;, xlink=&#x27;http://www.w3.org/1999/xlink&#x27;, viewBox=&#x27;0 24 150 28&#x27;, preserveAspectRatio=&#x27;none&#x27;, shape-rendering=&#x27;auto&#x27;)</span><br><span class="line">         defs</span><br><span class="line">           path#gentle-wave(d=&#x27;M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z&#x27;)</span><br><span class="line">         g.parallax</span><br><span class="line">           use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;0&#x27;)</span><br><span class="line">           use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;3&#x27;)</span><br><span class="line">           use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;5&#x27;)</span><br><span class="line">           use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;7&#x27;)</span><br><span class="line">   else if is_home()  #原有</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/css/custom.css</code>中添加。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 波浪css */</span></span><br><span class="line"><span class="selector-class">.main-hero-waves-area</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">11px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.waves-area</span> <span class="selector-class">.waves-svg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Animation */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; use &#123;</span><br><span class="line">  <span class="attribute">animation</span>: move-forever <span class="number">25s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.55</span>, <span class="number">0.5</span>, <span class="number">0.45</span>, <span class="number">0.5</span>) infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">7s</span>;</span><br><span class="line">  fill: <span class="number">#f7f9febd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">10s</span>;</span><br><span class="line">  fill: <span class="number">#f7f9fe82</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">4s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">13s</span>;</span><br><span class="line">  fill: <span class="number">#f7f9fe36</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">5s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">20s</span>;</span><br><span class="line">  fill: <span class="number">#f7f9fe</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 黑色模式背景 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">7s</span>;</span><br><span class="line">  fill: <span class="number">#18171dc8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">10s</span>;</span><br><span class="line">  fill: <span class="number">#18171d80</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">4s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">13s</span>;</span><br><span class="line">  fill: <span class="number">#18171d3e</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">5s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">20s</span>;</span><br><span class="line">  fill: <span class="number">#18171d</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> move-forever &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-<span class="number">90px</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">85px</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*Shrinking for mobile*/</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.waves-area</span> <span class="selector-class">.waves-svg</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">40px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 建站攻略 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> 备忘录 </tag>
            
            <tag> butterfly </tag>
            
            <tag> 自定义 </tag>
            
            <tag> 博客魔改 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>butterfly主题front-matter设置说明</title>
      <link href="/2023/01/16/butterfly%E4%B8%BB%E9%A2%98front-matter%E8%AE%BE%E7%BD%AE%E8%AF%B4%E6%98%8E/"/>
      <url>/2023/01/16/butterfly%E4%B8%BB%E9%A2%98front-matter%E8%AE%BE%E7%BD%AE%E8%AF%B4%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<p><code>Front-matter</code> 是 markdown 文件最上方以 <code>---</code> 分隔的区域，用于文件最基本的配置。<br>其中：</p><ul><li><code>page Front-matter</code> 用于页面配置。</li><li><code>Post Front-matter</code> 用于文章页配置。</li></ul><h2 id="1-Post-Front-matter"><a href="#1-Post-Front-matter" class="headerlink" title="1. Post Front-matter"></a>1. Post Front-matter</h2><table><thead><tr><th align="center">参数</th><th align="center">说明</th><th align="center">备注</th></tr></thead><tbody><tr><td align="center"><code>title</code></td><td align="center">[必需]文章标题</td><td align="center"></td></tr><tr><td align="center"><code>date</code></td><td align="center">[必需]文章创建日期</td><td align="center"></td></tr><tr><td align="center"><code>updated</code></td><td align="center">[可选]文章更新日期</td><td align="center"></td></tr><tr><td align="center"><code>tags</code></td><td align="center">[可选]文章标签</td><td align="center">注3.1</td></tr><tr><td align="center"><code>categories</code></td><td align="center">[可选]文章分类</td><td align="center">注3.1</td></tr><tr><td align="center"><code>keywords</code></td><td align="center">[可选]文章关键字</td><td align="center"></td></tr><tr><td align="center"><code>description</code></td><td align="center">[可选]文章描述</td><td align="center">注3.3</td></tr><tr><td align="center"><code>top_img</code></td><td align="center">[可选]文章顶部图片</td><td align="center">注3.4</td></tr><tr><td align="center"><code>comments</code></td><td align="center">[可选]显示文章页面评论模块(默认 <code>true</code>)</td><td align="center"></td></tr><tr><td align="center"><code>cover</code></td><td align="center">[可选]文章缩略图</td><td align="center">注3.4</td></tr><tr><td align="center"><code>toc</code></td><td align="center">[可选]显示文章<code>TOC</code></td><td align="center">注3.7</td></tr><tr><td align="center"><code>toc_number</code></td><td align="center">[可选]显示<code>toc_number</code></td><td align="center">注3.7</td></tr><tr><td align="center"><code>toc_style_simple</code></td><td align="center">[可选]显示 <code>toc</code> 简洁模式</td><td align="center">注3.7</td></tr><tr><td align="center"><code>copyright</code></td><td align="center">[可选]显示文章版权模块</td><td align="center">注3.6</td></tr><tr><td align="center"><code>copyright_author</code></td><td align="center">[可选]文章版权模块的文章作者</td><td align="center">注3.6</td></tr><tr><td align="center"><code>copyright_author_href</code></td><td align="center">[可选]文章版权模块的文章作者链接</td><td align="center">注3.6</td></tr><tr><td align="center"><code>copyright_url</code></td><td align="center">[可选]文章版权模块的文章连结链接</td><td align="center">注3.6</td></tr><tr><td align="center"><code>copyright_info</code></td><td align="center">[可选]文章版权模块的版权声明文字</td><td align="center">注3.6</td></tr><tr><td align="center"><code>mathjax</code></td><td align="center">[可选]显示<code>mathjax</code></td><td align="center">注3.8</td></tr><tr><td align="center"><code>katex</code></td><td align="center">[可选]显示<code>katex</code></td><td align="center">注3.8</td></tr><tr><td align="center"><code>aplayer</code></td><td align="center">[可选]在需要的页面加载<code>aplayer</code>的<code>js</code>和<code>css</code></td><td align="center">注3.9</td></tr><tr><td align="center"><code>highlight_shrink</code></td><td align="center">[可选]配置代码框是否展开(<code>true/false</code>)</td><td align="center">注3.2</td></tr><tr><td align="center"><code>aside</code></td><td align="center">[可选]显示侧边栏 (默认 <code>true</code>)</td><td align="center"></td></tr><tr><td align="center"><code>sticky</code></td><td align="center">[可选]是否置顶</td><td align="center">注3.5</td></tr></tbody></table><h2 id="2-page-Front-matter"><a href="#2-page-Front-matter" class="headerlink" title="2. page Front-matter"></a>2. page Front-matter</h2><table><thead><tr><th align="center">参数</th><th align="center">说明</th><th align="center">备注</th></tr></thead><tbody><tr><td align="center"><code>title</code></td><td align="center">[必需]页面标题</td><td align="center"></td></tr><tr><td align="center"><code>date</code></td><td align="center">[必需]页面创建日期</td><td align="center"></td></tr><tr><td align="center"><code>updated</code></td><td align="center">[可选]页面更新日期</td><td align="center"></td></tr><tr><td align="center"><code>type</code></td><td align="center">[必需]标签、分类和友情链接三个页面需要配置</td><td align="center"></td></tr><tr><td align="center"><code>comments</code></td><td align="center">[可选]显示页面评论模块(默认 <code>true</code>)</td><td align="center"></td></tr><tr><td align="center"><code>description</code></td><td align="center">[可选]页面描述</td><td align="center">注3.3</td></tr><tr><td align="center"><code>keywords</code></td><td align="center">[可选]页面关键字</td><td align="center"></td></tr><tr><td align="center"><code>top_img</code></td><td align="center">[可选]页面顶部图片</td><td align="center">注3.4</td></tr><tr><td align="center"><code>mathjax</code></td><td align="center">[可选]显示<code>mathjax</code></td><td align="center">注3.8</td></tr><tr><td align="center"><code>katex</code></td><td align="center">[可选]显示<code>katex</code></td><td align="center">注3.8</td></tr><tr><td align="center"><code>aside</code></td><td align="center">[可选]显示侧边栏 (默认 <code>true</code>)</td><td align="center"></td></tr><tr><td align="center"><code>aplayer</code></td><td align="center">[可选]在需要的页面加载<code>aplayer</code>的<code>js</code>和<code>css</code></td><td align="center">注3.9</td></tr><tr><td align="center"><code>highlight_shrink</code></td><td align="center">[可选]配置代码框是否展开(<code>true/false</code>)(默认为设置中<code>highlight_shrink</code>的配置)</td><td align="center">注3.2</td></tr></tbody></table><h2 id="3-部分参数用法"><a href="#3-部分参数用法" class="headerlink" title="3.部分参数用法"></a>3.部分参数用法</h2><h3 id="3-1-tags-、categories用法"><a href="#3-1-tags-、categories用法" class="headerlink" title="3.1 tags 、categories用法"></a>3.1 tags 、categories用法</h3><p>标记都是在同一层次结构级别上定义的，因此它们的显示顺序并不重要。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tags:</span><br><span class="line">    - 标签1</span><br><span class="line">    - 标签2</span><br></pre></td></tr></table></figure><p>分类是有层级的，因此，在设置分类时应特别注意。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">    - 分类1</span><br><span class="line">    - 分类1下的二级分类1</span><br><span class="line">    - 二级分类1下的三级分类1</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">    - [母分类1，子分类1，子子分类1......]</span><br><span class="line">    - [母分类1，子分类2......]</span><br><span class="line">    - [母分类2，子分类3......]</span><br></pre></td></tr></table></figure><h3 id="3-2-highlight-shrink用法"><a href="#3-2-highlight-shrink用法" class="headerlink" title="3.2 highlight_shrink用法"></a>3.2 highlight_shrink用法</h3><ul><li>当主题配置文件中的 <code>highlight_shrink</code> 设为<code>true</code>时，可在<code>front-matter</code>添加<code>highlight_shrink: false</code>来单独配置文章展开代码框。</li><li>当主题配置文件中的 <code>highlight_shrink</code> 设为<code>false</code>时，可在<code>front-matter</code>添加<code>highlight_shrink: true</code>来单独配置文章收缩代码框。</li><li>总而言之，默认为主题设置中<code>highlight_shrink</code>的配置，但可以在<code>Front-matter</code>配置，这里权限更高。</li></ul><h3 id="3-3-description用法"><a href="#3-3-description用法" class="headerlink" title="3.3 description用法"></a>3.3 description用法</h3><ul><li>对于<code>post</code>：用于主页文章下面的一段描述，本网站选择的是，如果写了<code>description</code>，主页文章描述就是这个，如果没写，就自动节选。</li><li>对于<code>page</code>：描述页面。</li></ul><h3 id="3-4-top-img-、cover用法"><a href="#3-4-top-img-、cover用法" class="headerlink" title="3.4 top_img 、cover用法"></a>3.4 top_img 、cover用法</h3><p><code>page</code>页面顶部图的获取顺序：</p><ul><li>各自配置的 <code>top_img</code> &gt; 配置文件的 <code>default_top_img</code>。</li></ul><p><code>post</code>文章页顶部图的获取顺序：</p><ul><li>各自配置的 <code>top_img</code> &gt; <code>cover</code> &gt; 配置文件的 <code>default_top_img</code>。</li><li>如果没有设置<code>top_img</code>,文章页顶部将显示缩略图，可设<code>top_img``cover</code>为<code>false/图片地址/留空</code>。<br>另外，<code>cove</code>为文章封面，就是主页文章旁边显示的那张图片，与文章内的顶部图还是有区别的。</li><li>文章封面的获取顺序 <code>Front-matter</code> 的 <code>cover</code> &gt; 配置文件的 <code>default_cover</code> &gt; <code>false</code>。</li></ul><h3 id="3-5-sticky用法"><a href="#3-5-sticky用法" class="headerlink" title="3.5 sticky用法"></a>3.5 sticky用法</h3><p>文章置顶功能。可以直接在文章的<code>front-matter</code>区域里添加<code>sticky: 1</code>属性来把这篇文章置顶。数值越大，置顶的优先级越大。</p><h3 id="3-6-文章版权相关Front-matter用法"><a href="#3-6-文章版权相关Front-matter用法" class="headerlink" title="3.6 文章版权相关Front-matter用法"></a>3.6 文章版权相关Front-matter用法</h3><p>文章版权信息默认为主题设置中<code>post_copyright</code>的<code>enable</code>配置，但也可以在这里设置，此处优先级更高。</p><ul><li>如果有文章（例如：转载文章）不需要显示版权，可以在文章<code>Front-matter</code>处单独设置<code>copyright: false</code>。</li><li>如果需要对单独文章设置版权信息，可以应在文章<code>Front-matter</code>处单独设置。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">copyright_author: xxxx</span><br><span class="line">copyright_author_href: https://xxxxxx.com</span><br><span class="line">copyright_url: https://xxxxxx.com</span><br><span class="line">copyright_info: 此文章版权归xxxxx所有，如有转载，请注明来自原作者</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-7-目录相关Front-matter用法"><a href="#3-7-目录相关Front-matter用法" class="headerlink" title="3.7 目录相关Front-matter用法"></a>3.7 目录相关Front-matter用法</h3><p>一般来说，<code>toc</code>默认为主题设置中<code>toc</code>的<code>enable</code>配置，<code>toc_number</code>默认为主题设置中<code>toc</code>的<code>number</code>配置，<code>toc_style_simple</code>也是如此。<br>但也可以在文章md文件的头部加入<code>toc_number</code>和<code>toc</code>，并配置<code>true</code>或者<code>false</code>即可。主题会优先判断文章Markdown的<code>Front-matter</code>是否有配置，如有，则以<code>Front-matter</code>的配置为准。否则，以主题配置文件中的配置为准。</p><ul><li><code>toc</code>是否在文章页显示目录<code>true/false</code>。</li><li><code>toc_number</code>是否显示章节数<code>true/false</code>。</li><li><code>toc_style_simple</code>是否开启简介模式（侧边栏只显示<code>toc</code>，只对文章页有效）<code>true/false</code>。</li></ul><h3 id="3-8-mathjax-KaTex用法"><a href="#3-8-mathjax-KaTex用法" class="headerlink" title="3.8 mathjax KaTex用法"></a>3.8 mathjax KaTex用法</h3><ul><li>当设置<code>mathjax</code>的<code>per_page: false</code>时，才需要配置，默认 <code>false</code>。</li><li>当设置<code>katex</code>的<code>per_page: false</code>时，才需要配置，默认 <code>false</code>。</li><li>本博客暂未配置<code>mathjax</code>和<code>katex</code>，因此没用。</li></ul><h3 id="3-9-aplayer用法"><a href="#3-9-aplayer用法" class="headerlink" title="3.9 aplayer用法"></a>3.9 aplayer用法</h3><p>主要为是否在该页面开启音乐等全局吸底，不想就开输入<code>false</code>，本博客没有配置，没用。</p>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 建站攻略 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> butterfly </tag>
            
            <tag> 说明 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>人工湿地技术处理高盐工业废水的研究及应用综述</title>
      <link href="/2023/01/16/%E4%BA%BA%E5%B7%A5%E6%B9%BF%E5%9C%B0%E6%8A%80%E6%9C%AF%E5%A4%84%E7%90%86%E9%AB%98%E7%9B%90%E5%B7%A5%E4%B8%9A%E5%BA%9F%E6%B0%B4%E7%9A%84%E7%A0%94%E7%A9%B6%E5%8F%8A%E5%BA%94%E7%94%A8%E7%BB%BC%E8%BF%B0/"/>
      <url>/2023/01/16/%E4%BA%BA%E5%B7%A5%E6%B9%BF%E5%9C%B0%E6%8A%80%E6%9C%AF%E5%A4%84%E7%90%86%E9%AB%98%E7%9B%90%E5%B7%A5%E4%B8%9A%E5%BA%9F%E6%B0%B4%E7%9A%84%E7%A0%94%E7%A9%B6%E5%8F%8A%E5%BA%94%E7%94%A8%E7%BB%BC%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="人工湿地技术处理高盐工业废水的研究及应用综述"><a href="#人工湿地技术处理高盐工业废水的研究及应用综述" class="headerlink" title="人工湿地技术处理高盐工业废水的研究及应用综述"></a>人工湿地技术处理高盐工业废水的研究及应用综述</h1><p><strong>摘要:</strong> 在工业生产过程中，会产生大量的高盐废水。这些高盐废水未经处理直接排放将会严重影响生态系统乃至危害人体健康。因此，世界各国普遍重视高盐工业废水技术的研发。本文在《环境工程技术进展》所学知识的基础上，进一步阅读有关文献，简要地综述了人工湿地技术在高盐工业废水处理中的研究与应用。<br><strong>关键词:</strong> 人工湿地；高盐工业废水；耐盐植物；环境工程；废水治理</p><h3 id="A-review-of-research-and-application-of-constructed-wetland-technology-to-treat-high-salt-industrial-wastewater"><a href="#A-review-of-research-and-application-of-constructed-wetland-technology-to-treat-high-salt-industrial-wastewater" class="headerlink" title="A review of research and application of constructed wetland technology to treat high-salt industrial wastewater"></a>A review of research and application of constructed wetland technology to treat high-salt industrial wastewater</h3><p><strong>Abstract:</strong> In the process of industrial production, a large amount of high-salt wastewater will be generated. The direct discharge of these high-salt wastewater without treatment will seriously affect the ecosystem and even endanger human health. Therefore, countries around the world generally attach great importance to the research and development of high-salt industrial wastewater technology. On the basis of the knowledge learned in “Advances in Environmental Engineering Technology”, this paper further reads the relevant literature, and briefly reviews the research and application of constructed wetland technology in the treatment of high-salt industrial wastewater.<br><strong>Keywords:</strong> constructed wetland;  high-salt industrial wastewater;  salt-tolerant plants;<br>environmental engineering;  wastewater treatment</p><p>高盐废水是指总含盐质量分数大于或等于1%的废水。在工业生产领域，其来源十分广泛。在化工、制药、石油、造纸等行业[1]都会产生大量的高盐废水。这些废水如果未经处理直接排放，将会对生态环境造成严重的威胁。因此，世界各国普遍重视高盐工业废水的治理。目前，高盐工业废水主要通过物理化学法、生物法或者物理化学-生物组合法来进行治理[2]。这些技术大多成本较高，需要消耗大量的能源，部分企业可能负担不起高盐工业废水的治理费用。市场对廉价的高盐工业废水处理工艺的需求日益旺盛。<br>人工湿地作为一项常用的污水处理技术，已经在生活污水、农业废水的处理过程中得到了广泛应用。由于人工湿地在处理污水时集物理、化学、生物过程于一体，运行稳定、操作方便、生态友好，且建设费用和运营费用相对较低[3]，因此，近年来已有不少研究开始探讨人工湿地在高盐工业废水领域的作用。<br>本文在综述人工湿地处理高盐工业废水的主要原理的基础上，进一步介绍了高盐工业废水对人工湿地系统的负面影响以及现阶段该领域的研究方向，以期为今后的学习以及知识储备打下良好的基础。</p><h2 id="1-高盐工业废水的特点及危害"><a href="#1-高盐工业废水的特点及危害" class="headerlink" title="1 高盐工业废水的特点及危害"></a>1 高盐工业废水的特点及危害</h2><p>由于高盐工业废水的来源十分广泛，因此，不同行业所产生排放的高盐工业废水的组成和浓度也会有所不同。例如，制革废水作为一种典型的高盐工业废水，其BOD浓度为2982-4886mg&#x2F;L，总铬为12-133mg&#x2F;L,硫化物为55-630mg&#x2F;L，硫酸盐为502-800mg&#x2F;L，总氮为245-1330mg&#x2F;L，氨氮为122-127mg&#x2F;L，盐度为7.1%-15%NaCl，同时根据工艺的不同一些制革废水还含有一些特定的有机物及其他有毒污染物[4]。<br>根据有关文献归纳[5,6]，高盐废水一般都具有以下特点：1）总固体含量（TDS）大于3.5%；2）有机污染物以苯、苯酚、含氮杂环化合物、多环芳烃等难降解有机污染物为主；3）无机污染物主要为钾离子、钠离子、钙离子、镁离子、氯离子、硫酸根等，其中，氯离子、钠离子、硫酸根离子含量占无机离子总量的90%以上。<br>高盐工业废水未经处理直接排放产生的危害主要表现在以下4个方面[3,7]：1）引起地表水或土壤盐度分布变化，影响水生生物和动植物的正常生长、繁殖，进而对陆地、水体生态系统造成负面影响；2）高浓度氮、磷等无机盐会引起“赤潮”现象发生；3）污染物质可能随食物链进入动植物体内，会导致代谢紊乱，甚至死亡，同时危害人体健康；4）对住房建筑、工业设备产生负面的影响。</p><h2 id="2-人工湿地处理高盐工业废水的主要原理"><a href="#2-人工湿地处理高盐工业废水的主要原理" class="headerlink" title="2 人工湿地处理高盐工业废水的主要原理"></a>2 人工湿地处理高盐工业废水的主要原理</h2><p>人工湿地的分类方式多种多样。根据水流的特性，人工湿地主要分为表面流人工湿地、水平潜流人工湿地、垂直潜流人工湿地。虽然，不同类型的人工湿地结构有所不同，但它们大致都是由植物、微生物、基质共同组成。在高盐工业废水的处理过程中，人工湿地在植物、微生物、基质以及其他因素的共同影响下通过一系列的物理、化学、生物协同作用来处理高盐工业废水中的污染物质。</p><h3 id="2-1-植物的作用"><a href="#2-1-植物的作用" class="headerlink" title="2.1 植物的作用"></a>2.1 植物的作用</h3><p>植物是人工湿地的重要组成部分，在人工湿地处理高盐工业废水时起着不可忽视的作用。首先，在处理高盐工业废水时，植物可以直接吸收废水中的污染物物质，将其作为植物自身生长、繁殖的营养元素。其次，湿地中的植物可以将大气中的氧气通过叶和茎运输到根部，为根系中好氧和兼性好氧微生物提供良好的生存环境。再次，湿地植物还可以为微生物提供附着点，并在根部分泌化学物质作为微生物反应的催化剂，间接影响微生物去除污染物，保证人工湿地结构和功能的完整。最后，植物死后可留下相互连接的孔道和有机物，促使更多地微生物附着，为湿地系统提供优质的营养物质。</p><h3 id="2-2-微生物的作用"><a href="#2-2-微生物的作用" class="headerlink" title="2.2 微生物的作用"></a>2.2 微生物的作用</h3><p>湿地中的微生物在许多污染物的去除过程中起着最主要的作用，其是对污染物进行吸附和降解的主要生物群体和承担者[2]。微生物在湿地基质中与其他动物和植物共生体的相互关系往往也起着核心作用[3]。微生物的氨化、硝化、反硝化和厌氧氨氧化是废水氮去除的重要途径，有机物的矿化同样也主要是由微生物在厌氧和好氧条件下进行的。<br>此外，人工湿地中微生物的数量在很大程度上可以影响湿地系统的处理效果。相关文献表明[8]，湿地中细菌的数量与有机物的去除有较好的相关性；亚硝酸菌的数量与TN的去除有较好的相关性。</p><h3 id="2-3-基质的作用"><a href="#2-3-基质的作用" class="headerlink" title="2.3 基质的作用"></a>2.3 基质的作用</h3><p>大部分的物理、化学和生物反应都是在基质中进行的。湿地中的基质是去除某些污染物的主要因素之一，其对高盐工业废水的净化机制主要包括过滤、吸附、沉淀、络合、离子交换、植物吸收以及基质中微生物的降解等[9]。例如，通过基质吸附可以去除湿地废水中的磷；通过化学沉淀、吸附、络合、植物吸收和微生物氧化还原反应可以去除和固定高盐工业废水中的重金属；通过物理吸附可以将金属阳离子吸附在基质表面[2]。<br>此外，以土壤、砂、砾石为代表的基质还可以为植物提供物理支持，为各种复杂离子、化学物提供反应界面，为微生物提供附着[10]。</p><h3 id="2-4-其他因素的作用"><a href="#2-4-其他因素的作用" class="headerlink" title="2.4 其他因素的作用"></a>2.4 其他因素的作用</h3><p>在高盐工业废水的处理过程中，除了植物、微生物、基质之外，还有其他因素，例如废水类型、环境温度、湿度、pH值、人工湿地的结构和操作参数等，同样也会影响人工湿地的性能。<br>例如，温度和湿度可以共同影响人工湿地的蒸发速率，并在物理上影响人工湿地的性能。在干旱环境中，由于温度和湿度增强了蒸散作用，此时出水盐浓度可能高于进水[11]。又比如，每种微生物都有自己适宜的pH值。通过调节pH值可以影响人工湿地微生物的活性，从而影响人工湿地的生物反应过程，影响其最终去除污染物的能力。<br>值得注意的是，所有的这些因素都是相互作用和相互联系的。即使一个因素可能对人工湿地产生负效应，也可以通过调节另外几个因素消减该因素对人工湿地的影响。例如，高温增强了蒸散作用，导致盐浓度升高，可以通过降低水力停留时间和改变地下水位深度来消除温度的影响[2]。因此，在人工湿地处理高盐工业废水的过程中，有必要对除植物、微生物、基质之外的这些因素进行综合、全面的考量。</p><h2 id="3-高盐工业废水对人工湿地系统的负面影响"><a href="#3-高盐工业废水对人工湿地系统的负面影响" class="headerlink" title="3 高盐工业废水对人工湿地系统的负面影响"></a>3 高盐工业废水对人工湿地系统的负面影响</h2><p>相较于处理其他类型的工业废水，人工湿地在处理高盐工业废水时，由于该废水具有过高的盐浓度，因此，其还会受到高盐浓度的影响。高盐工业废水对人工湿地系统的负面影响主要为对植物、微生物、基质的影响。</p><h3 id="3-1-对植物的影响"><a href="#3-1-对植物的影响" class="headerlink" title="3.1 对植物的影响"></a>3.1 对植物的影响</h3><p>过高的盐浓度将会严重影响植物的抗性和耐受性。其主要机制如下[2]：1）大多数湿地植物的细胞质不能承受高盐胁迫，过高的盐浓度将会破坏植物细胞渗透压的平衡。2）在高盐胁迫下，抗氧化酶如过氧化氢酶、谷胱甘肽过氧化物酶等为了防止受到伤害，会加速细胞的氧化。3）当植物受到胁迫时，枝条和根部的脱落酸增加，从而抑制细胞生长，减轻盐的抑制作用。</p><h3 id="3-2-对微生物的影响"><a href="#3-2-对微生物的影响" class="headerlink" title="3.2 对微生物的影响"></a>3.2 对微生物的影响</h3><p>微生物对各种污染物的降解作用是人工湿地实现污水净化的最主要途径。过高的盐浓度将会影响微生物对污染物质的去除效率，对微生物起抑制作用。其主要机制如下[2,12]：1）无机离子可以降低非极性或弱极性有机分子的溶解度，微生物食物来源有机物一般都是非极性或弱极性分子。2）溶解的离子会降低气体的溶解度，导致微生物缺氧。3）过高的盐浓度可诱导真核体失水，导致微生物细胞进一步凹陷甚至解体。</p><h3 id="3-3-对基质的影响"><a href="#3-3-对基质的影响" class="headerlink" title="3.3 对基质的影响"></a>3.3 对基质的影响</h3><p>随着高盐工业废水处理过程的不断运行，湿地中的微生物开始飞速繁殖，再加上植物的腐败分解以及基质对污染物质的吸附吸收使得基质开始逐渐趋于饱和[13]。过高的盐浓度会加速基质的饱和。如果人工湿地维护不当，十分容易造成淤积、堵塞的现象。基质如果发生堵塞不仅会影响湿地系统的水力负荷，同时还会影响湿地系统的寿命以及湿地长期运行的稳定性，甚至会使湿地系统丧失功能[13]。</p><h2 id="4-现阶段人工湿地处理高盐工业废水的研究方向"><a href="#4-现阶段人工湿地处理高盐工业废水的研究方向" class="headerlink" title="4 现阶段人工湿地处理高盐工业废水的研究方向"></a>4 现阶段人工湿地处理高盐工业废水的研究方向</h2><p>目前，人工湿地处理高盐工业废水的研究主要集中于耐盐植物的筛选、耐盐微生物的使用、基质的优化以及人工湿地与其他技术的组合。</p><h3 id="4-1-耐盐植物的筛选"><a href="#4-1-耐盐植物的筛选" class="headerlink" title="4.1 耐盐植物的筛选"></a>4.1 耐盐植物的筛选</h3><p>耐盐植物由于具有更适应高盐浓度的特性，因此其处理高盐工业废水时具有很高的应用价值。在处理废水时，有植物的人工湿地处理效果比没有植物的人工湿地好，适应的耐盐植物也更有利于废水中污染物质的净化。<br>研究表明[14]，当人工湿地进水氯离子浓度在1000~3000mg&#x2F;L范围内时，芦苇、睡莲、狭叶香蒲、宽叶香蒲和水葱这5种人工湿地植物可以正常生长，且芦苇、睡莲和狭叶香蒲这3种植物对COD和BOD的净化效果相对较好。</p><h3 id="4-2-耐盐微生物的使用"><a href="#4-2-耐盐微生物的使用" class="headerlink" title="4.2 耐盐微生物的使用"></a>4.2 耐盐微生物的使用</h3><p>虽然在处理高盐工业废水时，盐的存在抑制了许多微生物的功能，但这也为耐盐微生物大放异彩制造了可能。由于耐盐微生物喜盐，能在含盐或高盐环境中繁荣生长。如果耐盐微生物能够处理废水中的污染物质，那么在一定程度上可以缓解高盐浓度对常规微生物的负面影响。如今，许多耐盐微生物已被发现可以用于污水处理。据报道[15]，活性污泥在好氧系统中,经过2个月的驯化,逐步适应了高盐环境，形成了以耐盐细菌为优势菌种的微生物群体后，当盐的质量浓度在8g&#x2F;L范围内时,该活性污泥处理实际含盐废水COD去除率达到70%以上。</p><h3 id="4-3-基质的优化"><a href="#4-3-基质的优化" class="headerlink" title="4.3 基质的优化"></a>4.3 基质的优化</h3><p>对于某些污染物质的去除，人工湿地的基质起着至关重要的作用。优化基质可以提高人工湿地对某些污染物质的去除效率。例如，据报道[16]，在处理含磷酸盐和金属的复杂盐水时，往人工湿地中投加工业废物例如炉渣、钢渣等，可以有效提升基质的吸附效率。<br>此外，无论是含盐废水处理还是非含盐废水处理，人工湿地基质堵塞问题是不可避免的。在缓解基质堵塞问题时，应该注意吸附和堵塞的可逆性，而不是简单地关注污染物质的去除。目前，缓解基质堵塞问题的策略有砂砾清洗、化学处理等[17]。</p><h3 id="4-4-人工湿地与其他技术的组合"><a href="#4-4-人工湿地与其他技术的组合" class="headerlink" title="4.4 人工湿地与其他技术的组合"></a>4.4 人工湿地与其他技术的组合</h3><p>人工湿地与其他技术组合可以有效结合多种处理工艺的优点，避免人工湿地处理系统现阶段的一些不足，提高人工湿地对高盐工业废水污染物的去除效率。例如，铁碳微电解耦合人工湿地如果用于处理高盐工业废水，那么高盐工业废水中的高浓度的阴阳离子可以加快离子迁移速度，使高盐工业废水具有良好的导电性，降低耦合系统的内阻，有利于产电[18]，因此，根据“产电所主导的污染物强化去除在一定浓度范围内往往与产电呈正比例关系[19]”这一现象，高盐浓度在一定程度上可以提高产电量，进而促进污染物的去除。</p><h2 id="5-总结"><a href="#5-总结" class="headerlink" title="5 总结"></a>5 总结</h2><p>人工湿地作为一种经济环保的污水处理系统，在植物、微生物、基质以及其他因素的共同影响下通过一系列的物理、化学、生物协同作用可以有效去除高盐工业废水中的污染物质，具有广阔的应用前景。然而，由于人工湿地高盐工业废水处理还处于起步阶段，其相关机理尚未完全探明，高盐浓度带来的负面影响也尚未完全解决，需要进一步探索。</p><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[1]李凤娟,徐菲,李小龙,李琦,曹保久.高盐度废水处理技术研究进展[J].环境科学与管理,2014,39(02):72-75.</span><br><span class="line">[2]Liang Y, Zhu H, Banuelos G, et al. Constructed wetlands for saline wastewater treatment: A review[J/OL]. Ecological Engineering, 2017, 98: 275-285.</span><br><span class="line">[3]黄铭意,许丹,李寻,李朝明,李泽兵,邵辉良,马天仪,崔文鑫.人工湿地处理高盐废水研究进展[J].工业水处理,2021,41(03):10-16.</span><br><span class="line">[4]Alemu T, Lemma E, Mekonnen A, et al. Performance of pilot scale anaerobic-SBR system integrated with constructed wetlands for the treatment of tannery wastewater[J]. Environmental Processes, 2016, 3(4): 815-827.</span><br><span class="line">[5]朱秋楠.煤化工高盐废水分质提盐基础与结晶工艺研究[D].宁夏大学,2019.</span><br><span class="line">[6]马旭东,李辉,吴锋,朱绘美,王志浩.高盐废水对Ca(OH)2激发煤气化炉渣基胶凝材料力学性能的影响机理[J].材料科学与工程学报,2022,40(01):83-87+147.</span><br><span class="line">[7]邱立萍,张晓凤.高盐废水处理技术研究及应用进展[J/OL].无机盐工业,2022:1-17.</span><br><span class="line">[8]付融冰,杨海真,顾国维,张政.人工湿地基质微生物状况与净化效果相关分析[J].环境科学研究,2005(06):46-51.</span><br><span class="line">[9]Wang Yanting, Cai Zhengqin, Sheng Sheng, et al. Comprehensive evaluation of substrate materials for contaminants removal in constructed wetlands[J]. Science of The Total Environment, 2020, 701: 134736.</span><br><span class="line">[10]白晓慧,王宝贞,余敏,聂梅生.人工湿地污水处理技术及其发展应用[J].哈尔滨建筑大学学报,1999(06):88-92.</span><br><span class="line">[11]Freedman A, Gross A, Shelef O, et al. Salt uptake and evapotranspiration under arid conditions in horizontal subsurface flow constructed wetland planted with halophytes[J]. Ecological Engineering, 2014, 70: 282-286.</span><br><span class="line">[12]Aloui F, Khoufi S, Loukil S, Sayadi S. Performances of an activated sludge process for the treatment of fish processing saline wastewater[J]. Desalination, 2009, 246(3): 389-396.</span><br><span class="line">[13]黄锦楼,陈琴,许连煌.人工湿地在应用中存在的问题及解决措施[J].环境科学,2013,34(01):401-408.</span><br><span class="line">[14]王琴,张海涛, Jean-PierreArcangeli,瞿贤,王晓青,王乔,李国华,方方,王毓明,李鹏.高盐工业废水人工湿地处理中植物的筛选[J].环境工程学报,2012,6(01):226-231.</span><br><span class="line">[15]余宗学,严学亿,安立超.耐盐微生物的培养与高含盐废水处理的研究[J].工业安全与环保,2008(12):20-22.</span><br><span class="line">[16]Haynes, R.J. Use of industrial wastes as media in constructed wetlands and filter beds-prospects for removal of phosphate and metals from wastewater streams[J]. Critical Reviews in Environmental Control, 2015, 45(10): 1041-1103.</span><br><span class="line">[17]Nivala J, Knowles P, Dotro G, et al. Clogging in subsurface-flow treatment wetlands: measurement,modeling and management[J]. Water Research, 2012, 46(6): 1625-1640.</span><br><span class="line">[18]Grattieri M, Minteer D. Microbial fuel cells in saline and hypersaline environments: Advancements, challenges and future perspectives[J]. Bioelectrochemistry, 2018, 120: 127-137.</span><br><span class="line">[19]Zhen He, Minteer S, Angenent L. Electricity generation from artificial wastewater using an upflow microbial fuel cell[J]. Environmental Science&amp;Technology, 2005, 39(14): 5262-5267.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 专业进阶 </category>
          
          <category> 课程论文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境工程 </tag>
            
            <tag> 水处理 </tag>
            
            <tag> 人工湿地 </tag>
            
            <tag> 综述 </tag>
            
            <tag> 高盐工业废水 </tag>
            
            <tag> 耐盐植物 </tag>
            
            <tag> 废水治理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo常用指令及说明</title>
      <link href="/2023/01/14/hexo%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E5%8F%8A%E8%AF%B4%E6%98%8E/"/>
      <url>/2023/01/14/hexo%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E5%8F%8A%E8%AF%B4%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<h1 id="1-创建新文章"><a href="#1-创建新文章" class="headerlink" title="1. 创建新文章"></a>1. 创建新文章</h1><p><code>hexo new &quot;title&quot;</code><br><code>hexo n &quot;title&quot;</code><br><code>hexo new post &quot;title&quot;</code></p><h1 id="2-创建新页面"><a href="#2-创建新页面" class="headerlink" title="2. 创建新页面"></a>2. 创建新页面</h1><p><code>hexo new page &quot;title&quot;</code></p><h1 id="3-清除缓存"><a href="#3-清除缓存" class="headerlink" title="3. 清除缓存"></a>3. 清除缓存</h1><p><code>hexo clean</code>执行此指令后清除缓存，会删除站点根目录下的<code>public</code>文件夹。</p><h1 id="4-生成静态网页"><a href="#4-生成静态网页" class="headerlink" title="4. 生成静态网页"></a>4. 生成静态网页</h1><p><code>hexo g</code> <code>hexo generate</code>执行指令后会在站点根目录下生成<code>public</code>文件夹，hexo会将<code>source</code>文件夹里的.md文件编译为.html文件，存放在<code>public</code>文件夹里。</p><h1 id="5-本地启动服务"><a href="#5-本地启动服务" class="headerlink" title="5. 本地启动服务"></a>5. 本地启动服务</h1><p><code>hexo s</code> <code>hexo server</code>除站点及主题配置文件外，hexo会启动服务预览并自动更新，无需重启服务器，直接网页功能即可生效。默认地址<a href="http://localhost:4000/">http://localhost:4000/</a><br><code>hexo server -s</code>以静态模式启动。</p><h1 id="6-部署服务器"><a href="#6-部署服务器" class="headerlink" title="6. 部署服务器"></a>6. 部署服务器</h1><p><code>hexo d</code> <code>hexo deploy</code>将本地数据部署到github。</p><h1 id="7-amp-amp-的使用"><a href="#7-amp-amp-的使用" class="headerlink" title="7. &amp;&amp;的使用"></a>7. &amp;&amp;的使用</h1><p><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s --debug</code> hexo将会依次执行<code>hexo clean``hexo g``hexo s --debug</code>指令，可以随意组合，只要hexo执行后不报错。</p><h1 id="8-本地站点根目录文件夹说明"><a href="#8-本地站点根目录文件夹说明" class="headerlink" title="8. 本地站点根目录文件夹说明"></a>8. 本地站点根目录文件夹说明</h1><p><code>_config.yml</code>网站的配置信息，可以在此配置大部分的参数。<br><code>package.json</code>应用程序信息，以及需要安装的模块信息。<br><code>scaffolds</code>模板文件夹，新建文章时，hexo会根据<code>scaffolds</code>中的模板文件夹新建文件。例如，如果修改<code>scaffold/post.md</code>中的<code>Front-matter</code>内容，那么每次新建一篇文章时都会包含这个修改。<br><code>source</code>资源文件夹，存放用户资源的地方，如markdown文章，当执行<code>hexo g</code>指令后，除 <code>_posts</code>文件夹之外，开头命名为<code> _</code>(下划线)的文件及文件夹和隐藏的文件将会被忽略。Markdown和Html文件会被解析并放到<code> public</code>文件夹，而其他文件会被拷贝过去。<br><code>themes</code>主题文件夹，Hexo会根据主题来生成静态页面。<br><code>_config.[theme].yml</code>主题配置文件，为用户自己创建。以butterfly主题的<code>_config.butterfly.yml</code>为例，当用户将主题目录（<code>/themes/butterfly</code>）的<code>_config.yml</code>内容复制到<code>_config.butterfly.yml</code>后(注意:复制的是主题的<code>_config.yml</code>，而不是hexo根目录的<code>_config.yml</code>，且不用删除hexo根目录的<code>_config.yml</code>)，以后只需要在<code>_config.butterfly.yml</code>进行配置就行，如果使用了<code>_config.butterfly.yml</code>，配置主题的<code>_config.yml</code>将不会有效果。这将不用担心如果更新主题需要重新配置该主题文件。</p>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 常用指令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> 备忘录 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
