<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>nginx配置文件</title>
      <link href="/2023/02/16/nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
      <url>/2023/02/16/nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<blockquote><p>nginx是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP&#x2F;POP3&#x2F;SMTP服务，其特点是占用内存少，并发能力强。nginx目前主要用于反向代理、负载均衡、web缓存等。</p></blockquote><h1 id="nginx反向代理"><a href="#nginx反向代理" class="headerlink" title="nginx反向代理"></a>nginx反向代理</h1><p>说到反向代理，就不得不提正向代理。正向代理其实就是通过代理服务器代替用户访问资源并传递内容给用户的过程。例如，一个用户<code>S</code>为了获取服务器<code>A</code>的内容，就通过服务器<code>B</code>向服务器<code>A</code>发送请求，然后服务器B将获得的内容转交给用户<code>S</code>。</p><p>又比如，在境内的我们由于无法访问谷歌，因此，我们可以设置一个境外服务器用于正向代理，当我们需要访问谷歌时就向代理服务器发送请求，由代理服务器将我们的请求发送给谷歌，然后返回信息给我们。</p><p>而反向代理，可以理解为一个中转服务器。当用户向服务器发送请求时，其实是将请求发送给了反向代理代理服务器，然后反向代理服务器根据设置的转发策略，转发给实际<code>web</code>资源所在的服务器，之后，反向代理服务器将<code>web</code>服务器返回的信息转发给用户。</p><p><img src="https://img.heyjian.cn/2023021603.jpg" alt="正向代理反向代理示意图"></p><h1 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h1><p>由于反向代理服务器根据设置的负载均衡策略（轮询、加权轮询、<code>ip hash</code>），将用户请求有规则的传递给各<code>web</code>服务器。</p><h1 id="web缓存"><a href="#web缓存" class="headerlink" title="web缓存"></a>web缓存</h1><p><code>nginx</code>可以对不同的文件做不同的缓存处理，配置灵活，并且支持<code>FastCGI_Cache</code>，主要用于对<code>FastCGI</code>的动态程序进行缓存。</p><h1 id="nginx文件结构"><a href="#nginx文件结构" class="headerlink" title="nginx文件结构"></a>nginx文件结构</h1><p>nginx文件结构主要分为以下三块。</p><ul><li>全局块：配置影响<code>nginx</code>全局的指令。一般有运行<code>nginx</code>服务器的用户组，<code>nginx</code>进程<code>pid</code>存放路径，日志存放路径，配置文件引入，允许生成<code>worker process</code>数等。</li><li><code>events</code>块：配置影响<code>nginx</code>服务器或与用户的网络连接。有每个进程的最大连接数，选取哪种事件驱动模型处理连接请求，是否允许同时接受多个网路连接，开启多个网络连接序列化等。</li><li><code>http</code>块：可以嵌套多个<code>server</code>，配置代理，缓存，日志定义等绝大多数功能和第三方模块的配置，是<code>nginx</code>服务器配置中最频繁的部分。</li></ul><p><strong>注意1：</strong><code>http</code>块又可以分为<code>http</code>全局块和<code>server</code>块。</p><ul><li><code>http</code>全局块：包括文件引入、MIME-TYPE 定义、日志自定义、连接超时时间、单链接请求数上限等。</li><li><code>server</code>块：配置虚拟主机的相关参数，一个<code>http</code>中可以有多个<code>server</code>，每个<code>server</code>块相当于一个虚拟主机。</li></ul><p><strong>注意2：</strong> <em>关于<code>server</code>块</em>。</p><ul><li>如果所有的配置全部在<code>nginx.conf</code>中配置，那么内容比较多，不便于管理，因此，一般都会将配置文件拆开，将<code>server</code>块移到其他文件。</li><li><code>http</code>块最后一行指令<code>include /etc/nginx/conf.d/*.conf;</code>就是其实将<code>server</code>块移到<code>conf.d</code>文件夹下，<code>conf.d</code>文件夹下的所有<code>.conf</code>文件都将起作用。</li><li><code>server</code>块不必都在一个<code>.conf</code>文件内，可以依据应用功能放在多个<code>.conf</code>文件内（例如<code>web.conf</code>、<code>picture.conf</code>）。</li><li><code>server</code>块分为<code>server</code>全局块和<code>location</code>块。</li><li><code>server</code>全局块配置本虚拟机主机的监听配置和本虚拟主机的名称或 IP 配置。</li><li><code>location</code>块配置请求的路由，以及各种页面的处理情况。</li></ul><p><code>nginx</code>文件结构如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">...              #全局块</span><br><span class="line"></span><br><span class="line">events &#123;         #events块</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http      #http块</span><br><span class="line">&#123;</span><br><span class="line">    ...   #http全局块</span><br><span class="line">    server        #server块 一般被拆到conf.d文件夹内</span><br><span class="line">    &#123; </span><br><span class="line">        ...       #server全局块</span><br><span class="line">        location [PATTERN]   #location块</span><br><span class="line">        &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">        location [PATTERN] </span><br><span class="line">        &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    server</span><br><span class="line">    &#123;</span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...     #http全局块</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>nginx</code>简要设置图如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">//全局块</span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">//events块</span><br><span class="line">events &#123;</span><br><span class="line">work_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//http块</span><br><span class="line">http &#123;</span><br><span class="line">http配置</span><br><span class="line">upstream 任意起名1&#123;</span><br><span class="line">server 127.0.0.1：8080 weight=1;</span><br><span class="line">server 127.0.0.1：8081 weight=1;</span><br><span class="line">//配置服务器</span><br><span class="line">//负载均衡配置</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">listen 80; // 监听80端口</span><br><span class="line">server_name localhost;</span><br><span class="line">locaton / &#123;</span><br><span class="line">root html;</span><br><span class="line">index index.html index.html;</span><br><span class="line">proxy_pass http://任意起名</span><br><span class="line">//根目录请求到这里</span><br><span class="line">&#125;</span><br><span class="line">//代理</span><br><span class="line">location /admin &#123;</span><br><span class="line">//`/admin`目录请求转到这里</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">listen 443;</span><br><span class="line">server_name localhost;</span><br><span class="line">//代理</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="配置文件结构详解"><a href="#配置文件结构详解" class="headerlink" title="配置文件结构详解"></a>配置文件结构详解</h1><h2 id="全局快"><a href="#全局快" class="headerlink" title="全局快"></a>全局快</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">## 每个指令必须有分号结束。##</span><br><span class="line"># 指定可以运行nginx服务的用户和用户组，只能在全局块配置</span><br><span class="line"># user [user] [group]</span><br><span class="line"># 将user指令注释掉，或者配置成nobody的话所有用户都可以运行</span><br><span class="line"># user nobody nobody;</span><br><span class="line"># user指令在Windows上不生效，如果你制定具体用户和用户组会报小面警告</span><br><span class="line"># nginx: [warn] &quot;user&quot; is not supported, ignored in D:\software\nginx-1.18.0/conf/nginx.conf:2</span><br><span class="line"></span><br><span class="line"># 指定工作线程数，可以制定具体的进程数，也可使用自动模式，这个指令只能在全局块配置</span><br><span class="line"># worker_processes number|auto；</span><br><span class="line"># 列子：指定4个工作线程，这种情况下会生成一个master进程和4个worker进程</span><br><span class="line"># worker_processes 4;</span><br><span class="line"></span><br><span class="line"># 指定pid文件存放的路径，这个指令只能在全局块配置</span><br><span class="line"># pid logs/nginx.pid;</span><br><span class="line"></span><br><span class="line"># 指定错误日志的路径和日志级别，此指令可以在全局块、http块、server块以及location块中配置。(意义：一些重要进程的log可以单拎出来)</span><br><span class="line">#级别依次为：debug&gt;info&gt;notice&gt;warn&gt;error&gt;crit&gt;alert&gt;emerg</span><br><span class="line"># 其中debug级别的日志需要编译时使用--with-debug开启debug开关</span><br><span class="line"># error_log [path] [debug|info|notice|warn|error|crit|alert|emerg] </span><br><span class="line"># error_log  logs/error.log  notice;</span><br><span class="line"># error_log  logs/error.log  info;</span><br></pre></td></tr></table></figure><h2 id="event块"><a href="#event块" class="headerlink" title="event块"></a>event块</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># 当某一时刻只有一个网络连接到来时，多个睡眠进程会被同时叫醒，但只有一个进程可获得连接。如果每次唤醒的进程数目太多，会影响一部分系统性能。在Nginx服务器的多进程下，就有可能出现这样的问题。</span><br><span class="line"># 开启的时候，将会对多个Nginx进程接收连接进行序列化，防止多个进程对连接的争抢</span><br><span class="line"># 默认是开启状态，只能在events块中进行配置</span><br><span class="line"># accept_mutex on|off;</span><br><span class="line"></span><br><span class="line"># 如果multi_accept被禁止了，nginx一个工作进程只能同时接受一个新的连接。否则，一个工作进程可以同时接受所有的新连接。 </span><br><span class="line"># 如果nginx使用kqueue连接方法，那么这条指令会被忽略，因为这个方法会报告在等待被接受的新连接的数量。</span><br><span class="line"># 默认是off状态，只能在event块配置</span><br><span class="line"># multi_accept on|off;</span><br><span class="line"></span><br><span class="line"># 指定使用哪种网络IO模型，method可选择的内容有：select、poll、kqueue、epoll、rtsig、/dev/poll以及eventport，一般操作系统不是支持上面所有模型的。</span><br><span class="line"># 只能在events块中进行配置</span><br><span class="line">#linux建议epoll，FreeBSD建议采用kqueue，window下不指定。</span><br><span class="line">#补充说明:与apache相类，nginx针对不同的操作系统，有不同的事件模型</span><br><span class="line">#A）标准事件模型</span><br><span class="line">#Select、poll属于标准事件模型，如果当前系统不存在更有效的方法，nginx会选择select或poll</span><br><span class="line">#B）高效事件模型</span><br><span class="line">#Kqueue：使用于FreeBSD 4.1+, OpenBSD 2.9+, NetBSD 2.0 和 MacOS X.使用双处理器的MacOS X系统使用kqueue可能会造成内核崩溃。</span><br><span class="line">#Epoll：使用于Linux内核2.6版本及以后的系统。</span><br><span class="line">#/dev/poll：使用于Solaris 7 11/99+，HP/UX 11.22+ (eventport)，IRIX 6.5.15+ 和 Tru64 UNIX 5.1A+。</span><br><span class="line">#Eventport：使用于Solaris 10。 为了防止出现内核崩溃的问题， 有必要安装安全补丁。</span><br><span class="line"># use [method]</span><br><span class="line"># use epoll</span><br><span class="line"></span><br><span class="line"># 设置允许每一个worker process同时开启的最大连接数，当每个工作进程接受的连接数超过这个值时将不再接收连接</span><br><span class="line"># 当所有的工作进程都接收满时，连接进入logback，logback满后连接被拒绝</span><br><span class="line"># 只能在events块中进行配置</span><br><span class="line"># 注意：这个值不能超过超过系统支持打开的最大文件数，也不能超过单个进程支持打开的最大文件数，具体可以参考这篇文章：https://cloud.tencent.com/developer/article/1114773</span><br><span class="line"># worker_connections  1024;</span><br></pre></td></tr></table></figure><h2 id="http全局块"><a href="#http全局块" class="headerlink" title="http全局块"></a>http全局块</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"># 常用的浏览器中，可以显示的内容有HTML、XML、GIF及Flash等种类繁多的文本、媒体等资源，浏览器为区分这些资源，需要使用MIME Type。换言之，MIME Type是网络资源的媒体类型。Nginx服务器作为Web服务器，必须能够识别前端请求的资源类型。</span><br><span class="line"></span><br><span class="line"># include指令，用于包含其他的配置文件，可以放在配置文件的任何地方，但是要注意你包含进来的配置文件一定符合配置规范，比如说你include进来的配置是worker_processes指令的配置，而你将这个指令包含到了http块中，着肯定是不行的，上面已经介绍过worker_processes指令只能在全局块中。</span><br><span class="line"># 下面的指令将mime.types包含进来，mime.types和ngin.cfg同级目录，不同级的话需要指定具体路径</span><br><span class="line"># include  mime.types;</span><br><span class="line"></span><br><span class="line"># 配置默认类型，如果不加此指令，默认值为text/plain。</span><br><span class="line"># 此指令还可以在http块、server块或者location块中进行配置。</span><br><span class="line"># default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line"># access_log配置，此指令可以在http块、server块或者location块中进行设置</span><br><span class="line"># 在全局块中，我们介绍过errer_log指令，其用于配置Nginx进程运行时的日志存放和级别，此处所指的日志与常规的不同，它是指记录Nginx服务器提供服务过程应答前端请求的日志</span><br><span class="line"># access_log path [format [buffer=size]]</span><br><span class="line"># 如果你要关闭access_log,你可以使用下面的命令</span><br><span class="line"># access_log off;</span><br><span class="line"></span><br><span class="line"># log_format指令，用于定义日志格式，此指令只能在http块中进行配置</span><br><span class="line"> #日志格式设定</span><br><span class="line">        #$remote_addr与$http_x_forwarded_for用以记录客户端的ip地址；</span><br><span class="line">        #$remote_user：用来记录客户端用户名称；</span><br><span class="line">        #$time_local： 用来记录访问时间与时区；</span><br><span class="line">        #$request： 用来记录请求的url与http协议；</span><br><span class="line">        #$status： 用来记录请求状态；成功是200，</span><br><span class="line">        #$body_bytes_sent ：记录发送给客户端文件主体内容大小；</span><br><span class="line">        #$http_referer：用来记录从那个页面链接访问过来的；</span><br><span class="line">        #$http_user_agent：记录客户浏览器的相关信息；</span><br><span class="line">        #通常web服务器放在反向代理的后面，这样就不能获取到客户的IP地址了，通过$remote_add拿到的IP地址是反向代理服务器的iP地址。反向代理服务器在转发请求的http头信息中，可以增加x_forwarded_for信息，用以记录原有客户端的IP地址和原来客户端的请求的服务器地址。</span><br><span class="line">        log_format access &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">        &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">        &#x27;&quot;$http_user_agent&quot; $http_x_forwarded_for&#x27;;</span><br><span class="line"># log_format  main &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">#           \       &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">#            \      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line"># 定义了上面的日志格式后，可以以下面的形式使用日志</span><br><span class="line"># access_log  logs/access.log  main;</span><br><span class="line"></span><br><span class="line"># 开启关闭sendfile方式传输文件，可以在http块、server块或者location块中进行配置</span><br><span class="line"># sendfile  on | off;</span><br><span class="line"></span><br><span class="line"># 设置sendfile最大数据量,此指令可以在http块、server块或location块中配置</span><br><span class="line"># sendfile_max_chunk size;</span><br><span class="line"># 其中，size值如果大于0，Nginx进程的每个worker process每次调用sendfile()传输的数据量最大不能超过这个值(这里是128k，所以每次不能超过128k)；如果设置为0，则无限制。默认值为0。</span><br><span class="line"># sendfile_max_chunk 128k;</span><br><span class="line"></span><br><span class="line"># 配置连接超时时间,此指令可以在http块、server块或location块中配置。</span><br><span class="line"># 与用户建立会话连接后，Nginx服务器可以保持这些连接打开一段时间</span><br><span class="line"># timeout，服务器端对连接的保持时间。默认值为75s;header_timeout，可选项，在应答报文头部的Keep-Alive域设置超时时间：“Keep-Alive:timeout= header_timeout”。报文中的这个指令可以被Mozilla或者Konqueror识别。</span><br><span class="line"># keepalive_timeout timeout [header_timeout]</span><br><span class="line"># 下面配置的含义是，在服务器端保持连接的时间设置为120 s，发给用户端的应答报文头部中Keep-Alive域的超时时间设置为100 s。</span><br><span class="line"># keepalive_timeout 120s 100s</span><br><span class="line"></span><br><span class="line"># 配置单连接请求数上限，此指令可以在http块、server块或location块中配置。</span><br><span class="line"># Nginx服务器端和用户端建立会话连接后，用户端通过此连接发送请求。指令keepalive_requests用于限制用户通过某一连接向Nginx服务器发送请求的次数。默认是100</span><br><span class="line"># keepalive_requests number;</span><br><span class="line"></span><br><span class="line">upstream mysvr &#123;   </span><br><span class="line">server 127.0.0.1:7878;</span><br><span class="line">server 192.168.10.121:3333 backup;  #热备</span><br><span class="line">&#125;</span><br><span class="line">error_page 404 https://www.baidu.com; #错误页</span><br></pre></td></tr></table></figure><h2 id="server-全局块"><a href="#server-全局块" class="headerlink" title="server 全局块"></a>server 全局块</h2><p><code>listen</code>指令，三种写法，只能在这里配置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//第一种</span><br><span class="line">listen address[:port] [default_server] [ssl] [http2 | spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];</span><br><span class="line"></span><br><span class="line">//第二种</span><br><span class="line">listen port [default_server] [ssl] [http2 | spdy] [proxy_protocol] [setfib=number] [fastopen=number] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [ipv6only=on|off] [reuseport] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];</span><br><span class="line"></span><br><span class="line">//第三种（可以不用重点关注）</span><br><span class="line">listen unix:path [default_server] [ssl] [http2 | spdy] [proxy_protocol] [backlog=number] [rcvbuf=size] [sndbuf=size] [accept_filter=filter] [deferred] [bind] [so_keepalive=on|off|[keepidle]:[keepintvl]:[keepcnt]];</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">listen 127.0.0.1:8000;  #只监听来自127.0.0.1这个IP，请求8000端口的请求，如果是ipv6，要用[]括起来</span><br><span class="line">listen 127.0.0.1; #只监听来自127.0.0.1这个IP，请求80端口的请求（不指定端口，默认80）</span><br><span class="line">listen 8000; #监听来自所有IP，请求8000端口的请求</span><br><span class="line">listen *:8000; #和上面效果一样</span><br><span class="line">listen localhost:8000; #和第一种效果一致</span><br></pre></td></tr></table></figure><p><code>server_name</code>指令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server_name ****;</span><br></pre></td></tr></table></figure><p>对于<code>name</code>来说，可以只有一个名称，也可以由多个名称并列，之间用空格隔开。每个名字就是一个域名，第一个名称作为此虚拟主机的主要名称。。比如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server_name heyjian.cn www.heyjianr.cn</span><br></pre></td></tr></table></figure><p>在<code>name</code>中可以使用通配符<code>*</code>，但通配符只能用在由三段字符串组成的名称的首段或尾段，或者由两段字符串组成的名称的尾段，如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server_name heyjian.* *.heyjian.cn</span><br></pre></td></tr></table></figure><h2 id="location块"><a href="#location块" class="headerlink" title="location块"></a>location块</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location  ~*^.+$ &#123;       #请求的url过滤，正则匹配，~为区分大小写，~*为不区分大小写。</span><br><span class="line">          #root path;  #根目录</span><br><span class="line">          #index vv.txt;  #设置默认页</span><br><span class="line">          proxy_pass  http://mysvr;  #请求转向mysvr 定义的服务器列表</span><br><span class="line">          deny 127.0.0.1;  #拒绝的ip</span><br><span class="line">          allow 172.18.5.54; #允许的ip           </span><br><span class="line">       &#125; </span><br></pre></td></tr></table></figure><p><code>location</code>语法结构为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">location [ = | ~ | ~* | ^~ ] url &#123; ... &#125;</span><br></pre></td></tr></table></figure><ul><li><code>url</code>变量是待匹配的请求字符串，可以是不含正则表达的字符串,如<code>/myserver.php</code>等；也可以是包含有正则表达的字符串，如<code> .php$</code>（表示以<code>.php</code>结尾的<code>URL</code>）等。下文中，不含正则表达的<code>url</code>称为标准<code>url</code>，使用正则表达式的<code>url</code>称为正则<code>url</code>。</li><li>方括号里的部分，是可选项，用来改变请求字符串与<code>url</code>的匹配方式。</li><li>在不加可选项时，<code>nginx</code>服务器首先在<code>server</code>块的多个<code>location</code>块中搜索是否有不含正则表达的<code>url</code>和请求字符串匹配，如果有多个可以匹配，就记录匹配度最高的一个。然后，服务器再用<code>location</code>块中的含正则正则<code>uri</code>和请求字符串匹配，当第一个正则<code>url</code>匹配成功，结束搜索，并使用这个<code>location</code>块处理此请求；如果正则匹配全部失败，就使用刚才记录的匹配度最高的<code>location</code>块处理此请求。</li><li><code>=</code>，用于不含正则表达的<code>url</code>前，要求请求字符串与<code>url</code>严格匹配。如果已经匹配成功，就停止继续向下搜索并立即处理此请求。</li><li><code>^～</code>，</li><li>用于标准<code>url</code>前，要求<code>nginx</code>服务器找到标识<code>url</code>和请求字符串匹配度最高的<code>location</code>后，立即使用此<code>location</code>处理请求，而不再使用<code>location</code>块中的正则<code>url</code>和请求字符串做匹配。</li><li><code>~</code>：用于表示<code>url</code>包含正则表达式，并且区分大小写。</li><li><code>~*</code>：用于表示<code>url</code>包含正则表达式，并且不区分大小写。注意如果<code>url</code>包含正则表达式，就必须要使用<code>～</code>或者<code>～*</code>标识。</li></ul><blockquote><p>我们知道，在浏览器传送URL时对一部分字符进行URL编码，比如空格被编码为“%20”，问号被编码为“%3f”等。“～”有一个特点是，它对url中的这些符号将会进行编码处理。比如，如果location块收到的URL为“&#x2F;html&#x2F;%20&#x2F;data”，则当nginx服务器搜索到配置为“～ &#x2F;html&#x2F; &#x2F;data”的location时，可以匹配成功。</p></blockquote><p><code>root</code>指令：</p><p>用于设置请求寻找资源的跟目录，此指令可以在<code>http</code>块、<code>server</code>块或者<code>location</code>块中配置。由于使用<code>nginx</code>服务器多数情况下要配置多个<code>location</code>块对不同的请求分别做出处理，因此该指令通常在<code>location</code>块中进行设置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root path</span><br></pre></td></tr></table></figure><h2 id="nginx代理服务"><a href="#nginx代理服务" class="headerlink" title="nginx代理服务"></a>nginx代理服务</h2><p>设置<code>404</code>页面导向地址：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">error_page 404 https://www.runnob.com; #错误页</span><br><span class="line">proxy_intercept_errors on;    #如果被代理服务器返回的状态码为400或者大于400，设置的error_page配置起作用。默认为off。</span><br></pre></td></tr></table></figure><p>如果我们代理只允许接受<code>get</code>、<code>post</code>方法的一种：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxy_method get;    #支持客户端的请求方法。post/get；</span><br></pre></td></tr></table></figure><p>设置支持的<code>http</code>协议版本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proxy_http_version 1.0 ; #Nginx服务器提供代理服务的http协议版本1.0，1.1，默认设置为1.0版本</span><br></pre></td></tr></table></figure><p>如果<code>nginx</code>服务器给<code>2</code>台<code>web</code>服务器做代理，负载均衡算法采用轮询，那么当一台机器<code>web</code>程序<code>iis</code>关闭，也就是说<code>web</code>不能访问，那么<code>nginx</code>服务器分发请求还是会给这台不能访问的<code>web</code>服务器，如果这里的响应连接时间过长，就会导致客户端的页面一直在等待响应，对用户来说体验就打打折扣。</p><p>可以这么配置：</p><p>如果有两台<code>web</code>服务器，当负载均衡中其中<code>web2</code>发生上述情况，<code>nginx</code>首先会去<code>web1</code>请求，但是<code>nginx</code>在配置不当的情况下会继续分发请求到<code>web2</code>，然后等待<code>web2</code>响应，直到我们的响应时间超时，才会把请求重新分发给<code>web1</code>，这里的响应时间如果过长，用户等待的时间就会越长。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">proxy_connect_timeout 1;   #nginx服务器与被代理的服务器建立连接的超时时间，默认60秒</span><br><span class="line">proxy_read_timeout 1; #nginx服务器想被代理服务器组发出read请求后，等待响应的超时间，默认为60秒。</span><br><span class="line">proxy_send_timeout 1; #nginx服务器想被代理服务器组发出write请求后，等待响应的超时间，默认为60秒。</span><br><span class="line">proxy_ignore_client_abort on;  #客户端断网时，nginx服务器是否终端对被代理服务器的请求。默认为off。</span><br></pre></td></tr></table></figure><p>如果使用<code>upstream</code>指令配置了一组服务器作为被代理服务器，服务器中的访问算法遵循配置的负载均衡规则，同时可以使用该指令配置在发生哪些异常情况时，将请求顺次交由下一组服务器处理。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxy_next_upstream timeout;  #反向代理upstream中设置的服务器组，出现故障时，被代理服务器返回的状态值。</span><br><span class="line">#状态值可以是：error|timeout|invalid_header|http_500|http_502|http_503|http_504|http_404|off</span><br></pre></td></tr></table></figure><ul><li><code>error</code>：建立连接或向被代理的服务器发送请求或读取响应信息时服务器发生错误。</li><li><code>timeout</code>：建立连接，想被代理服务器发送请求或读取响应信息时服务器发生超时。</li><li><code>invalid_header</code>:被代理服务器返回的响应头异常。</li><li><code>off</code>:无法将请求分发给被代理的服务器。</li><li><code>http_400</code>，….:被代理服务器返回的状态码为<code>400</code>，<code>500</code>，<code>502</code>，等。</li></ul><p>如果想通过<code>http</code>获取客户的真实<code>ip</code>而不是获取代理服务器的<code>ip</code>地址，那么要做如下的设置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">proxy_set_header Host $host; #只要用户在浏览器中访问的域名绑定了 VIP VIP 下面有RS；则就用$host ；host是访问URL中的域名和端口  www.taobao.com:80</span><br><span class="line">proxy_set_header X-Real-IP $remote_addr;  #把源IP 【$remote_addr,建立HTTP连接header里面的信息】赋值给X-Real-IP;这样在代码中 $X-Real-IP来获取 源IP</span><br><span class="line">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;#在nginx 作为代理服务器时，设置的IP列表，会把经过的机器ip，代理机器ip都记录下来，用 【，】隔开；代码中用 echo $x-forwarded-for |awk -F, &#x27;&#123;print $1&#125;&#x27; 来作为源IP</span><br></pre></td></tr></table></figure><p>关于代理配置的配置文件部分的参考：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">include       mime.types;   #文件扩展名与文件类型映射表</span><br><span class="line">default_type  application/octet-stream; #默认文件类型，默认为text/plain</span><br><span class="line">#access_log off; #取消服务日志    </span><br><span class="line">log_format myFormat &#x27; $remote_addr–$remote_user [$time_local] $request $status $body_bytes_sent $http_referer $http_user_agent $http_x_forwarded_for&#x27;; #自定义格式</span><br><span class="line">access_log log/access.log myFormat;  #combined为日志格式的默认值</span><br><span class="line">sendfile on;   #允许sendfile方式传输文件，默认为off，可以在http块，server块，location块。</span><br><span class="line">sendfile_max_chunk 100k;  #每个进程每次调用传输数量不能大于设定的值，默认为0，即不设上限。</span><br><span class="line">keepalive_timeout 65;  #连接超时时间，默认为75s，可以在http，server，location块。</span><br><span class="line">proxy_connect_timeout 1;   #nginx服务器与被代理的服务器建立连接的超时时间，默认60秒</span><br><span class="line">proxy_read_timeout 1; #nginx服务器想被代理服务器组发出read请求后，等待响应的超时间，默认为60秒。</span><br><span class="line">proxy_send_timeout 1; #nginx服务器想被代理服务器组发出write请求后，等待响应的超时间，默认为60秒。</span><br><span class="line">proxy_http_version 1.0 ; #Nginx服务器提供代理服务的http协议版本1.0，1.1，默认设置为1.0版本。</span><br><span class="line">#proxy_method get;    #支持客户端的请求方法。post/get；</span><br><span class="line">proxy_ignore_client_abort on;  #客户端断网时，nginx服务器是否终端对被代理服务器的请求。默认为off。</span><br><span class="line">proxy_ignore_headers &quot;Expires&quot; &quot;Set-Cookie&quot;;  #Nginx服务器不处理设置的http相应投中的头域，这里空格隔开可以设置多个。</span><br><span class="line">proxy_intercept_errors on;    #如果被代理服务器返回的状态码为400或者大于400，设置的error_page配置起作用。默认为off。</span><br><span class="line">proxy_headers_hash_max_size 1024; #存放http报文头的哈希表容量上限，默认为512个字符。</span><br><span class="line">proxy_headers_hash_bucket_size 128; #nginx服务器申请存放http报文头的哈希表容量大小。默认为64个字符。</span><br><span class="line">proxy_next_upstream timeout;  #反向代理upstream中设置的服务器组，出现故障时，被代理服务器返回的状态值。error|timeout|invalid_header|http_500|http_502|http_503|http_504|http_404|off</span><br><span class="line">#proxy_ssl_session_reuse on; 默认为on，如果我们在错误日志中发现“SSL3_GET_FINSHED:digest check failed”的情况时，可以将该指令设置为off。</span><br></pre></td></tr></table></figure><h2 id="nginx负载均衡"><a href="#nginx负载均衡" class="headerlink" title="nginx负载均衡"></a>nginx负载均衡</h2><p>基本配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">upstream mysvr &#123; </span><br><span class="line">    server 192.168.10.121:3333;</span><br><span class="line">    server 192.168.10.122:3333;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    ....</span><br><span class="line">    location  ~*^.+$ &#123;         </span><br><span class="line">        proxy_pass  http://mysvr;  #请求转向mysvr 定义的服务器列表         </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>热备：如果有<code>2</code>台服务器，当一台服务器发生事故时，才启用第二台服务器给提供服务。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upstream mysvr &#123; </span><br><span class="line">    server 127.0.0.1:7878; </span><br><span class="line">    server 192.168.10.121:3333 backup;  #热备   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>轮询：<code>nginx</code>默认就是轮询其权重都默认为<code>1</code>，服务器处理请求的顺序：<code>ABABABABAB....</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upstream mysvr &#123; </span><br><span class="line">    server 127.0.0.1:7878;</span><br><span class="line">    server 192.168.10.121:3333;       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>加权轮询：跟据配置的权重的大小而分发给不同服务器不同数量的请求。如果不设置，则默认为<code>1</code>。下面服务器的请求顺序为：<code>ABBABBABBABBABB....</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upstream mysvr &#123; </span><br><span class="line">    server 127.0.0.1:7878 weight=1;</span><br><span class="line">    server 192.168.10.121:3333 weight=2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>ip_hash</code>：<code>nginx</code>会让相同的客户端<code>ip</code>请求相同的服务器。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">upstream mysvr &#123; </span><br><span class="line">    server 127.0.0.1:7878; </span><br><span class="line">    server 192.168.10.121:3333;</span><br><span class="line">    ip_hash;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>更多配置方法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upstream mysvr &#123; </span><br><span class="line">    server 127.0.0.1:7878 weight=2 max_fails=2 fail_timeout=2;</span><br><span class="line">    server 192.168.10.121:3333 weight=1 max_fails=2 fail_timeout=1;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>down</code>，表示当前的<code>server</code>暂时不参与负载均衡。</li><li><code>backup</code>，预留的备份机器。当其他所有的非<code>backup</code>机器出现故障或者忙的时候，才会请求<code>backup</code>机器，因此这台机器的压力最轻。</li><li><code>max_fails</code>，允许请求失败的次数，默认为<code>1</code>。当超过最大次数时，返回<code>proxy_next_upstream</code> 模块定义的错误。</li><li><code>fail_timeout</code>，在经历了<code>max_fails</code>次失败后，暂停服务的时间。<code>max_fails</code>可以和<code>fail_timeout</code>一起使用。</li></ul><h2 id="整合并拓展（很杂，结合上面内容一起食用）"><a href="#整合并拓展（很杂，结合上面内容一起食用）" class="headerlink" title="整合并拓展（很杂，结合上面内容一起食用）"></a>整合并拓展（很杂，结合上面内容一起食用）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br></pre></td><td class="code"><pre><span class="line">######Nginx配置文件nginx.conf中文详解#####</span><br><span class="line"></span><br><span class="line">#定义Nginx运行的用户和用户组</span><br><span class="line">user www www;</span><br><span class="line"></span><br><span class="line">#nginx进程数，建议设置为等于CPU总核心数。</span><br><span class="line">worker_processes 8;</span><br><span class="line"> </span><br><span class="line">#全局错误日志定义类型，[ debug | info | notice | warn | error | crit ]</span><br><span class="line">error_log /usr/local/nginx/logs/error.log info;</span><br><span class="line"></span><br><span class="line">#进程pid文件</span><br><span class="line">pid /usr/local/nginx/logs/nginx.pid;</span><br><span class="line"></span><br><span class="line">#指定进程可以打开的最大描述符：数目</span><br><span class="line">#工作模式与连接数上限</span><br><span class="line">#这个指令是指当一个nginx进程打开的最多文件描述符数目，理论值应该是最多打开文件数（ulimit -n）与nginx进程数相除，但是nginx分配请求并不是那么均匀，所以最好与ulimit -n 的值保持一致。</span><br><span class="line">#现在在linux 2.6内核下开启文件打开数为65535，worker_rlimit_nofile就相应应该填写65535。</span><br><span class="line">#这是因为nginx调度时分配请求到进程并不是那么的均衡，所以假如填写10240，总并发量达到3-4万时就有进程可能超过10240了，这时会返回502错误。</span><br><span class="line">worker_rlimit_nofile 65535;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events</span><br><span class="line">&#123;</span><br><span class="line">    #accept_mutex on;   #设置网路连接序列化，防止惊群现象发生，默认为on</span><br><span class="line">    #multi_accept on;  #设置一个进程是否同时接受多个网络连接，默认为off</span><br><span class="line">    #参考事件模型，use [ kqueue | rtsig | epoll | /dev/poll | select | poll ]; epoll模型</span><br><span class="line">    #是Linux 2.6以上版本内核中的高性能网络I/O模型，linux建议epoll，如果跑在FreeBSD上面，就用kqueue模型。</span><br><span class="line">    #补充说明：</span><br><span class="line">    #与apache相类，nginx针对不同的操作系统，有不同的事件模型</span><br><span class="line">    #A）标准事件模型</span><br><span class="line">    #Select、poll属于标准事件模型，如果当前系统不存在更有效的方法，nginx会选择select或poll</span><br><span class="line">    #B）高效事件模型</span><br><span class="line">    #Kqueue：使用于FreeBSD 4.1+, OpenBSD 2.9+, NetBSD 2.0 和 MacOS X.使用双处理器的MacOS X系统使用kqueue可能会造成内核崩溃。</span><br><span class="line">    #Epoll：使用于Linux内核2.6版本及以后的系统。</span><br><span class="line">    #/dev/poll：使用于Solaris 7 11/99+，HP/UX 11.22+ (eventport)，IRIX 6.5.15+ 和 Tru64 UNIX 5.1A+。</span><br><span class="line">    #Eventport：使用于Solaris 10。 为了防止出现内核崩溃的问题， 有必要安装安全补丁。</span><br><span class="line">    use epoll;</span><br><span class="line"></span><br><span class="line">    #单个进程最大连接数（最大连接数=连接数*进程数）</span><br><span class="line">    #根据硬件调整，和前面工作进程配合起来用，尽量大，但是别把cpu跑到100%就行。每个进程允许的最多连接数，理论上每台nginx服务器的最大连接数为。</span><br><span class="line">    worker_connections 65535;</span><br><span class="line"></span><br><span class="line">    #keepalive超时时间。</span><br><span class="line">    keepalive_timeout 60;</span><br><span class="line"></span><br><span class="line">    #客户端请求头部的缓冲区大小。这个可以根据你的系统分页大小来设置，一般一个请求头的大小不会超过1k，不过由于一般系统分页都要大于1k，所以这里设置为分页大小。</span><br><span class="line">    #分页大小可以用命令getconf PAGESIZE 取得。</span><br><span class="line">    #[root@web001 ~]# getconf PAGESIZE</span><br><span class="line">    #4096</span><br><span class="line">    #但也有client_header_buffer_size超过4k的情况，但是client_header_buffer_size该值必须设置为“系统分页大小”的整倍数。</span><br><span class="line">    client_header_buffer_size 4k;</span><br><span class="line"></span><br><span class="line">    #这个将为打开文件指定缓存，默认是没有启用的，max指定缓存数量，建议和打开文件数一致，inactive是指经过多长时间文件没被请求后删除缓存。</span><br><span class="line">    open_file_cache max=65535 inactive=60s;</span><br><span class="line"></span><br><span class="line">    #这个是指多长时间检查一次缓存的有效信息。</span><br><span class="line">    #语法:open_file_cache_valid time 默认值:open_file_cache_valid 60 使用字段:http, server, location 这个指令指定了何时需要检查open_file_cache中缓存项目的有效信息.</span><br><span class="line">    open_file_cache_valid 80s;</span><br><span class="line"></span><br><span class="line">    #open_file_cache指令中的inactive参数时间内文件的最少使用次数，如果超过这个数字，文件描述符一直是在缓存中打开的，如上例，如果有一个文件在inactive时间内一次没被使用，它将被移除。</span><br><span class="line">    #语法:open_file_cache_min_uses number 默认值:open_file_cache_min_uses 1 使用字段:http, server, location  这个指令指定了在open_file_cache指令无效的参数中一定的时间范围内可以使用的最小文件数,如果使用更大的值,文件描述符在cache中总是打开状态.</span><br><span class="line">    open_file_cache_min_uses 1;</span><br><span class="line">    </span><br><span class="line">    #语法:open_file_cache_errors on | off 默认值:open_file_cache_errors off 使用字段:http, server, location 这个指令指定是否在搜索一个文件时记录cache错误.</span><br><span class="line">    open_file_cache_errors on;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">#设定http服务器，利用它的反向代理功能提供负载均衡支持</span><br><span class="line">http</span><br><span class="line">&#123;</span><br><span class="line">    #文件扩展名与文件类型映射表</span><br><span class="line">    include mime.types;</span><br><span class="line"></span><br><span class="line">    #默认文件类型</span><br><span class="line">    default_type application/octet-stream;</span><br><span class="line">    </span><br><span class="line">    #access_log off; #取消服务日志    </span><br><span class="line">    #log_format myFormat &#x27;$remote_addr–$remote_user [$time_local] $request $status $body_bytes_sent $http_referer $http_user_agent $http_x_forwarded_for&#x27;; #自定义格式</span><br><span class="line">    #access_log log/access.log myFormat;  #combined为日志格式的默认值</span><br><span class="line">   </span><br><span class="line">    #keepalive_timeout 65;  #连接超时时间，默认为75s，可以在http，server，location块。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    #默认编码</span><br><span class="line">    #charset utf-8;</span><br><span class="line"></span><br><span class="line">    #服务器名字的hash表大小</span><br><span class="line">    #保存服务器名字的hash表是由指令server_names_hash_max_size 和server_names_hash_bucket_size所控制的。参数hash bucket size总是等于hash表的大小，并且是一路处理器缓存大小的倍数。在减少了在内存中的存取次数后，使在处理器中加速查找hash表键值成为可能。如果hash bucket size等于一路处理器缓存的大小，那么在查找键的时候，最坏的情况下在内存中查找的次数为2。第一次是确定存储单元的地址，第二次是在存储单元中查找键 值。因此，如果Nginx给出需要增大hash max size 或 hash bucket size的提示，那么首要的是增大前一个参数的大小.</span><br><span class="line">    server_names_hash_bucket_size 128;</span><br><span class="line"></span><br><span class="line">    #客户端请求头部的缓冲区大小。这个可以根据你的系统分页大小来设置，一般一个请求的头部大小不会超过1k，不过由于一般系统分页都要大于1k，所以这里设置为分页大小。分页大小可以用命令getconf PAGESIZE取得。</span><br><span class="line">    client_header_buffer_size 32k;</span><br><span class="line"></span><br><span class="line">    #客户请求头缓冲大小。nginx默认会用client_header_buffer_size这个buffer来读取header值，如果header过大，它会使用large_client_header_buffers来读取。</span><br><span class="line">    large_client_header_buffers 4 64k;</span><br><span class="line"></span><br><span class="line">    #设定通过nginx上传文件的大小</span><br><span class="line">    client_max_body_size 8m;</span><br><span class="line"></span><br><span class="line">    #开启高效文件传输模式，sendfile指令指定nginx是否调用sendfile函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络I/O处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成off。</span><br><span class="line">    #sendfile指令指定 nginx 是否调用sendfile 函数（zero copy 方式）来输出文件，对于普通应用，必须设为on。如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络IO处理速度，降低系统uptime。</span><br><span class="line">    sendfile on;</span><br><span class="line">    sendfile_max_chunk 100k;  #每个进程每次调用传输数量不能大于设定的值，默认为0，即不设上限。</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    #开启目录列表访问，合适下载服务器，默认关闭。</span><br><span class="line">    autoindex on;</span><br><span class="line"></span><br><span class="line">    #此选项允许或禁止使用socke的TCP_CORK的选项，此选项仅在使用sendfile的时候使用</span><br><span class="line">    tcp_nopush on;</span><br><span class="line">     </span><br><span class="line">    tcp_nodelay on;</span><br><span class="line"></span><br><span class="line">    #长连接超时时间，单位是秒</span><br><span class="line">    keepalive_timeout 120;</span><br><span class="line"></span><br><span class="line">    #FastCGI相关参数是为了改善网站的性能：减少资源占用，提高访问速度。下面参数看字面意思都能理解。</span><br><span class="line">    fastcgi_connect_timeout 300;</span><br><span class="line">    fastcgi_send_timeout 300;</span><br><span class="line">    fastcgi_read_timeout 300;</span><br><span class="line">    fastcgi_buffer_size 64k;</span><br><span class="line">    fastcgi_buffers 4 64k;</span><br><span class="line">    fastcgi_busy_buffers_size 128k;</span><br><span class="line">    fastcgi_temp_file_write_size 128k;</span><br><span class="line"></span><br><span class="line">    #gzip模块设置</span><br><span class="line">    gzip on; #开启gzip压缩输出</span><br><span class="line">    gzip_min_length 1k;    #最小压缩文件大小</span><br><span class="line">    gzip_buffers 4 16k;    #压缩缓冲区</span><br><span class="line">    gzip_http_version 1.0;    #压缩版本（默认1.1，前端如果是squid2.5请使用1.0）</span><br><span class="line">    gzip_comp_level 2;    #压缩等级</span><br><span class="line">    gzip_types text/plain application/x-javascript text/css application/xml;    #压缩类型，默认就已经包含textml，所以下面就不用再写了，写上去也不会有问题，但是会有一个warn。</span><br><span class="line">    gzip_vary on;</span><br><span class="line"></span><br><span class="line">    #开启限制IP连接数的时候需要使用</span><br><span class="line">    #limit_zone crawler $binary_remote_addr 10m;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    #负载均衡配置</span><br><span class="line">    upstream jh.w3cschool.cn &#123;</span><br><span class="line">     </span><br><span class="line">        #upstream的负载均衡，weight是权重，可以根据机器配置定义权重。weigth参数表示权值，权值越高被分配到的几率越大。</span><br><span class="line">        server 192.168.80.121:80 weight=3;</span><br><span class="line">        server 192.168.80.122:80 weight=2;</span><br><span class="line">        server 192.168.80.123:80 weight=3;</span><br><span class="line"></span><br><span class="line">        #nginx的upstream目前支持4种方式的分配</span><br><span class="line">        #1、轮询（默认）</span><br><span class="line">        #每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。</span><br><span class="line">        #2、weight</span><br><span class="line">        #指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。</span><br><span class="line">        #例如：</span><br><span class="line">        #upstream bakend &#123;</span><br><span class="line">        #    server 192.168.0.14 weight=10;</span><br><span class="line">        #    server 192.168.0.15 weight=10;</span><br><span class="line">        #&#125;</span><br><span class="line">        #2、ip_hash</span><br><span class="line">        #每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。</span><br><span class="line">        #例如：</span><br><span class="line">        #upstream bakend &#123;</span><br><span class="line">        #    ip_hash;</span><br><span class="line">        #    server 192.168.0.14:88;</span><br><span class="line">        #    server 192.168.0.15:80;</span><br><span class="line">        #&#125;</span><br><span class="line">        #3、fair（第三方）</span><br><span class="line">        #按后端服务器的响应时间来分配请求，响应时间短的优先分配。</span><br><span class="line">        #upstream backend &#123;</span><br><span class="line">        #    server server1;</span><br><span class="line">        #    server server2;</span><br><span class="line">        #    fair;</span><br><span class="line">        #&#125;</span><br><span class="line">        #4、url_hash（第三方）</span><br><span class="line">        #按访问url的hash结果来分配请求，使每个url定向到同一个后端服务器，后端服务器为缓存时比较有效。</span><br><span class="line">        #例：在upstream中加入hash语句，server语句中不能写入weight等其他的参数，hash_method是使用的hash算法</span><br><span class="line">        #upstream backend &#123;</span><br><span class="line">        #    server squid1:3128;</span><br><span class="line">        #    server squid2:3128;</span><br><span class="line">        #    hash $request_uri;</span><br><span class="line">        #    hash_method crc32;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        #tips:</span><br><span class="line">        #upstream bakend&#123;#定义负载均衡设备的Ip及设备状态&#125;&#123;</span><br><span class="line">        #    ip_hash;</span><br><span class="line">        #    server 127.0.0.1:9090 down;</span><br><span class="line">        #    server 127.0.0.1:8080 weight=2;</span><br><span class="line">        #    server 127.0.0.1:6060;</span><br><span class="line">        #    server 127.0.0.1:7070 backup;</span><br><span class="line">        #&#125;</span><br><span class="line">        #在需要使用负载均衡的server中增加 proxy_pass http://bakend/;</span><br><span class="line"></span><br><span class="line">        #每个设备的状态设置为:</span><br><span class="line">        #1.down表示单前的server暂时不参与负载</span><br><span class="line">        #2.weight为weight越大，负载的权重就越大。</span><br><span class="line">        #3.max_fails：允许请求失败的次数默认为1.当超过最大次数时，返回proxy_next_upstream模块定义的错误</span><br><span class="line">        #4.fail_timeout:max_fails次失败后，暂停的时间。</span><br><span class="line">        #5.backup： 其它所有的非backup机器down或者忙的时候，请求backup机器。所以这台机器压力会最轻。</span><br><span class="line"></span><br><span class="line">        #nginx支持同时设置多组的负载均衡，用来给不用的server来使用。</span><br><span class="line">        #client_body_in_file_only设置为On 可以讲client post过来的数据记录到文件中用来做debug</span><br><span class="line">        #client_body_temp_path设置记录文件的目录 可以设置最多3层目录</span><br><span class="line">        #location对URL进行匹配.可以进行重定向或者进行新的代理 负载均衡</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">      error_page 404 https://www.baidu.com; #错误页</span><br><span class="line">     </span><br><span class="line">    #虚拟主机的配置</span><br><span class="line">    server</span><br><span class="line">    &#123;</span><br><span class="line">         keepalive_requests 120; #单连接请求上限次数。</span><br><span class="line">        #监听端口</span><br><span class="line">        listen 80;</span><br><span class="line"></span><br><span class="line">        #域名可以有多个，用空格隔开</span><br><span class="line">        server_name www.w3cschool.cn w3cschool.cn;</span><br><span class="line">        #设置默认页</span><br><span class="line">        index index.html index.htm index.php;</span><br><span class="line">        #设置根目录</span><br><span class="line">        root /data/www/w3cschool;</span><br><span class="line">        </span><br><span class="line">        location  ~*^.+$ &#123;       #请求的url过滤，正则匹配，~为区分大小写，~*为不区分大小写。</span><br><span class="line">           #root path;  #根目录</span><br><span class="line">           #index vv.txt;  #设置默认页</span><br><span class="line">           proxy_pass  http://mysvr;  #请求转向mysvr 定义的服务器列表</span><br><span class="line">           deny 127.0.0.1;  #拒绝的ip</span><br><span class="line">           allow 172.18.5.54; #允许的ip           </span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        #对******进行负载均衡</span><br><span class="line">        location ~ .*.(php|php5)?$</span><br><span class="line">        &#123;</span><br><span class="line">            fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">            fastcgi_index index.php;</span><br><span class="line">            include fastcgi.conf;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        #图片缓存时间设置</span><br><span class="line">        location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$</span><br><span class="line">        &#123;</span><br><span class="line">            expires 10d;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        #JS和CSS缓存时间设置</span><br><span class="line">        location ~ .*.(js|css)?$</span><br><span class="line">        &#123;</span><br><span class="line">            expires 1h;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        #日志格式设定</span><br><span class="line">        #$remote_addr与$http_x_forwarded_for用以记录客户端的ip地址；</span><br><span class="line">        #$remote_user：用来记录客户端用户名称；</span><br><span class="line">        #$time_local： 用来记录访问时间与时区；</span><br><span class="line">        #$request： 用来记录请求的url与http协议；</span><br><span class="line">        #$status： 用来记录请求状态；成功是200，</span><br><span class="line">        #$body_bytes_sent ：记录发送给客户端文件主体内容大小；</span><br><span class="line">        #$http_referer：用来记录从那个页面链接访问过来的；</span><br><span class="line">        #$http_user_agent：记录客户浏览器的相关信息；</span><br><span class="line">        #通常web服务器放在反向代理的后面，这样就不能获取到客户的IP地址了，通过$remote_add拿到的IP地址是反向代理服务器的iP地址。反向代理服务器在转发请求的http头信息中，可以增加x_forwarded_for信息，用以记录原有客户端的IP地址和原来客户端的请求的服务器地址。</span><br><span class="line">        log_format access &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">        &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">        &#x27;&quot;$http_user_agent&quot; $http_x_forwarded_for&#x27;;</span><br><span class="line">         </span><br><span class="line">        #定义本虚拟主机的访问日志</span><br><span class="line">        access_log  /usr/local/nginx/logs/host.access.log  main;</span><br><span class="line">        access_log  /usr/local/nginx/logs/host.access.404.log  log404;</span><br><span class="line">         </span><br><span class="line">        #对 &quot;/&quot; 启用反向代理</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass http://127.0.0.1:88;</span><br><span class="line">            proxy_redirect off;</span><br><span class="line">            proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">             </span><br><span class="line">            #后端的Web服务器可以通过X-Forwarded-For获取用户真实IP</span><br><span class="line">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">             </span><br><span class="line">            #以下是一些反向代理的配置，可选。</span><br><span class="line">            proxy_set_header Host $host;</span><br><span class="line"></span><br><span class="line">            #允许客户端请求的最大单文件字节数</span><br><span class="line">            client_max_body_size 10m;</span><br><span class="line"></span><br><span class="line">            #缓冲区代理缓冲用户端请求的最大字节数，</span><br><span class="line">            #如果把它设置为比较大的数值，例如256k，那么，无论使用firefox还是IE浏览器，来提交任意小于256k的图片，都很正常。如果注释该指令，使用默认的client_body_buffer_size设置，也就是操作系统页面大小的两倍，8k或者16k，问题就出现了。</span><br><span class="line">            #无论使用firefox4.0还是IE8.0，提交一个比较大，200k左右的图片，都返回500 Internal Server Error错误</span><br><span class="line">            client_body_buffer_size 128k;</span><br><span class="line"></span><br><span class="line">            #表示使nginx阻止HTTP应答代码为400或者更高的应答。</span><br><span class="line">            proxy_intercept_errors on;</span><br><span class="line"></span><br><span class="line">            #后端服务器连接的超时时间_发起握手等候响应超时时间</span><br><span class="line">            #nginx跟后端服务器连接超时时间(代理连接超时)</span><br><span class="line">            proxy_connect_timeout 90;</span><br><span class="line"></span><br><span class="line">            #后端服务器数据回传时间(代理发送超时)</span><br><span class="line">            #后端服务器数据回传时间_就是在规定时间之内后端服务器必须传完所有的数据</span><br><span class="line">            proxy_send_timeout 90;</span><br><span class="line"></span><br><span class="line">            #连接成功后，后端服务器响应时间(代理接收超时)</span><br><span class="line">            #连接成功后_等候后端服务器响应时间_其实已经进入后端的排队之中等候处理（也可以说是后端服务器处理请求的时间）</span><br><span class="line">            proxy_read_timeout 90;</span><br><span class="line"></span><br><span class="line">            #设置代理服务器（nginx）保存用户头信息的缓冲区大小</span><br><span class="line">            #设置从被代理服务器读取的第一部分应答的缓冲区大小，通常情况下这部分应答中包含一个小的应答头，默认情况下这个值的大小为指令proxy_buffers中指定的一个缓冲区的大小，不过可以将其设置为更小</span><br><span class="line">            proxy_buffer_size 4k;</span><br><span class="line"></span><br><span class="line">            #proxy_buffers缓冲区，网页平均在32k以下的设置</span><br><span class="line">            #设置用于读取应答（来自被代理服务器）的缓冲区数目和大小，默认情况也为分页大小，根据操作系统的不同可能是4k或者8k</span><br><span class="line">            proxy_buffers 4 32k;</span><br><span class="line"></span><br><span class="line">            #高负荷下缓冲大小（proxy_buffers*2）</span><br><span class="line">            proxy_busy_buffers_size 64k;</span><br><span class="line"></span><br><span class="line">            #设置在写入proxy_temp_path时数据的大小，预防一个工作进程在传递文件时阻塞太长</span><br><span class="line">            #设定缓存文件夹大小，大于这个值，将从upstream服务器传</span><br><span class="line">            proxy_temp_file_write_size 64k;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">         </span><br><span class="line">        #设定查看Nginx状态的地址</span><br><span class="line">        location /NginxStatus &#123;</span><br><span class="line">            stub_status on;</span><br><span class="line">            access_log on;</span><br><span class="line">            auth_basic &quot;NginxStatus&quot;;</span><br><span class="line">            auth_basic_user_file confpasswd;</span><br><span class="line">            #htpasswd文件的内容可以用apache提供的htpasswd工具来产生。</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        #本地动静分离反向代理配置</span><br><span class="line">        #所有jsp的页面均交由tomcat或resin处理</span><br><span class="line">        location ~ .(jsp|jspx|do)?$ &#123;</span><br><span class="line">            proxy_set_header Host $host;</span><br><span class="line">            proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_pass http://127.0.0.1:8080;</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        #所有静态文件由nginx直接读取不经过tomcat或resin</span><br><span class="line">        location ~ .*.(htm|html|gif|jpg|jpeg|png|bmp|swf|ioc|rar|zip|txt|flv|mid|doc|ppt|</span><br><span class="line">        pdf|xls|mp3|wma)$</span><br><span class="line">        &#123;</span><br><span class="line">            expires 15d; </span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        location ~ .*.(js|css)?$</span><br><span class="line">        &#123;</span><br><span class="line">            expires 1h;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">######Nginx配置文件nginx.conf中文详解#####</span><br></pre></td></tr></table></figure><h1 id="不同域名-x2F-ip指向不同项目"><a href="#不同域名-x2F-ip指向不同项目" class="headerlink" title="不同域名&#x2F;ip指向不同项目"></a>不同域名&#x2F;ip指向不同项目</h1><p>比如，访问<code>192.168.1.31</code>又虚拟主机1处理，访问<code>192.168.1.32</code>由虚拟主机2处理。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">...</span><br><span class="line">server &#123;</span><br><span class="line">listen:  80;</span><br><span class="line">   server_name:  自己设置的域名1.com;</span><br><span class="line">   </span><br><span class="line">   location / &#123;</span><br><span class="line">   ...</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">listen:  80;</span><br><span class="line">   server_name:  自己设置的域名2.com;</span><br><span class="line">   </span><br><span class="line">   location / &#123;</span><br><span class="line">   ...</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="docker-多容器通过nginx连接"><a href="#docker-多容器通过nginx连接" class="headerlink" title="docker 多容器通过nginx连接"></a>docker 多容器通过nginx连接</h1><p>同一域名下不同路径指向不同的容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">       listen       80;</span><br><span class="line">       server_name  自己设置的域名.com;</span><br><span class="line"></span><br><span class="line">      location / &#123;</span><br><span class="line">             proxy_pass         http://ip:3000; </span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">     location /admin/ &#123;</span><br><span class="line">              proxy_pass          http://ip:4000/; </span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure><p>不同域名指向不同的容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">listen:  80;</span><br><span class="line">   server_name:  自己设置的域名1.com;</span><br><span class="line">   </span><br><span class="line">   location / &#123;</span><br><span class="line">    proxy_pass         http://ip:3000; </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">listen:  80;</span><br><span class="line">   server_name:  自己设置的域名2.com;</span><br><span class="line">   </span><br><span class="line">   location / &#123;</span><br><span class="line">    proxy_pass         http://ip:4000; </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p><strong>注意：</strong>如果<code>nginx</code>是通过<code>docker</code>容器部署的，那么上述<code>ip</code>地址不能写<code>127.0.0.1</code>或者<code>localhost</code>，因为填这个实际访问的是<code>nginx</code>容器内部的端口，容器相当于自成一个虚拟机，没用。应填写宿主机公网<code>ip</code>及宿主机端口。（宿主机端口与应用容器端口已做好映射。）</p><h1 id="SSL配置"><a href="#SSL配置" class="headerlink" title="SSL配置"></a>SSL配置</h1><p><code>SSL</code>证书文件：</p><p><code>.crt</code>：证书文件，<code>crt</code>是<code>pem</code>文件的扩展名。</p><p><code>.key</code>：证书的私钥文件（申请证书时如果没有选择自动创建<code>CSR</code>，则没有该文件）</p><p><code>.pem</code>：证书文件，采用<code>Base64-encoded</code>的<code>PEM</code>格式文本文件，可根据需要修改扩展名。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">     #SSL 默认访问端口号为 443</span><br><span class="line">     listen 443 ssl; </span><br><span class="line">     #请填写绑定证书的域名 多个域名空格分开</span><br><span class="line">     server_name cloud.tencent.com; </span><br><span class="line">     #请填写证书文件的相对路径或绝对路径(有些是.pem，自行识别)</span><br><span class="line">     ssl_certificate cloud.tencent.com_bundle.crt; </span><br><span class="line">     #请填写私钥文件的相对路径或绝对路径</span><br><span class="line">     ssl_certificate_key cloud.tencent.com.key; </span><br><span class="line">     #缓存有效期</span><br><span class="line">     ssl_session_timeout 5m;</span><br><span class="line">     #请按照以下协议配置</span><br><span class="line">     #安全链接可选的加密协议</span><br><span class="line">     ssl_protocols TLSv1.2 TLSv1.3; </span><br><span class="line">     #请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。</span><br><span class="line">     ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; </span><br><span class="line">     #使用服务器端的首选算法</span><br><span class="line">     ssl_prefer_server_ciphers on;</span><br><span class="line">     location / &#123;</span><br><span class="line">         #网站主页路径。此路径仅供参考，具体请您按照实际目录操作。</span><br><span class="line">         #例如，您的网站主页在 Nginx 服务器的 /etc/www 目录下，则请修改 root 后面的 html 为 /etc/www。</span><br><span class="line">         root html; </span><br><span class="line">         index  index.html index.htm;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> server &#123;</span><br><span class="line"> listen 80;</span><br><span class="line"> #请填写绑定证书的域名</span><br><span class="line"> server_name cloud.tencent.com; </span><br><span class="line"> #把http的域名请求转成https</span><br><span class="line"> return 301 https://$host$request_uri; </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="nginx-1-23-3配置文件默认设置"><a href="#nginx-1-23-3配置文件默认设置" class="headerlink" title="nginx 1.23.3配置文件默认设置"></a>nginx 1.23.3配置文件默认设置</h1><blockquote><p>nginx下载后默认的设置，没改过的，备份用。</p></blockquote><p><code>nginx.conf</code>文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">user  nginx;</span><br><span class="line">worker_processes  auto;</span><br><span class="line"></span><br><span class="line">error_log  /var/log/nginx/error.log notice;</span><br><span class="line">pid        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       /etc/nginx/mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  &#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span><br><span class="line">                      &#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span><br><span class="line">                      &#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>conf.d</code>文件夹内的<code>default.conf</code>文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    listen  [::]:80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #access_log  /var/log/nginx/host.access.log  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">    # redirect server error pages to the static page /50x.html</span><br><span class="line">    #</span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">    #</span><br><span class="line">    #location ~ \.php$ &#123;</span><br><span class="line">    #    proxy_pass   http://127.0.0.1;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">    #</span><br><span class="line">    #location ~ \.php$ &#123;</span><br><span class="line">    #    root           html;</span><br><span class="line">    #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    #    fastcgi_index  index.php;</span><br><span class="line">    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">    #    include        fastcgi_params;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line">    # deny access to .htaccess files, if Apache&#x27;s document root</span><br><span class="line">    # concurs with nginx&#x27;s one</span><br><span class="line">    #</span><br><span class="line">    #location ~ /\.ht &#123;</span><br><span class="line">    #    deny  all;</span><br><span class="line">    #&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 云服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> nginx </tag>
            
            <tag> 配置文件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于docker安装nginx</title>
      <link href="/2023/02/14/%E5%9F%BA%E4%BA%8Edocker%E5%AE%89%E8%A3%85nginx/"/>
      <url>/2023/02/14/%E5%9F%BA%E4%BA%8Edocker%E5%AE%89%E8%A3%85nginx/</url>
      
        <content type="html"><![CDATA[<h1 id="拉取nginx镜像"><a href="#拉取nginx镜像" class="headerlink" title="拉取nginx镜像"></a>拉取nginx镜像</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx</span><br></pre></td></tr></table></figure><h1 id="创建容器"><a href="#创建容器" class="headerlink" title="创建容器"></a>创建容器</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name nginx -p 80:80 -d nginx</span><br></pre></td></tr></table></figure><h1 id="创建nginx配置文件"><a href="#创建nginx配置文件" class="headerlink" title="创建nginx配置文件"></a>创建nginx配置文件</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /home/jian/app/nginx/conf</span><br><span class="line">mkdir -p /home/jian/app/nginx/log</span><br><span class="line">mkdir -p /home/jian/app/nginx/html</span><br></pre></td></tr></table></figure><p>将容器内<code>nginx</code>重要文件复制到宿主机：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker cp nginx:/etc/nginx/nginx.conf /home/jian/app/nginx/conf/nginx.conf</span><br><span class="line">docker cp nginx:/etc/nginx/conf.d /home/jian/app/nginx/conf/conf.d</span><br><span class="line">docker cp nginx:/usr/share/nginx/html /home/jian/app/nginx</span><br></pre></td></tr></table></figure><h1 id="删除原有nginx容器"><a href="#删除原有nginx容器" class="headerlink" title="删除原有nginx容器"></a>删除原有nginx容器</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker stop nginx</span><br><span class="line">docker rm nginx</span><br></pre></td></tr></table></figure><h1 id="创建新nginx容器"><a href="#创建新nginx容器" class="headerlink" title="创建新nginx容器"></a>创建新nginx容器</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-p 80:80 \</span><br><span class="line">--name nginx \</span><br><span class="line">-v /home/jian/app/nginx/conf/nginx.conf:/etc/nginx/nginx.conf \</span><br><span class="line">-v /home/jian/app/nginx/conf/conf.d:/etc/nginx/conf.d \</span><br><span class="line">-v /home/jian/app/nginx/log:/var/log/nginx \</span><br><span class="line">-v /home/jian/app/nginx/html:/usr/share/nginx/html \</span><br><span class="line">-d nginx</span><br></pre></td></tr></table></figure><h1 id="另一种方法：compose文件（正在使用）"><a href="#另一种方法：compose文件（正在使用）" class="headerlink" title="另一种方法：compose文件（正在使用）"></a>另一种方法：compose文件（正在使用）</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3&#x27;</span><br><span class="line">services:</span><br><span class="line">    nginx: </span><br><span class="line">        container_name: nginx</span><br><span class="line">        image: nginx:1.23.3</span><br><span class="line">        ports:</span><br><span class="line">            - 80:80</span><br><span class="line">        volumes:                        </span><br><span class="line">            - /home/jian/app/nginx/conf/nginx.conf:/etc/nginx/nginx.conf</span><br><span class="line">            - /home/jian/app/nginx/conf/conf.d:/etc/nginx/conf.d</span><br><span class="line">            - /home/jian/app/nginx/log:/var/log/nginx</span><br><span class="line">            - /home/jian/app/nginx/html:/usr/share/nginx/html</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 云服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> docker </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux防火墙常用指令</title>
      <link href="/2023/02/14/linux%E9%98%B2%E7%81%AB%E5%A2%99%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"/>
      <url>/2023/02/14/linux%E9%98%B2%E7%81%AB%E5%A2%99%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>UFW(Uncomplicated Firewall)，中文译名简单防火墙，是一款轻量化的防火墙工具，主要用于管理防火墙规则。</p></blockquote><h1 id="先决条件"><a href="#先决条件" class="headerlink" title="先决条件"></a>先决条件</h1><ul><li><p>运行<code>ufw</code>命令的用户必须是<code>root</code>用户或是具有<code>sudo</code>权限的用户，非<code>root</code>用户记得添加<code>sudo</code>权限并在下述指令前添加<code>sudo</code>。</p></li><li><p>默认情况下<code>ufw</code>阻挡了所有进来的连接，并且允许所有出去的连接，这意味着任何人无法访问服务器，除非打开端口。而运行在服务器上的应用和服务可以访问外面的世界。</p></li></ul><h1 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h1><ol><li><p>ufw安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install ufw</span><br></pre></td></tr></table></figure></li><li><p>查看防火墙状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw status</span><br></pre></td></tr></table></figure><p>如果还未启用<code> UFW</code> ，将会显示<code>Status: inactive</code>；否则，将会显示所有制定的防火墙规则。</p><p>查看额外信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw status verbose</span><br></pre></td></tr></table></figure><p>将输出将包含有关日志记录，默认策略和新配置文件的信息。</p><p>查看规则及规则序号：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw status numbered</span><br></pre></td></tr></table></figure></li><li><p>开启防火墙</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw enable</span><br></pre></td></tr></table></figure></li><li><p>关闭防火墙</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw disable</span><br></pre></td></tr></table></figure></li><li><p>重置防火墙</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw reset</span><br></pre></td></tr></table></figure></li><li><p>外来访问全部允许&#x2F;拒绝</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#外来访问全部允许</span><br><span class="line">ufw default allow </span><br><span class="line">#外来访问全部拒绝</span><br><span class="line">ufw default deny </span><br></pre></td></tr></table></figure></li><li><p>开放或禁用端口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#允许外部访问53端口(tcp/udp) </span><br><span class="line">ufw allow 53 </span><br><span class="line">#允许所有的外部IP访问本机的22/tcp (ssh)端口</span><br><span class="line">ufw allow 22/tcp </span><br><span class="line">#允许所有的外部IP访问本机的25/tcp (smtp)端口 </span><br><span class="line">ufw allow smtp </span><br><span class="line">#拒绝外部访问53端口(tcp/udp) </span><br><span class="line">ufw deny 53</span><br><span class="line">#允许/禁用多个端口</span><br><span class="line">ufw allow/deny 53,3690 </span><br><span class="line">#制定端口范围</span><br><span class="line">ufw allow 7100:7200/tcp </span><br><span class="line">#允许此IP访问所有的本机端口</span><br><span class="line">ufw allow from 192.168.1.111 </span><br><span class="line">#允许给定 IP 访问指定的端口</span><br><span class="line">ufw allow from 64.63.62.61 to any port 22</span><br><span class="line">#允许指定的IP段访问特定端口, 如允许自192.168.0.0/24的tcp封包访问本机的22端口</span><br><span class="line">ufw allow proto tcp from 192.168.0.0/24 to any port 22 </span><br><span class="line">#禁止来自192.168.0.0/24的udp封包访问本机的53端口</span><br><span class="line">ufw deny proto tcp from 192.168.0.0/24 to any port 53 </span><br></pre></td></tr></table></figure></li><li><p>删除防火墙规则</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#删除smtp服务端口(25)</span><br><span class="line">ufw delete allow smtp</span><br><span class="line">#删除3690端口</span><br><span class="line">ufw delete allow 3690</span><br><span class="line">#删除以前定义的&quot;允许/拒绝访问20端口&quot;的规则</span><br><span class="line">ufw delete allow/deny 20 </span><br></pre></td></tr></table></figure></li><li><p>应用配置</p><p>大部分应用都附带一份应用配置，它描述了服务，并且包含了UFW设置。这个规则在软件包安装的时候，被自动创建在<code>/etc/ufw/applications.d</code>目录下。</p><p>列举系统上所有的应用配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw app list</span><br></pre></td></tr></table></figure><p>查找更多关于指定配置和包含规则的信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ufw app info &#x27;应用&#x27;</span><br></pre></td></tr></table></figure></li><li><p>启动并启用UFW的systemd 单元</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start ufw</span><br><span class="line">systemctl enable ufw</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 常用指令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> 常用指令 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker常用指令</title>
      <link href="/2023/02/14/docker%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"/>
      <url>/2023/02/14/docker%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<blockquote><p>docker是一门容器技术，可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的Linux机器上，也可以实现虚拟化。</p></blockquote><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><ul><li>根据<a href="https://docs.docker.com/engine/install/ubuntu/">docker官方文档</a>的步骤即可完成安装。</li><li>将非<code>root</code>用户加入<code>docker</code>用户组即可通过该用户管理<code>docker</code>。（<a href="https://docs.docker.com/engine/install/linux-postinstall/">讲解</a>）</li><li>记得切换为国内镜像源（阿里云源）。</li><li>推荐：<a href="https://www.runoob.com/docker/docker-command-manual.html">菜鸟教程-docker命令大全</a>。</li><li>可以通过<code>docker command --help</code>（例如：<code>docker run --help</code>）查看<code>docker</code>命令使用方法。</li></ul><h1 id="docker启动相关的命令"><a href="#docker启动相关的命令" class="headerlink" title="docker启动相关的命令"></a>docker启动相关的命令</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">启动docker：systemctl start docker</span><br><span class="line">查看docker服务状态：systemctl status docker</span><br><span class="line">停止docker：systemctl stop docker</span><br><span class="line">重启docker：systemctl restart docker</span><br><span class="line">开机启动docker：systemctl enable docker</span><br></pre></td></tr></table></figure><h1 id="docker镜像相关的命令"><a href="#docker镜像相关的命令" class="headerlink" title="docker镜像相关的命令"></a>docker镜像相关的命令</h1><blockquote><p>当运行容器时，使用的镜像如果在本地中不存在，docker就会自动从docker镜像仓库中下载，默认是从docker hub公共镜像源下载。</p></blockquote><p>查看本地镜像：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p>查看所有镜像<code>ID</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images -q</span><br></pre></td></tr></table></figure><p>搜索镜像：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search 镜像名称</span><br></pre></td></tr></table></figure><p>拉取镜像：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull 镜像名称:版本号</span><br><span class="line">docker pull 镜像名称 #不指定版本号，直接拉取当前最新版本</span><br></pre></td></tr></table></figure><p>设置镜像标签：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag 容器名或容器id 镜像原名:新标签名</span><br></pre></td></tr></table></figure><p>删除镜像：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker rmi 镜像id</span><br><span class="line">docker rmi &#x27;docker images -q&#x27; #删除所有本地镜像 </span><br></pre></td></tr></table></figure><h1 id="docker容器相关命令"><a href="#docker容器相关命令" class="headerlink" title="docker容器相关命令"></a>docker容器相关命令</h1><blockquote><p>当运行容器时，使用的镜像如果在本地中不存在，docker就会自动从docker镜像仓库中下载，默认是从docker hub公共镜像源下载。</p></blockquote><p>创建容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run 参数</span><br><span class="line">例如：</span><br><span class="line">docker run -i -t --name=自定义容器名 镜像名称 /bin/bash</span><br><span class="line">docker run -it --name=自定义容器名 镜像名称 /bin/bash</span><br><span class="line">docker run -it --name 自定义容器名 镜像名称 /bin/bash</span><br><span class="line">#以上三种等价</span><br><span class="line">docker run -itd --name=自定义容器名 镜像名称 /bin/bash</span><br></pre></td></tr></table></figure><p>部分参数说明：</p><ul><li><p><code>-i</code>：保持容器运行（菜鸟教程：交互式操作），通常与<code>-t</code>同时使用，写作<code>-it</code>。加入<code>-it</code>后，容器创建后自动进入容器中，输入<code>exit</code>退出。退出容器后，容器自动关闭。</p></li><li><p><code>-t</code>：为容器重新分配一个伪输入终端，通常与<code>-i</code>合用。</p></li><li><p><code>-d</code>：创建容器并后台运行。使用<code>docker exec</code>进入容器，按<code>exit</code>退出，不会停止。</p></li><li><p>一般来说：<code>-it</code>创建的容器为交互式容器，<code>-id</code>创建的容器为守护式容器。</p></li><li><p><code>--name</code>：为创建的容器命名。</p></li><li><p><code>/bin/bash</code>：放在镜像名后的是命令，这里我们希望有个交互式<code>Shell</code>，因此用的是 <code>/bin/bash</code>。</p></li><li><p><code>-p</code>：端口映射，容器内部端口绑定到指定的主机端口。例如<code>-p 500:50</code>，把容器里的<code>50</code>端口映射到宿主机的<code>500</code>端口上。又比如，<code>-p 192.168.1.100:8080:80</code>，将容器里的<code>80</code>端口映射到<code>IP</code>地址为<code>192.168.1.100</code>宿主机的<code>8080</code>端口。</p></li><li><p><code>-P</code>:容器内部端口随机映射到主机的端口。</p></li></ul><p>查看容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker ps #查看正在运行的容器</span><br><span class="line">docker ps -a #查看所有容器（运行未运行的都将列举）</span><br></pre></td></tr></table></figure><p>进入容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker attach 容器名或容器id</span><br></pre></td></tr></table></figure><p>如果从这个容器退出，<strong>会</strong>导致容器的停止。</p><p><em>推荐：</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it 容器名或容器id /bin/bash</span><br></pre></td></tr></table></figure><p>如果从这个容器退出，<strong>不会</strong>导致容器的停止。</p><p>停止容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop 容器名或容器id</span><br></pre></td></tr></table></figure><p>启动容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器名或容器id</span><br></pre></td></tr></table></figure><p>重启容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart 容器名或容器id</span><br></pre></td></tr></table></figure><p>删除容器：需要停止容器才能删除</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm 容器名或容器id</span><br></pre></td></tr></table></figure><p>清理掉所有处于终止状态的容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container prune</span><br></pre></td></tr></table></figure><p>强制删除容器：运行中的容器也可以删除</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f 容器名或容器id</span><br></pre></td></tr></table></figure><p>导出容器：盲猜是导出到执行该命令的目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker export 容器id &gt; 随便起名.tar</span><br></pre></td></tr></table></figure><p>导入容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat docker/随便起名.tar | docker import -随便用户名/随便镜像名:随便版本号 </span><br></pre></td></tr></table></figure><p>查看容器开放端口：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker port 容器名或容器id</span><br></pre></td></tr></table></figure><p>查看日志：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker logs 容器名或id</span><br><span class="line">docker logs -f 容器名或id #让docker logs像使用tail -f一样来输出容器内部的标准输出</span><br></pre></td></tr></table></figure><p>查看容器内部运行的进程：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top 容器名或容器id</span><br></pre></td></tr></table></figure><p>查看容器信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect 容器名或容器id</span><br></pre></td></tr></table></figure><h1 id="容器数据卷"><a href="#容器数据卷" class="headerlink" title="容器数据卷"></a>容器数据卷</h1><p>解决问题：</p><ul><li><code>docker</code>容器删除后，容器内数据储存。</li><li><code>docker</code>容器内外数据交互。</li><li><code>docker</code>容器间数据交互（多个容器挂载1个数据卷或者数据卷容器）。</li></ul><p>数据卷：</p><ul><li>数据卷是宿主机的一个目录或文件。</li><li>当容器目录和数据卷目录绑定后，对方的修改会立即同步。</li><li>一个容器可以挂载多个数据卷。</li></ul><p>配置数据卷：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run ... -v 宿主机目录(文件):容器内目录(文件) ...</span><br></pre></td></tr></table></figure><ul><li>目录必须是绝对路径。</li><li>目录不存在会自动创建。</li><li>可以挂载多个数据卷，多写几个<code>-v</code>即可。</li></ul><p>数据卷容器：也可以用于多容器数据交互。</p><p>创建数据卷容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name=自定义名字1 -v /volume 镜像名:版本号 /bin/bash #会自动且随机创建宿主机目录</span><br><span class="line">或</span><br><span class="line">docker run -itd --name=自定义名字1 -v 宿主机目录(文件):容器内目录(文件) 镜像名:版本号 /bin/bash</span><br></pre></td></tr></table></figure><p>创建其他容器，并关联数据卷</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --name=自定义名字2 --volumes-from 自定义名字1 镜像名:版本号 /bin/bash</span><br><span class="line">docker run -it --name=自定义名字3 --volumes-from 自定义名字1 镜像名:版本号 /bin/bash</span><br></pre></td></tr></table></figure><h1 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h1><p><strong>前提：</strong></p><ul><li><code>linux</code>文件系统由<code>bootfs</code>（<code>bootloader</code>引导加载程序和<code>kernel</code>内核）和<code>rootfs</code>（<code>root</code>文件系统，包括<code>/dev /proc /bin /etc</code>）两部分组成。不同<code>linux</code>发行版，<code>bootfs</code>基本一致，<code>rootfs</code>不同。</li></ul><p><strong>docker镜像原理：</strong></p><ul><li><code>docker</code>镜像由特殊的文件系统叠加而成。</li><li>最底端是<code>bootfs</code>，并使用宿主机的<code>bootfs</code>。</li><li>第二层是<code>root</code>文件系统<code>rootfs</code>，称为<code>base image</code>。</li><li>然后再往上可以叠加其他的镜像文件。</li><li>统一文件系统（<code>Union File System</code>）技术能够将不同的层整合成一个文件系统，为这些层提供一个统一的视角，这样就隐藏了多层的存在，在用户角度来看，只存在一个文件系统。</li><li>一个镜像可以放在另一个镜像上面，位于下面的镜像称为父镜像，最底层的镜像称为基础镜像。</li><li>当从一个镜像启动为容器时，<code>docker</code>会在最顶层加载一个读写文件系统作为容器。</li></ul><p><img src="https://img.heyjian.cn/2023021601.jpg" alt="形象示意图"></p><p><code>docker</code>镜像制作有两种方法：</p><ol><li><p>从已经创建的容器中更新镜像，并且提交这个镜像。(即已经创建的容器转为镜像)</p><p>注意：通过此方法挂载到宿主机的目录不会被打包成镜像。</p><p>1.1 制作新的镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker commit 参数 已创建容器id 镜像名字:版本号</span><br><span class="line">例如：</span><br><span class="line">docker commit -m=&quot;描述信息&quot; -a=&quot;描述作者&quot; 已创建容器id 镜像名字:版本号</span><br></pre></td></tr></table></figure><p>参数说明：</p><ul><li><code>-m</code>：提交的描述信息。</li><li><code>-a</code>：镜像作者。</li></ul><p><strong>注：</strong> <em>已创建容器</em>即为在原有容器基础上已经作出更改并需要传给他人的容器。</p><p>1.2 将新的镜像转成压缩文件，便于传输</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save -o 压缩文件名称 镜像名称:版本号</span><br></pre></td></tr></table></figure><p>1.3 将压缩文件还原成镜像</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -i 压缩文件名称 镜像名称:版本号</span><br></pre></td></tr></table></figure></li><li><p>使用<code>dockerfile</code>指令来创建一个新的镜像。</p><ul><li><code>dockerfile</code>是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。</li><li>每一条（行）指令基于父镜像构建一层子镜像，层层叠加，最终构建出一个完整的新镜像。因此，编些<code>dockerfile</code>文件时平行指令用<code>&amp;&amp;</code>连接，用<code>\</code>换行。</li></ul><p>最好在<code>docker</code>官网参照他人的<code>dockerfile</code>写。</p><ul><li>关键词必须全是大写。</li></ul><table><thead><tr><th align="center">关键词</th><th align="center">作用</th><th align="center">备注</th></tr></thead><tbody><tr><td align="center">FROM</td><td align="center">指定父镜像</td><td align="center">指定dockerfile基于哪个image构建</td></tr><tr><td align="center">MAINTAINER</td><td align="center">作者信息</td><td align="center">用来标明这个dockerfile是谁写的</td></tr><tr><td align="center">LABEL</td><td align="center">标签</td><td align="center">用来标明dockerfile的标签，可以用LABEL代替MAINTAINER，最终都可以在docker image基本信息中查看。格式：LABEL <key>&#x3D;<value> <key>&#x3D;<value> <key>&#x3D;<value></td></tr><tr><td align="center">RUN</td><td align="center">执行命令</td><td align="center">执行一段命令，在docker build的时候使用，默认&#x2F;bin&#x2F;sh。在构建镜像时执行的命令。格式：RUN command或者RUN [“command”,”param1”,”param2”]</td></tr><tr><td align="center">CMD</td><td align="center">容器启动命令</td><td align="center">提供启动容器时候（docker run）的默认命令，和ENTRYPOINT配合使用。即，当我们使用docker run启动该镜像生成容器时，镜像会在生成的容器内执行的命令。格式：CMD command param1 param2或者CMD [“command”,”param1”,”param2”]</td></tr><tr><td align="center">ENTRYPOINT</td><td align="center">入口</td><td align="center">一般在指定一些执行后就关闭</td></tr><tr><td align="center">COPY</td><td align="center">复制文件</td><td align="center">build的时候复制宿主机本地文件到image中</td></tr><tr><td align="center">ADD</td><td align="center">添加文件</td><td align="center">build的时候添加文件到image中，不仅仅局限于build上下文，可以来源于远程服务。但其会自动将压缩文件解压，在不解压的情况下，无法复制压缩文件</td></tr><tr><td align="center">ENV</td><td align="center">环境变量</td><td align="center">制定build时候的环境变量，可以在启动容器的时候，通过-e覆盖，格式ENV name&#x3D;value</td></tr><tr><td align="center">ARG</td><td align="center">构建参数</td><td align="center">只有在构建参数的时候使用，仅在dockerfile内有效，构建完镜像后不存在此环境变量。如果有ENV，那么ENV相同名字的值始终覆盖ARG。格式：ARG &lt;参数名&gt;[&#x3D;&lt;默认值&gt;]</td></tr><tr><td align="center">VOLUME</td><td align="center">定义外部可挂载的数据卷</td><td align="center">指定build的image在启动时哪些目录可以挂载在宿主机文件系统，启动容器时使用-v绑定，如果忘记挂载数据卷，会自动挂载到匿名卷。格式VOLUME [“目录”]</td></tr><tr><td align="center">EXPOSE</td><td align="center">暴露端口</td><td align="center">定义容器运行时候的监听窗口，帮助镜像使用者理解这个镜像服务的守护端口，以方便配置映射。启动容器时使用-p来绑定暴漏端口。格式：EXPOSE 8080或者EXPOSE 8080&#x2F;ucp</td></tr><tr><td align="center">WORKDIR</td><td align="center">工作目录</td><td align="center">指定容器内部的工作目录，会在构建镜像的每一层中都存在，且如果没有创建则自动创建，如果指定&#x2F;使用的是绝对地址，如果不是&#x2F;开头那么那么是相对路径。格式：WORKDIR &lt;工作目录路径&gt;</td></tr><tr><td align="center">USER</td><td align="center">指定执行用户</td><td align="center">指定build或者启动的时候，在RUN、CMD、ENTRYPOINT执行命令的用户（用户和用户组必须存在）。格式：USER &lt;用户名&gt;[:&lt;用户组&gt;]</td></tr><tr><td align="center">HEALTHCHECK</td><td align="center">健康检查</td><td align="center">指定当前容器健康检测的命令，一般没用，应用本身有健康监测机制。</td></tr><tr><td align="center">ONBUILD</td><td align="center">触发器</td><td align="center">用于延迟构建命令的执行。即当dockerfile 里有ONBUILD指定的命令，在本次构建镜像的过程中不会执行（假设镜像为 test-build）。当有新的dockerfile使用了之前构建的镜像（FROM test-build），这时执行新镜像的dockerfile构建时候，会执行test-build的dockerfile的ONBUILD指定的命令。格式：ONBUILD &lt;其它指令&gt;</td></tr><tr><td align="center">STOPSIGNAL</td><td align="center">设置发送容器的系统调用信号以退出</td><td align="center"></td></tr><tr><td align="center">SHELL</td><td align="center">指定执行脚本的shell</td><td align="center">指定RUN、CMD、ENTRYPOINT执行时候使用的shell</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker build -f dockfile路径 -t 镜像名称:版本</span><br><span class="line">docker build  -t 镜像名称:版本 .</span><br><span class="line">#dockfile文件名可以命名为centos_dockfile.......</span><br><span class="line">例如：</span><br><span class="line">docker build -t hexo:1.0 -f /home/jian/dockerfile/hexo_dockerfile . #这个点无论如何都好像不能省</span><br></pre></td></tr></table></figure><p>参数：</p><ul><li><code>-f</code>：<code>dockerfile</code>、<code>centos_dockerfile</code>之类的文件路径。</li><li><code>-t</code>：指定镜像名称。</li><li><code>.</code>：上下文路径，默认为<code>dockerfile</code>文件所在的位置，可以指定绝对路径，但即使是绝对路径<code>.</code>也不能省。</li><li>上下文路径下不要放无用的文件，因为会一起打包发送给<code>docker</code>引擎，如果文件过多会造成过程缓慢。</li></ul><p>例如1：</p><p>要求：自定义<code>centos7</code>镜像，默认登陆路径为<code>/usr</code>，可以使用<code>vim</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM centos:7 #定义父镜像</span><br><span class="line">MAINTAINER jiansreer &lt;me@heyjian.cn&gt; #定义作者信息</span><br><span class="line">RUN yum install -y vim #执行安装vim命令</span><br><span class="line">WORKDIR /usr #定义默认的工作目录</span><br><span class="line">CMD /bin/bash #定义容器启动执行的命令</span><br></pre></td></tr></table></figure><p>使用<code>dockerfile</code>构建<code>docker</code>镜像：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -f &#x27;dockfile路径&#x27; -t &#x27;镜像名称:版本&#x27;</span><br><span class="line">#dockfile文件名可以命名为centos_dockfile.......</span><br></pre></td></tr></table></figure><p>例如2：</p><p>要求：定义<code>docker</code>，发布<code>springboot</code>项目。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FROM java:8</span><br><span class="line">MAINTAINER jiansreer &lt;me@heyjian.cn&gt;</span><br><span class="line">ADD springboot.jar app.jar #将jar包添加到容器，改名为 app.jar</span><br><span class="line">CMD java -jar app.jar</span><br></pre></td></tr></table></figure><h1 id="docker服务编排"><a href="#docker服务编排" class="headerlink" title="docker服务编排"></a>docker服务编排</h1><p>微服务架构的应用系统一般包含若干个微服务，每个微服务一般都会部署多个实例，如果每个微服务都要手动启停，维护的工作量会很大。</p><ul><li>要从<code>dockerfile</code>或者从<code>dockerhub</code>拉取<code>image</code>。</li><li>要创建多个<code>container</code>。</li><li>要管理(启动、停止、删除)这些<code>container</code>。</li></ul><p>服务编排：按照一定的业务规则批量管理容器。</p><h1 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker compose"></a>docker compose</h1><p><code>docker compose</code>是用于定义和运行多容器<code>docker</code>应用程序的工具。通过<code>compose</code>，可以使用<code>YML</code>文件来配置应用程序需要的所有服务。然后，使用一个命令，就可以从<code>YML</code>文件配置中创建并启动所有服务。</p><p>步骤：</p><ul><li>使用<code>dockerfile</code>定义运行程序的环境。</li><li>使用<code>docker-compose.yml</code>定义构成应用程序的服务，这样它们可以在隔离环境中一起运行。</li><li>最后，执行<code>docker-compose up</code>命令来启动并运行整个应用程序。</li></ul><p><code>docker compose</code>在参照官方教程时就已经安装好。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose version #查看docker compose版本</span><br></pre></td></tr></table></figure><p>案例：</p><p>使用<code>docker compose</code>编排<code>nginx+springboot</code>项目。</p><p>创建<code>docker-compose</code>目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/docker-compose #这里的目录名随便写，例如 mkdir ~/composetest</span><br><span class="line">cd ~/docker-compose</span><br></pre></td></tr></table></figure><p>编写<code>docker-compose.yml</code>文件。</p><p><code>vim docker-compose.yml</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">version: &#x27;3&#x27;</span><br><span class="line">services:</span><br><span class="line">nginx: #这个和app名字可以自己起，但下面的不能自己起</span><br><span class="line">container_name: nginx #容器名</span><br><span class="line">image: nignx</span><br><span class="line">ports:</span><br><span class="line">- 80:80</span><br><span class="line">links:</span><br><span class="line">   - app</span><br><span class="line">        volumes:</span><br><span class="line">   - ./nginx/conf.d:/etc/nginx/conf.d</span><br><span class="line">app:</span><br><span class="line">container_name: nginx</span><br><span class="line">image: app</span><br><span class="line">expose:</span><br><span class="line">- &quot;8080&quot;</span><br></pre></td></tr></table></figure><p>创建<code>./nginx/conf.d</code>目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ./nginx/conf.d #确保目录名称存在，不存在的就建一个</span><br></pre></td></tr></table></figure><p>在<code>./nginx/conf.d</code>目录下，编写<code>test.conf</code>配置文件。（<code>.conf</code>前面的随便写，只要有<code>.conf</code>即可。）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">listen 80:</span><br><span class="line">access_log off:</span><br><span class="line">location / &#123;</span><br><span class="line">proxy_pass http://app:8000</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>启动。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up</span><br></pre></td></tr></table></figure></li></ol><h1 id="docker容器其他互联方法"><a href="#docker容器其他互联方法" class="headerlink" title="docker容器其他互联方法"></a>docker容器其他互联方法</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create -d bridge 网络名</span><br></pre></td></tr></table></figure><p>参数：</p><ul><li><code>-d</code>：指定<code>docker</code>类型，有<code>bridge</code>、<code>overlay</code>。</li></ul><p>连接容器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name 容器1 --network 网络名 镜像:标签 /bin/bash</span><br><span class="line">docker run -itd --name 容器2 --network 网络名 镜像:标签 /bin/bash</span><br></pre></td></tr></table></figure><h1 id="docker仓库管理"><a href="#docker仓库管理" class="headerlink" title="docker仓库管理"></a>docker仓库管理</h1><p>登陆<code>docker hub</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br></pre></td></tr></table></figure><p>退出<code>docker hub</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logout</span><br></pre></td></tr></table></figure><p>推送镜像：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push 账号名/镜像名:标签</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 常用指令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> 常用指令 </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>将hexo部署到服务器上</title>
      <link href="/2023/02/01/%E5%B0%86hexo%E9%83%A8%E7%BD%B2%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A/"/>
      <url>/2023/02/01/%E5%B0%86hexo%E9%83%A8%E7%BD%B2%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A/</url>
      
        <content type="html"><![CDATA[<blockquote><p>最近，在阿里云淘了一台2核2G1Mbps的云服务器，有效期一年，就想着折腾一下，先在服务器上建立一个自己的博客，仅对自己开放（国内服务器，懒得备案了）。然后我wordpress和typecho都试了一下，发现都要自己重头开始配置，嫌麻烦，太费时间了，索性就用hexo静态博客了。</p></blockquote><h1 id="直接在服务器上搭建"><a href="#直接在服务器上搭建" class="headerlink" title="直接在服务器上搭建"></a>直接在服务器上搭建</h1><ol><li><p>前提。</p><p>已经搭建好<a href="https://www.heyjian.cn/2023/02/01/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BAgit%E6%9C%8D%E5%8A%A1%E5%99%A8/"><code>git</code>服务器</a>。</p></li><li><p>创建仓库。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /home/git/gitrepo</span><br><span class="line">git init --bare blog.git</span><br></pre></td></tr></table></figure></li><li><p>配置git-hooks</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd blog.git/hooks</span><br><span class="line">vim post-receive</span><br></pre></td></tr></table></figure><p>在<code>post-receive</code>文件中添加下述内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">git --work-tree=/www/wwwroot/myblog --git-dir=/home/git/gitrepo/blog.git checkout -f</span><br></pre></td></tr></table></figure><p>上述代码意思是把提交到<code>git</code>仓库的文件同步到博客目录中，我的博客目录为:<code>/www/wwwroot/myblog</code>。</p><p>为其添加权限并改变博客文件所有者：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /home/git/gitrepo/blog.git/hooks/post-receive</span><br><span class="line">chown -R git:git /home/git/gitrepo/blog.git</span><br></pre></td></tr></table></figure></li><li><p>创建博客目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir /www/wwwroot/myblog</span><br><span class="line">chown -R git:git /www/wwwroot/myblog</span><br><span class="line">chmod -R 755 /www/wwwroot/myblog</span><br></pre></td></tr></table></figure></li><li><p>配置本地站点文件。</p><p>打开<code>_config.yml</code>文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">- type: git</span><br><span class="line">  repo: git@github.com:jianerssr/jianerssr.github.io.git</span><br><span class="line">  branch: main</span><br><span class="line">- type: git #自己服务器网站</span><br><span class="line">  repo: git@myip:/home/git/gitrepo/blog.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><p>over，尽情地<code>hexo &amp;&amp; clean &amp;&amp; hexo g &amp;&amp; hexo d</code>吧。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 云服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> git </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何搭建git服务器</title>
      <link href="/2023/02/01/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BAgit%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2023/02/01/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BAgit%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<blockquote><p>本文章仅仅只是最基础的git服务器搭建方法，不是基于gitlab、gitea搭建的git                                          服务器。</p><p>前提：默认服务器已装好git。                                                                     </p></blockquote><h1 id="创建git用户并设置密码"><a href="#创建git用户并设置密码" class="headerlink" title="创建git用户并设置密码"></a>创建git用户并设置密码</h1><p>利用<code>git</code>用户来管理<code>git</code>服务器。</p><p><code>root</code>账户下进行下述操作。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd -m git</span><br><span class="line">passwd git</span><br></pre></td></tr></table></figure><h1 id="配置ssh-key"><a href="#配置ssh-key" class="headerlink" title="配置ssh key"></a>配置ssh key</h1><p><code>git</code>账户下进行下述操作。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - git</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /home/git/</span><br><span class="line">mkdir .ssh</span><br><span class="line">chmod 755 .ssh</span><br><span class="line">touch .ssh/authorized_keys</span><br><span class="line">chmod 644 .ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>然后将本地已经创建好的<code>ssh</code>公钥写进<code>authorized_keys</code>文件中，一行一个公钥。</p><h1 id="创建git仓库并初始化"><a href="#创建git仓库并初始化" class="headerlink" title="创建git仓库并初始化"></a>创建git仓库并初始化</h1><p>同<code>git</code>账户下进行。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /home/git/</span><br><span class="line">mkdir gitrepo</span><br><span class="line">cd gitrepo</span><br><span class="line">git init --bare first.git</span><br></pre></td></tr></table></figure><p>以后可用<code>git init --bare</code>指令创建多个空仓库。</p><h1 id="克隆仓库验证是否配置正确"><a href="#克隆仓库验证是否配置正确" class="headerlink" title="克隆仓库验证是否配置正确"></a>克隆仓库验证是否配置正确</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone git@my ip:/home/git/gitrepo/first.git</span><br></pre></td></tr></table></figure><h1 id="限制git用户"><a href="#限制git用户" class="headerlink" title="限制git用户"></a>限制git用户</h1><p>为了系统安全，在<code>root</code>账户下，限制<code>git</code>用户，使其活动限制在于<code>git</code>指令相关的范围。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh git -s $(which git-shell)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 云服务器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客魔改内容（二）</title>
      <link href="/2023/01/25/%E5%8D%9A%E5%AE%A2%E9%AD%94%E6%94%B9%E5%86%85%E5%AE%B9%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2023/01/25/%E5%8D%9A%E5%AE%A2%E9%AD%94%E6%94%B9%E5%86%85%E5%AE%B9%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="博客页脚自定义"><a href="#博客页脚自定义" class="headerlink" title="博客页脚自定义"></a>博客页脚自定义</h1><p>来源：<a href="https://blog.leonus.cn/2022/footer.html">博客底部运行时间</a></p><ol><li><p>打开<code>_config.butterfly.yml</code>文件，更改<code>footer_bg</code>设置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">footer_bg: transparent</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/css/custom.css</code>文件中插入。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*页脚设置*/</span></span><br><span class="line"><span class="selector-id">#footer</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer-wrap</span> &#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#4c4948</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>随后，博客页脚与博客主体融为一体，页脚字体清晰，没有之前那种颜色差带来的割裂感。</p></li><li><p>页脚底部设置网站运行时间。</p><p>打开<code>_config.butterfly.yml</code>文件，更改<code>custom_text</code>设置。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">custom_text: &lt;div class=&quot;footer_custom_text_motto&quot;&gt;弃我去者，昨日之日不可留；乱我心者，今日之日多烦忧&lt;/div&gt;&lt;div id=&quot;runtime&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>打开<code>/source/js/custom.js</code>，插入代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//页脚底部运行时间</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// let create_time = Math.round(new Date(&#x27;2023-01-14 22:00:00&#x27;).getTime() / 1000); //在此行修改建站时间</span></span><br><span class="line">    <span class="comment">// 有苹果用户发现safari浏览器不能正常运行，百度了一下发现是格式化的问题，改成下面这种应该就可以了。感谢反馈。</span></span><br><span class="line">    <span class="keyword">let</span> create_time = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2023/01/14 22:00:00&#x27;</span>).<span class="title function_">getTime</span>() / <span class="number">1000</span>); <span class="comment">//在此行修改建站时间</span></span><br><span class="line">    <span class="keyword">let</span> timestamp = <span class="title class_">Math</span>.<span class="title function_">round</span>((<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()) / <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">let</span> second = timestamp - create_time;</span><br><span class="line">    <span class="keyword">let</span> time = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">var</span> nol = <span class="keyword">function</span>(<span class="params">h</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> h &gt; <span class="number">9</span> ? h : <span class="string">&#x27;0&#x27;</span> + h;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">24</span> * <span class="number">3600</span>) &#123;</span><br><span class="line">        time[<span class="number">0</span>] = <span class="built_in">parseInt</span>(second / (<span class="number">24</span> * <span class="number">3600</span>));</span><br><span class="line">        second %= <span class="number">24</span> * <span class="number">3600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">3600</span>) &#123;</span><br><span class="line">        time[<span class="number">1</span>] = <span class="title function_">nol</span>(<span class="built_in">parseInt</span>(second / <span class="number">3600</span>));</span><br><span class="line">        second %= <span class="number">3600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">        time[<span class="number">2</span>] = <span class="title function_">nol</span>(<span class="built_in">parseInt</span>(second / <span class="number">60</span>));</span><br><span class="line">        second %= <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        time[<span class="number">3</span>] = <span class="title function_">nol</span>(second);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> currentTimeHtml = <span class="string">&quot;&quot;</span></span><br><span class="line">    currentTimeHtml += <span class="string">&#x27; 本站已安全运行 &#x27;</span> + time[<span class="number">0</span>] + <span class="string">&#x27; 天 &#x27;</span> + time[<span class="number">1</span>] + <span class="string">&#x27; 小时 &#x27;</span> + time[<span class="number">2</span>] + <span class="string">&#x27; 分 &#x27;</span> + time[<span class="number">3</span>] + <span class="string">&#x27; 秒 &#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;runtime&quot;</span>).<span class="property">innerHTML</span> = currentTimeHtml;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure></li></ol><h1 id="gitcalender"><a href="#gitcalender" class="headerlink" title="gitcalender"></a>gitcalender</h1><p>来源：<a href="https://www.fomal.cc/posts/eec9786.html#GitCalendar-%E5%BA%97%E9%95%BF">博客魔改教程总结（一）</a></p><ol><li><p>自定义api。</p><p>在<code>github</code>上<code>fork</code><a href="https://github.com/Zfour/python_github_calendar_api">Zfour&#x2F;python_github_calendar_api</a>，根据教程自建api。</p><p>注：<code>github</code>页面已改版，需要修改一下，原作者暂未修改。</p></li><li><p>安装插件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-filter-gitcalendar --save</span><br></pre></td></tr></table></figure></li><li><p>在<code>_config.yml</code>中添加配置文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># hexo-filter-gitcalendar</span><br><span class="line">gitcalendar:</span><br><span class="line">  enable: true # 开关</span><br><span class="line">  priority: 5 #过滤器优先权，数值越小，执行越早，默认为10，选填</span><br><span class="line">  enable_page: /about/ # 应用页面,若要应用于所有页面，就填’all’，默认为’/‘</span><br><span class="line">  # butterfly挂载容器</span><br><span class="line">  layout: </span><br><span class="line">    type: id #挂载容器类型，填写id或class，不填则默认为id</span><br><span class="line">    name: gitcalendar #挂载容器名称</span><br><span class="line">    index: 0 #前提是layout.type为class，因为同一页面可能有多个class，此项用来确认究竟排在第几个顺位</span><br><span class="line">  user: jianerssr #git用户名</span><br><span class="line">  apiurl: &#x27;https://gitcalendar.heyjian.cn&#x27;# 这是我的API，最好自己弄一个</span><br><span class="line">  minheight:</span><br><span class="line">    pc: 280px #桌面端最小高度</span><br><span class="line">    mibile: 0px #移动端最小高度</span><br><span class="line">  #color: &quot;[&#x27;#d9e0df&#x27;, &#x27;#c6e0dc&#x27;, &#x27;#a8dcd4&#x27;, &#x27;#9adcd2&#x27;, &#x27;#89ded1&#x27;, &#x27;#77e0d0&#x27;, &#x27;#5fdecb&#x27;, &#x27;#47dcc6&#x27;, &#x27;#39dcc3&#x27;, &#x27;#1fdabe&#x27;, &#x27;#00dab9&#x27;]&quot; </span><br><span class="line">  # &quot;[&#x27;#e4dfd7&#x27;, &#x27;#f9f4dc&#x27;, &#x27;#f7e8aa&#x27;, &#x27;#f7e8aa&#x27;, &#x27;#f8df72&#x27;, &#x27;#fcd217&#x27;, &#x27;#fcc515&#x27;, &#x27;#f28e16&#x27;, &#x27;#fb8b05&#x27;, &#x27;#d85916&#x27;, &#x27;#f43e06&#x27;]&quot; #橘黄色调</span><br><span class="line">    #color: &quot;[&#x27;#ebedf0&#x27;, &#x27;#fdcdec&#x27;, &#x27;#fc9bd9&#x27;, &#x27;#fa6ac5&#x27;, &#x27;#f838b2&#x27;, &#x27;#f5089f&#x27;, &#x27;#c4067e&#x27;, &#x27;#92055e&#x27;, &#x27;#540336&#x27;, &#x27;#48022f&#x27;, &#x27;#30021f&#x27;]&quot; #浅紫色调</span><br><span class="line">  color: &quot;[&#x27;#ebedf0&#x27;, &#x27;#f0fff4&#x27;, &#x27;#dcffe4&#x27;, &#x27;#bef5cb&#x27;, &#x27;#85e89d&#x27;, &#x27;#34d058&#x27;, &#x27;#28a745&#x27;, &#x27;#22863a&#x27;, &#x27;#176f2c&#x27;, &#x27;#165c26&#x27;, &#x27;#144620&#x27;]&quot; #翠绿色调</span><br><span class="line">  # color: &quot;[&#x27;#ebedf0&#x27;, &#x27;#f1f8ff&#x27;, &#x27;#dbedff&#x27;, &#x27;#c8e1ff&#x27;, &#x27;#79b8ff&#x27;, &#x27;#2188ff&#x27;, &#x27;#0366d6&#x27;, &#x27;#005cc5&#x27;, &#x27;#044289&#x27;, &#x27;#032f62&#x27;, &#x27;#05264c&#x27;]&quot; #天青色调</span><br><span class="line">  container: .recent-post-item(style=&#x27;width:100%;height:auto;padding:10px;&#x27;) #父元素容器，需要使用pug语法</span><br><span class="line">  gitcalendar_css: https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css</span><br><span class="line">  gitcalendar_js: https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js</span><br></pre></td></tr></table></figure><p>gitcalendar默认挂在首页，如果不想挂在首页除需更改<code>enable_page:</code>项为相应页面外，还需在相应页面写入一个<code>div</code>块。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- GitCalendar容器 --&gt;</span><br><span class="line">&lt;div id=&quot;gitcalendar&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>注：此处id名一定要跟<code>layout.name</code>一致。</p></li></ol><h1 id="页面样式调节"><a href="#页面样式调节" class="headerlink" title="页面样式调节"></a>页面样式调节</h1><p>来源：<a href="https://www.fomal.cc/posts/5389e93f.html">博客魔改教程总结（二）</a></p><ol><li><p>在<code>/source/css/custom.css</code>中插入。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*页面样式调节*/</span></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--trans-light</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.88</span>);</span><br><span class="line">  <span class="attr">--trans-dark</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.88</span>);</span><br><span class="line">  <span class="attr">--border-style</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">169</span>, <span class="number">169</span>, <span class="number">169</span>);</span><br><span class="line">  <span class="attr">--backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">5px</span>) <span class="built_in">saturate</span>(<span class="number">150%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 首页文章卡片 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 首页侧栏卡片 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 文章页、归档页、普通页面 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#page</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 导航栏 */</span></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.75</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式遮罩 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#archive</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式页脚页头遮罩透明 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 阅读模式 */</span></span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式下的阅读模式 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>备注。</p><p> <code>-trans-light:</code>日间模式背景色<br> <code>--trans-dark: </code>夜间模式背景色<br> <code>--border-style:</code> 边框样式<br><code>--backdrop-filter:</code>b背景过滤器</p><p>懒得改了，就这个样式了。</p></li></ol><h1 id="导航栏美化"><a href="#导航栏美化" class="headerlink" title="导航栏美化"></a>导航栏美化</h1><p>来源：<a href="https://yisous.xyz/posts/895003b5/#%E5%89%8D%E8%A8%80">关于butterfly的导航栏的一些教程</a></p><ol><li><p>分离搜索栏与菜单栏。</p><p>打开<code>/themes/butterfly/layout/includes/header/nav.pug</code></p><p>原代码为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- const isFixedClass = theme.nav.fixed ? &#x27;fixed&#x27; : &#x27;&#x27;</span><br><span class="line">nav#nav(class=isFixedClass)</span><br><span class="line">  span#blog-info</span><br><span class="line">    a(href=url_for(&#x27;/&#x27;) title=config.title)</span><br><span class="line">      if theme.nav.logo</span><br><span class="line">        img.site-icon(src=url_for(theme.nav.logo))</span><br><span class="line">      if theme.nav.display_title</span><br><span class="line">        span.site-name=config.title</span><br><span class="line">    </span><br><span class="line">  #menus</span><br><span class="line">    if (theme.algolia_search.enable || theme.local_search.enable)</span><br><span class="line">      #search-button</span><br><span class="line">        a.site-page.social-icon.search(href=&quot;javascript:void(0);&quot;)</span><br><span class="line">          i.fas.fa-search.fa-fw</span><br><span class="line">          span=&#x27; &#x27;+_p(&#x27;search.title&#x27;)</span><br><span class="line">    !=partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"></span><br><span class="line">    #toggle-menu</span><br><span class="line">      a.site-page(href=&quot;javascript:void(0);&quot;)</span><br><span class="line">        i.fas.fa-bars.fa-fw</span><br></pre></td></tr></table></figure><p>改为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- const isFixedClass = theme.nav.fixed ? &#x27;fixed&#x27; : &#x27;&#x27;</span><br><span class="line">nav#nav(class=isFixedClass)</span><br><span class="line">  span#blog-info</span><br><span class="line">    a#site-name(href=url_for(&#x27;/&#x27;))</span><br><span class="line">      if theme.nav.logo</span><br><span class="line">        img.site-icon(src=url_for(theme.nav.logo))</span><br><span class="line">      if theme.nav.display_title</span><br><span class="line">        span.sitename=config.title</span><br><span class="line">   </span><br><span class="line">  #menus</span><br><span class="line">  !=partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line"></span><br><span class="line">  #nav-right</span><br><span class="line">    if (theme.algolia_search.enable || theme.local_search.enable)</span><br><span class="line">      #search-button</span><br><span class="line">        a.site-page.social-icon.search</span><br><span class="line">          i.fas.fa-search.fa-fw</span><br><span class="line"></span><br><span class="line">      #toggle-menu</span><br><span class="line">        a.site-page</span><br><span class="line">          i.fas.fa-bars.fa-fw</span><br></pre></td></tr></table></figure></li><li><p>导航栏居中。</p><p>在<code>/sourcr/cs/custom.css</code>中添加：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#nav-right</span>&#123;</span><br><span class="line">    <span class="attribute">flex</span>:<span class="number">1</span> <span class="number">1</span> auto;</span><br><span class="line">    <span class="attribute">justify-content</span>: flex-end;</span><br><span class="line">    <span class="attribute">margin-left</span>: auto;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>:nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>去掉导航栏项目底下的蓝色长条。</p><p>在自定义<code>css</code>文件中添加：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#nav</span> *<span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: transparent<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>子菜单栏横向布局。</p><p>同上文件中，添加：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.menus_item_child</span> <span class="selector-tag">li</span><span class="selector-pseudo">:not</span>(<span class="selector-id">#sidebar-menus</span> <span class="selector-tag">li</span>)&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -webkit-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -moz-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -ms-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">    -o-<span class="attribute">border-radius</span>: <span class="number">6px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.menus_item_child</span><span class="selector-pseudo">:not</span>(<span class="selector-id">#sidebar-menus</span> <span class="selector-tag">ul</span>)&#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">    left:calc(-150%)!important;这是估算值，为了保持元素居中的，如果不合适可以自己调</span></span><br><span class="line"><span class="comment">  改为：*/</span></span><br><span class="line">  <span class="attribute">left</span>:<span class="number">50%</span>;</span><br><span class="line">  translate:-<span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>网站标题的增强版。</p><p>即鼠标悬浮在左上角的网站名时，显示主页图标。</p><p>同上文件夹，添加：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*左上角标题移动*/</span></span><br><span class="line"><span class="selector-id">#site-name</span>&#123;</span><br><span class="line"><span class="attribute">left</span>:<span class="number">25px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#site-name</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#3366ff</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -webkit-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -moz-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -ms-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    -o-<span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">right</span>:<span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&quot;\f015&quot;</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#3366ff</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: FontAwesome;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>:white;</span><br><span class="line">    <span class="attribute">line-height</span>:<span class="number">34px</span>;<span class="comment">/*如果有溢出或者垂直不居中的现象微调一下这个参数*/</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;<span class="comment">/*根据个人喜好*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#site-name</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    scale:<span class="number">1.05</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#site-name</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24px</span>; <span class="comment">/*一定要把字体调大点，否则效果惨不忍睹！*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注：此处有个<code>bug</code>，原文 <code>font-family:</code>为<code> &quot;Font Awesome 6 Free&quot;;</code>，但这样主页图标乱码，我改成<code> FontAwesome;</code>就好了，真神奇。</p></li><li><p>显示标题。</p><p>同样打开<code>/themes/butterfly/layout/includes/header/nav.pug</code>文件，在<code>!=partial(&#39;includes/header/menu_item&#39;, &#123;&#125;, &#123;cache: true&#125;)</code>下添加代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">!=partial(&#x27;includes/header/menu_item&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">  center(id=&quot;name-container&quot;)</span><br><span class="line">    a(id=&quot;page-name&quot; href=&quot;javascript:scrollToTop()&quot;) PAGE_NAME</span><br></pre></td></tr></table></figure><p>打开自定义<code>js</code>文件，添加代码:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//js有一个小问题：就是只要鼠标滚动不论哪里都会响应，即便你滚动的是子元素</span></span><br><span class="line"><span class="comment">//2022.9.11 已修复，需要jq，请自行引入</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;display:none&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> position = $(<span class="variable language_">window</span>).<span class="title function_">scrollTop</span>();</span><br><span class="line">$(<span class="variable language_">window</span>).<span class="title function_">scroll</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> scroll = $(<span class="variable language_">window</span>).<span class="title function_">scrollTop</span>();</span><br><span class="line">  <span class="keyword">if</span> (scroll &gt; position) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;menus_items&quot;</span>)[<span class="number">1</span>].<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;display:none!important&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;menus_items&quot;</span>)[<span class="number">1</span>].<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>, <span class="string">&quot;display:none&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  position = scroll;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">scrollToTop</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;menus_items&quot;</span>)[<span class="number">1</span>].<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name-container&quot;</span>).<span class="title function_">setAttribute</span>(<span class="string">&quot;style&quot;</span>,<span class="string">&quot;display:none&quot;</span>);</span><br><span class="line">    btf.<span class="title function_">scrollToDest</span>(<span class="number">0</span>, <span class="number">500</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//修复没有弄右键菜单的童鞋无法回顶部的问题</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;page-name&quot;</span>).<span class="property">innerText</span> = <span class="variable language_">document</span>.<span class="property">title</span>.<span class="title function_">split</span>(<span class="string">&quot; | jianerssr的个人小屋&quot;</span>)[<span class="number">0</span>];</span><br></pre></td></tr></table></figure><p>打开自定义文件夹，添加代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#page-name</span><span class="selector-pseudo">::before</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">color</span>:white<span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">&#x27;回到顶部&#x27;</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#3366ff</span>;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="number">#3366ff</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">45px</span>; <span class="comment">/*如果垂直位置不居中可以微调此值，也可以删了*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-name</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:before</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">900px</span>)&#123;</span><br><span class="line">    <span class="selector-id">#page-name</span>,<span class="selector-id">#menus</span>&#123;</span><br><span class="line">      <span class="attribute">display</span>:none<span class="meta">!important</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#name-container</span>&#123;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -moz-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -ms-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">    -o-<span class="attribute">transition</span>: all .<span class="number">3s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#name-container</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    scale:<span class="number">1.03</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-name</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding</span>:<span class="number">10px</span> <span class="number">30px</span><span class="comment">/*如果文字间隔不合理可以微调修改，第二个是水平方向的padding，第一个是垂直的*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#nav</span>&#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="通过GitHub-Actions自动化部署hexo博客（已弃用）"><a href="#通过GitHub-Actions自动化部署hexo博客（已弃用）" class="headerlink" title="通过GitHub Actions自动化部署hexo博客（已弃用）"></a>通过GitHub Actions自动化部署hexo博客（已弃用）</h1><blockquote><p>猛然发现，使用Github Actions后，更新日期全部刷新。因此，我又重新看了一下下述代码，发现每次git push提交后，工作流都会在public文件夹下重新生成一次仓库，再覆盖jianerssr.github.io原有仓库，除非每篇文章自定义updated，不然博客仓库相当于一直都是新仓库，没想到解决办法，遂弃用。<br>而hexo为什么可以保持更新记录呢？我理解是因为输入hexo g指令后，生成publi文件夹，与此同时，public文件夹下的内容复制到.deploy_git文件夹下。该文件夹有个.git文件夹，可以推断，这个仓库是jianerssr.github.io的本地仓库，hexo代替我们执行了git指令。</p></blockquote><p>来源：<a href="https://akilar.top/posts/f752c86d/">使用Github Action实现全自动部署</a></p><ol><li><p>获取Token。</p><p>记得勾选<code>repo</code>以及<code>workflows</code>项，<code>Token</code>有效期设为永久。</p></li><li><p>github上创建私有仓库。</p><p>防止<code>Token</code>泄露。</p></li><li><p>配置Github Action</p><p>打开<code>.github</code>文件夹，新建<code>workflows</code>文件夹，并在该文件夹下新建<code>autodeploy.yml</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"># 当有改动推送到master分支时，启动Action</span><br><span class="line">name: 自动部署</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    branches:</span><br><span class="line">      - main #2020年10月后github新建仓库默认分支改为main，注意更改</span><br><span class="line"></span><br><span class="line">  release:</span><br><span class="line">    types:</span><br><span class="line">      - published</span><br><span class="line"></span><br><span class="line">jobs:</span><br><span class="line">  deploy:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    steps:</span><br><span class="line">    - name: 检查分支</span><br><span class="line">      uses: actions/checkout@v2</span><br><span class="line">      with:</span><br><span class="line">        ref: main #2020年10月后github新建仓库默认分支改为main，注意更改</span><br><span class="line"></span><br><span class="line">    - name: 安装 Node</span><br><span class="line">      uses: actions/setup-node@v1</span><br><span class="line">      with:</span><br><span class="line">        node-version: &quot;14.17.6&quot; #action使用的node版本，建议大版本和本地保持一致。可以在本地用node -v查询版本号。</span><br><span class="line"></span><br><span class="line">    - name: 安装 Hexo</span><br><span class="line">      run: |</span><br><span class="line">        export TZ=&#x27;Asia/Shanghai&#x27;</span><br><span class="line">        npm install hexo-cli -g</span><br><span class="line"></span><br><span class="line">    - name: 缓存 Hexo</span><br><span class="line">      uses: actions/cache@v1</span><br><span class="line">      id: cache</span><br><span class="line">      with:</span><br><span class="line">        path: node_modules</span><br><span class="line">        key: $&#123;&#123;runner.OS&#125;&#125;-$&#123;&#123;hashFiles(&#x27;**/package-lock.json&#x27;)&#125;&#125;</span><br><span class="line"></span><br><span class="line">    - name: 安装依赖</span><br><span class="line">      if: steps.cache.outputs.cache-hit != &#x27;true&#x27;</span><br><span class="line">      run: |</span><br><span class="line">        npm install --save</span><br><span class="line"></span><br><span class="line">    - name: 生成静态文件</span><br><span class="line">      run: |</span><br><span class="line">        hexo clean</span><br><span class="line">        hexo generate</span><br><span class="line"></span><br><span class="line">    - name: 部署 #此处master:master 指从本地的master分支提交到远程仓库的master分支，若远程仓库没有对应分支则新建一个。如有其他需要，可以根据自己的需求更改。</span><br><span class="line">      run: |</span><br><span class="line">        cd ./public</span><br><span class="line">        git init</span><br><span class="line">        git config --global user.name &#x27;$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;&#x27;</span><br><span class="line">        git config --global user.email &#x27;$&#123;&#123; secrets.GITHUBEMAIL &#125;&#125;&#x27;</span><br><span class="line">        git add .</span><br><span class="line">        git commit -m &quot;$&#123;&#123; github.event.head_commit.message &#125;&#125; $(date +&quot;%Z %Y-%m-%d %A %H:%M:%S&quot;) Updated By Github Actions&quot;</span><br><span class="line">        git push --force --quiet &quot;https://$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;:$&#123;&#123; secrets.GITHUBTOKEN &#125;&#125;@github.com/$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;/$&#123;&#123; secrets.GITHUBUSERNAME &#125;&#125;.github.io.git&quot; master:main</span><br><span class="line">        #git push --force --quiet &quot;https://$&#123;&#123; secrets.TOKENUSER &#125;&#125;:$&#123;&#123; secrets.CODINGTOKEN &#125;&#125;@e.coding.net/$&#123;&#123; secrets.CODINGUSERNAME &#125;&#125;/$&#123;&#123;  secrets.CODINGBLOGREPO &#125;&#125;.git&quot; master:master #coding部署写法，需要的自行取消注释</span><br><span class="line">        #git push --force --quiet &quot;https://$&#123;&#123; secrets.GITEEUSERNAME &#125;&#125;:$&#123;&#123; secrets.GITEETOKEN &#125;&#125;@gitee.com/$&#123;&#123; secrets.GITEEUSERNAME &#125;&#125;/$&#123;&#123; secrets.GITEEUSERNAME &#125;&#125;.git&quot; master:master #gitee部署写法，需要的自行取消注释</span><br></pre></td></tr></table></figure><blockquote><p>最后一行的master:main 指从工作流使用git创建的仓库master分支(该分支是默认的，不是电脑本地的仓库，是工作流系统中再次创立的仓库)提交到jianerssr.github.io的main分支。</p></blockquote></li><li><p>在私有源代码仓库添加环境变量。</p><p><code>Setting-&gt;Secrets-&gt;actions</code></p><p>根据<code>autodeploy.yml</code>配置文件添加。</p></li><li><p>提交代码。</p><p>删除<code>/themes/butterfly/.git</code>文件夹。</p><p>执行下述指令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin git@私有仓库地址</span><br><span class="line">git branch -M main</span><br></pre></td></tr></table></figure><p>打开<code>.gitignore</code>文件添加屏蔽项，减少文件提交量，加快速度。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br><span class="line">.deploy_git*/</span><br><span class="line">.idea</span><br><span class="line">themes/butterfly/.git</span><br></pre></td></tr></table></figure><p>最后：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;随便&quot;</span><br><span class="line">git push</span><br><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure></li></ol><h1 id="关于界面"><a href="#关于界面" class="headerlink" title="关于界面"></a>关于界面</h1><p>来源：<a href="https://anzhiy.cn/about/">安知鱼</a>。</p><blockquote><p>虽然安知鱼有其关于界面的设置教程，但我需要的部分也只是其中一点点，因此直接F12从安知鱼关于界面扒了源码，理解相对方便一些。</p></blockquote><ol><li><p>新建关于页面。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page about</span><br></pre></td></tr></table></figure></li><li><p>编辑html。</p><p>打开<code>/source/about/index.md</code>，直接在<code>md</code>文档里编辑<code>html</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 关于</span><br><span class="line">date: 2023-01-16 12:44:15</span><br><span class="line">aside: false</span><br><span class="line">comments: false</span><br><span class="line">top_img: false</span><br><span class="line">---</span><br><span class="line">&lt;div id=&quot;about-page&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;author-box&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;author-img&quot;&gt;</span><br><span class="line">            &lt;img class=&quot;no-lightbox &quot; src=&quot;https://img.heyjian.cn/1.jpg&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;image-dot&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;p class=&quot;p center logo large&quot;&gt;个人简介&lt;/p&gt; </span><br><span class="line">    &lt;p class=&quot;p center small&quot;&gt;我这么可爱，怎么可能没有个人简介呢(●&#x27;◡&#x27;●)&lt;/p&gt;</span><br><span class="line">    &lt;div class=&quot;author-content&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;author-content-item myInfoAndSayHello&quot;&gt;</span><br><span class="line">            &lt;div class=author-content-item-tips&gt;我的基本信息&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;title1&quot;&gt;大家好&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;title2&quot;&gt;我是 </span><br><span class="line">                &lt;span class=&quot;inline-word&quot;&gt;jianerssr&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;title1&quot;&gt;是一名 环境工程专业研究生、 新人博主、 十级懒癌患者、职业摸鱼选手</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;aboutsiteTips author-content-item&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;author-content-item-tips&quot;&gt;人生追求&lt;/div&gt;</span><br><span class="line">            &lt;h2&gt;</span><br><span class="line">                忍常人所不能忍</span><br><span class="line">                &lt;br&gt;</span><br><span class="line">                及常人所不能及</span><br><span class="line">                &lt;div class=&quot;mask&quot;&gt; </span><br><span class="line">                    &lt;span class=&quot;first-tips&quot;&gt;吃&lt;/span&gt;</span><br><span class="line">                    &lt;span&gt;喝&lt;/span&gt;</span><br><span class="line">                    &lt;span&gt;玩&lt;/span&gt;</span><br><span class="line">                    &lt;span data-up&gt;乐&lt;/span&gt;</span><br><span class="line">                    &lt;span data-show&gt;然后尽情&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/h2&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;author-content&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;author-content-item-group column mapAndInfo&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;author-content-item selfInfo single&quot;&gt;</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;span class=&quot;selfInfo-title&quot;&gt;生于&lt;/span&gt;</span><br><span class="line">                    &lt;span class=&quot;selfInfo-content&quot; id=&quot;selfInfo-content-year&quot; style=&quot;color:#43a6c6&quot;&gt;2000&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;span class=&quot;selfInfo-title&quot;&gt;本科·湘潭大学&lt;/span&gt;</span><br><span class="line">                    &lt;span class=&quot;selfInfo-content&quot; style=&quot;color:#c69043&quot;&gt;环保设备工程&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;span class=&quot;selfInfo-title&quot;&gt;硕士·西南大学&lt;/span&gt;</span><br><span class="line">                    &lt;span class=&quot;selfInfo-content&quot; style=&quot;color:#8a7cfb&quot;&gt;环境工程&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;span class=&quot;selfInfo-title&quot;&gt;现在职业&lt;/span&gt;  </span><br><span class="line">                    &lt;span class=&quot;selfInfo-content&quot; style=&quot;color:#b04fe6&quot;&gt;研究生👨‍🎓&lt;/span&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;author-content-item map single&quot;&gt;</span><br><span class="line">                 &lt;span class=&quot;map-title&quot;&gt;我现在住在 &lt;b&gt;中国，湖南省，邵阳市&lt;/b&gt;&lt;/span&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;author-content-item personalities&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;author-content-item-tips&quot;&gt;部分个人爱好&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;author-content-item-title&quot;&gt;网络小说&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;checkbox blue checked&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; checked&gt;&lt;/input&gt;</span><br><span class="line">                &lt;p&gt;绍宋&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;checkbox blue checked&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; checked&gt;&lt;/input&gt;</span><br><span class="line">                &lt;p&gt;诡秘之主&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;checkbox blue checked&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; checked&gt;&lt;/input&gt;</span><br><span class="line">                &lt;p&gt;夏天、烟火和我的尸体&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;title2&quot; style=&quot;color:#ac899c&quot;&gt;游戏&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;checkbox blue checked&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; checked&gt;&lt;/input&gt;</span><br><span class="line">                &lt;p&gt;CS:GO&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;checkbox blue checked&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; checked&gt;&lt;/input&gt;</span><br><span class="line">                &lt;p&gt;巫师3&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;checkbox blue checked&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; checked&gt;&lt;/input&gt;</span><br><span class="line">                &lt;p&gt;GTAⅤ&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;post-tips&quot;&gt;超小声嘀咕：体育运动，什么是体育运动，我这辈子都与体育运动无缘&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;p class=&quot;p center logo large&quot;&gt;网站统计&lt;/p&gt;  </span><br><span class="line">    &lt;div id=&quot;gitcalendar_total&quot;&gt;</span><br><span class="line">        &lt;!-- GitCalendar容器 --&gt;</span><br><span class="line">        &lt;div id=&quot;gitcalendar_name&quot;&gt;github贡献日历&lt;/div&gt;</span><br><span class="line">        &lt;div id=&quot;gitcalendar&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;charts_total&quot;&gt;</span><br><span class="line">        &lt;!-- 文章发布时间统计图 --&gt;</span><br><span class="line">        &lt;div id=&quot;posts-chart&quot; data-start=&quot;2023-01&quot; style=&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;!-- 文章标签统计图 --&gt;</span><br><span class="line">        &lt;div id=&quot;tags-chart&quot; data-length=&quot;10&quot; style=&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;!-- 文章分类统计图 --&gt;</span><br><span class="line">        &lt;div id=&quot;categories-chart&quot; data-parent=&quot;true&quot; style=&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;p class=&quot;p center logo large&quot;&gt;版权声明&lt;/p&gt;</span><br><span class="line">    &lt;div class=&quot;author-content&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;create-site-post author-content-item single&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;author-content-item-tips&quot;&gt;From jianerssr&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;checkbox blue checked&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; checked&gt;&lt;/input&gt;</span><br><span class="line">                &lt;p&gt;博主在本站发布的原创文章，版权均归博主本人所有。博主保留追究法律责任的权力。&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;checkbox blue checked&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; checked&gt;&lt;/input&gt;</span><br><span class="line">                &lt;p&gt;除特别声明外，本站所有文章均采用署名-非商业性使用-相同方式共享4.0(&lt;a href=&quot;https://creativecommons.org/licenses/by-nc-sa/4.0/&quot;&gt;CC BY-NC-SA 4.0&lt;/a&gt;)许可协议，如需转载，请联系博主，并注明出处。&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;checkbox blue checked&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; checked&gt;&lt;/input&gt;</span><br><span class="line">                &lt;p&gt;本站转载内容均已声明来源，如果您认为本网站转载内容侵及您的权益，同样请发邮件至&lt;a href=&quot;mailto:me@heyjian.cn&quot;&gt;me@heyjian.cn&lt;/a&gt;联系博主，博主看到后会第一时间处置。&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;checkbox blue checked&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; checked&gt;&lt;/input&gt;</span><br><span class="line">                &lt;p&gt;本站为非商业性网站，网站内容仅限个人交流学习。本站字体、图片等资源可能参考至网络，如本站资源侵权请版权方大大发邮件至&lt;a href=&quot;mailto:me@heyjian.cn&quot;&gt;me@heyjian.cn&lt;/a&gt;联系博主，博主会第一时间删除。&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;checkbox times red checked&quot;&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; checked&gt;&lt;/input&gt;</span><br><span class="line">                &lt;p&gt;未经许可，直接“借”用。&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></li><li><p>编辑css。</p><p>打开自定义<code>css</code>文件，插入：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*关于界面*/</span></span><br><span class="line"><span class="selector-id">#gitcalendar_name</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>:center;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">19px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>:bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page</span><span class="selector-pseudo">:has</span>(<span class="selector-id">#about-page</span>) &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: none <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page</span><span class="selector-pseudo">:has</span>(<span class="selector-id">#about-page</span>) <span class="selector-class">.page-title</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#about-page</span> <span class="selector-class">.author-box</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#about-page</span> <span class="selector-class">.author-box</span> <span class="selector-class">.author-img</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">180px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">180px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#about-page</span> <span class="selector-class">.author-box</span> <span class="selector-class">.author-img</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">180px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">180px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#about-page</span> <span class="selector-class">.author-box</span> <span class="selector-class">.image-dot</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#6bdf8f</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">6px</span> solid <span class="number">#ffffff</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">35px</span>, <span class="number">45px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-class">.p</span><span class="selector-class">.large</span>,<span class="selector-tag">p</span><span class="selector-class">.p</span><span class="selector-class">.small</span>&#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-class">.p</span><span class="selector-class">.large</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2.5rem</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-class">.p</span><span class="selector-class">.center</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-class">.p</span><span class="selector-class">.small</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">17px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#about-page</span> <span class="selector-class">.myInfoAndSayHello</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(<span class="number">120deg</span>, <span class="number">#5b27ff</span> <span class="number">0</span>, <span class="number">#00d4ff</span> <span class="number">100%</span>);</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">200%</span>;</span><br><span class="line">  <span class="attribute">animation</span>: gradient <span class="number">15s</span> ease infinite;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">59%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">49%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e3e8f7</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#2c2d300c</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">1rem</span> <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#about-page</span> <span class="selector-class">.myInfoAndSayHello</span> <span class="selector-class">.title1</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#about-page</span> <span class="selector-class">.myInfoAndSayHello</span> <span class="selector-class">.title2</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.1</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0.5rem</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.inline-word</span> &#123;</span><br><span class="line">  <span class="attribute">word-break</span>: keep-all;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span> <span class="selector-class">.author-content-item-tips</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: .<span class="number">8</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: .<span class="number">6rem</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: .<span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.aboutsiteTips</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">39%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aboutsiteTips</span> <span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">margin-right</span>: auto;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: Helvetica;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.06</span>;</span><br><span class="line">  <span class="attribute">letter-spacing</span>: -<span class="number">0.02em</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#4c4948</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aboutsiteTips</span> <span class="selector-class">.mask</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aboutsiteTips</span> <span class="selector-class">.mask</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="built_in">var</span>(--offset);</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span> <span class="number">100%</span>;</span><br><span class="line">  -webkit-<span class="attribute">background-clip</span>: text;</span><br><span class="line">  <span class="attribute">background-clip</span>: text;</span><br><span class="line">  -webkit-text-fill-<span class="attribute">color</span>: transparent;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aboutsiteTips</span> <span class="selector-class">.mask</span> <span class="selector-tag">span</span><span class="selector-attr">[data-show]</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">100%</span>);</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.5s</span> transform ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aboutsiteTips</span> <span class="selector-class">.mask</span> <span class="selector-tag">span</span><span class="selector-attr">[data-up]</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">200%</span>);</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.5s</span> transform ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aboutsiteTips</span> <span class="selector-class">.mask</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#ff33cc</span> <span class="number">50%</span>, <span class="number">#ff3366</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aboutsiteTips</span> <span class="selector-class">.mask</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#18e198</span> <span class="number">50%</span>, <span class="number">#0ec15d</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aboutsiteTips</span> <span class="selector-class">.mask</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#8a7cfb</span> <span class="number">50%</span>, <span class="number">#633e9c</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aboutsiteTips</span> <span class="selector-class">.mask</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#fa7671</span> <span class="number">50%</span>, <span class="number">#f45f7f</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.aboutsiteTips</span> <span class="selector-class">.mask</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child</span>(<span class="number">5</span>) &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#33ccff</span> <span class="number">50%</span>, <span class="number">#3366ff</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item-group</span><span class="selector-class">.column</span><span class="selector-class">.mapAndInfo</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">59%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item-group</span><span class="selector-class">.column</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">49%</span>;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.single</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.map</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">/img/2023020401.jpg</span>) no-repeat center;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60%</span>;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">1s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.author-content-item</span><span class="selector-class">.map</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">/img/2023020401.jpg</span>) no-repeat center;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.map</span> <span class="selector-class">.map-title</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.6</span>);</span><br><span class="line">  <span class="attribute">padding</span>: .<span class="number">5rem</span> <span class="number">2rem</span>;</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">saturate</span>(<span class="number">180%</span>) <span class="built_in">blur</span>(<span class="number">20px</span>);</span><br><span class="line">  -webkit-backdrop-<span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">20px</span>);</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">1s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.selfInfo</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">  <span class="attribute">height</span>: -webkit-fill-available;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40%</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.selfInfo</span> <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: column;</span><br><span class="line">  <span class="attribute">margin</span>: .<span class="number">5rem</span> <span class="number">2rem</span> .<span class="number">5rem</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.selfInfo</span> <span class="selector-class">.selfInfo-title</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: .<span class="number">8</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: .<span class="number">6rem</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.selfInfo</span> <span class="selector-class">.selfInfo-content</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">22.5px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.map</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">120%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">4s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">background-position</span>-x: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-position</span>-y: <span class="number">36%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.map</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.map-title</span> &#123;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.personalities</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">39%</span>;</span><br><span class="line">  <span class="attribute">min-height</span>:<span class="number">380px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span> <span class="selector-class">.author-content-item-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.author-content-item</span><span class="selector-class">.personalities</span> <span class="selector-class">.title2</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.post-tips</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999999</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">1rem</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">2rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*方框里面一个蓝底白色的勾*/</span></span><br><span class="line"><span class="selector-class">.checkbox</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span><span class="selector-class">.blue</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:checked</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#2196f3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:checked</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#2196f3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">2px</span><span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span><span class="selector-class">.blue</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#2196f3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">  -webkit-appearance: none;</span><br><span class="line">  -moz-appearance: none;</span><br><span class="line">  -ms-appearance: none;</span><br><span class="line">  -o-appearance: none;</span><br><span class="line">  appearance: none;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">15s</span> ease-out <span class="number">0s</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#2196f3</span>;</span><br><span class="line">  <span class="attribute">pointer-events</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:checked</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">7px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">6px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:after</span>, <span class="selector-class">.checkbox</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-in;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">  -moz-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">  -ms-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">  -o-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:checked</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:after</span>, <span class="selector-class">.checkbox</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">7px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transition</span>: all .<span class="number">2s</span> ease-out;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">40deg</span>);</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">40deg</span>);</span><br><span class="line">  -moz-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">40deg</span>);</span><br><span class="line">  -ms-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">40deg</span>);</span><br><span class="line">  -o-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">40deg</span>);</span><br><span class="line">  <span class="attribute">transition-delay</span>: .<span class="number">25s</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*方框里面一个红底白色的差*/</span></span><br><span class="line"><span class="selector-class">.checkbox</span><span class="selector-class">.red</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:checked</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fe5f58</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span><span class="selector-class">.red</span> <span class="selector-tag">input</span> &#123;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#fe5f58</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span><span class="selector-class">.times</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:checked</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span><span class="selector-class">.times</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">45deg</span>);</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span><span class="selector-class">.times</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:checked</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.checkbox</span><span class="selector-class">.times</span> <span class="selector-tag">input</span><span class="selector-attr">[type=checkbox]</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">135deg</span>);</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">3px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">1px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>)&#123;</span><br><span class="line">  <span class="selector-class">.author-content-item</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span><span class="meta">!important</span>;</span><br><span class="line">      <span class="attribute">margin-top</span>: <span class="number">1rem</span>;</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">1rem</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="selector-class">.author-content</span> &#123;</span><br><span class="line">      <span class="attribute">margin-top</span>: <span class="number">0</span>;&#125;</span><br><span class="line">  <span class="selector-class">.author-content-item-group</span><span class="selector-class">.column</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span><span class="meta">!important</span>;&#125;</span><br><span class="line">  <span class="selector-id">#selfInfo-content-year</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">90px</span>;&#125;</span><br><span class="line">  <span class="selector-class">.author-content-item</span><span class="selector-class">.selfInfo</span> &#123;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">95%</span>;&#125;</span><br><span class="line">  <span class="selector-class">.author-content-item</span><span class="selector-class">.map</span> &#123;</span><br><span class="line">      <span class="attribute">margin-bottom</span>: <span class="number">0</span>;&#125;</span><br><span class="line">  <span class="selector-class">.post-tips</span> &#123;</span><br><span class="line">      <span class="attribute">left</span>: auto;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>自定义js。</p><p>打开自定义<code>js</code>文件，插入：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//关于界面吃喝玩乐</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> show = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;span[data-show]&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> next = show.<span class="property">nextElementSibling</span> || <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.first-tips&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> up = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;span[data-up]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (up) &#123;</span><br><span class="line">      up.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;data-up&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    show.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;data-show&#x27;</span>)</span><br><span class="line">    show.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-up&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    next.<span class="title function_">setAttribute</span>(<span class="string">&#x27;data-show&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  &#125;, <span class="number">2000</span>)</span><br></pre></td></tr></table></figure></li></ol><h1 id="Hexo-Admin"><a href="#Hexo-Admin" class="headerlink" title="Hexo-Admin"></a>Hexo-Admin</h1><p>通过<code>Hexo-Admin</code>插件，可以在本地生成一个后台管理系统。当我们执行完<code>hexo s</code>指令后，进入网页后台(<code>http://localhost:4000/admin/</code>)就可以管理<code>hexo</code>博客，方便写文章。</p><ol><li><p>安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-admin</span><br></pre></td></tr></table></figure></li><li><p>启动</p><p><code>hexo s</code>后，浏览器访问<code>localhost:4000/admin</code>即可进入后台管理系统。</p></li><li><p>设置密码</p><p>点击<code>settings</code>-&gt;<code>Setup authentification here</code>，设置<code>usename</code>、<code>passwd</code>、<code>secret</code>。</p><p>将上述信息添加到<code>_config.yml</code>文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">admin:</span><br><span class="line">  username: ***** #为了防止信息泄露，使用*代替原文。</span><br><span class="line">  password_hash: *******</span><br><span class="line">  secret: ******* </span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 建站攻略 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> butterfly </tag>
            
            <tag> 备忘录 </tag>
            
            <tag> hexo </tag>
            
            <tag> 自定义 </tag>
            
            <tag> 博客魔改 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义侧边栏以及添加css、js、img文件的说明</title>
      <link href="/2023/01/19/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BE%A7%E8%BE%B9%E6%A0%8F%E4%BB%A5%E5%8F%8A%E6%B7%BB%E5%8A%A0css%E3%80%81js%E3%80%81img%E6%96%87%E4%BB%B6%E7%9A%84%E8%AF%B4%E6%98%8E/"/>
      <url>/2023/01/19/%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BE%A7%E8%BE%B9%E6%A0%8F%E4%BB%A5%E5%8F%8A%E6%B7%BB%E5%8A%A0css%E3%80%81js%E3%80%81img%E6%96%87%E4%BB%B6%E7%9A%84%E8%AF%B4%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<h1 id="如何自定义侧边栏"><a href="#如何自定义侧边栏" class="headerlink" title="如何自定义侧边栏"></a>如何自定义侧边栏</h1><p><a href="https://butterfly.js.org/posts/ea33ab97/">详见</a></p><p>在hexo博客目录中的<code>/source/_data</code>创建一个名为<code>widget.yml</code>的文件，如果没有<code>_data</code>文件夹，自己创建一个。<code>widget.yml</code>文件内容如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">top: #创建的 widget 会出现在非 sticky 区域（即所有页面都会显示)</span><br><span class="line">  - class_name: #所创建的 widget 父类 class 名 （可选）</span><br><span class="line">    id_name: #所创建的 widget 父类 id 名（可选）</span><br><span class="line">    name: #所创建的 widget 标题</span><br><span class="line">    icon: #所创建的 widget 图标</span><br><span class="line">    html: #所创建的 widget 相关代码</span><br><span class="line"></span><br><span class="line">bottom: #创建的 widget 会出现在 sticky 区域（除了文章页都会显示)</span><br><span class="line">  - class_name:</span><br><span class="line">    id_name:</span><br><span class="line">    name:</span><br><span class="line">    icon:</span><br><span class="line">    order: #所创建的 widget 排序 （可选），如果不配置，则默认为 0。数字越小，排序越靠前。非自定义侧边栏的排序在主题配置文件（_config.butterfly.yml）sort_order处设置</span><br><span class="line">    html:</span><br></pre></td></tr></table></figure><p>hexo会根据<code>widget.yml</code>内容自动生成代码。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-widget 所写的 class_name&quot;</span> <span class="attr">id</span>=<span class="string">&quot;所写的 id_name&quot;</span> <span class="attr">style</span>=<span class="string">&quot;order: 所写的 order&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-headline&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;所写的 icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>所写的 name<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item-content&quot;</span>&gt;</span></span><br><span class="line">        所写的 html</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="如何添加自定义css、js、img文件"><a href="#如何添加自定义css、js、img文件" class="headerlink" title="如何添加自定义css、js、img文件"></a>如何添加自定义css、js、img文件</h1><p>在本地博客根目录的<code>source</code>文件夹里创建<code>css``js``img</code>文件夹（<code>/source/css</code> <code>/source/js</code> <code>/source/img</code>），里面即可存放<code>.css</code> <code>.js</code> <code>img</code>文件。</p><p>随后，在主题配置文件<code>_config.butterfly.yml</code>里面的<code>inject</code>处引入刚才编写的<code>css</code> <code>js</code>文件。</p><p>至于<code>img</code>文件，直接就在需要插入图片的地方引入<code>/img/***.png</code>即可，但一般建议使用图床。</p><p>一般而言，css文件在head引入，js文件在bottom里引入，有的js要求在head引入，不然无法生效。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    # 自定义css</span><br><span class="line">    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/style.css?v1&quot;&gt;</span><br><span class="line">    # 静态文件后面加个  ?任意内容  可以在每次更新之后用户自动重新请求.</span><br><span class="line">    # 例如添加 ?1 ,在修改此文件后改成 ?2 ,用户访问你的网站时,不会使用本地的缓存,而是请求新的内容。没修改的话就不用动。</span><br><span class="line">  bottom:</span><br><span class="line">    # 自定义js</span><br><span class="line">    - &lt;script src=&quot;/js/script.js?v1&quot;&gt;&lt;/script&gt;</span><br><span class="line">    # 引入多个文件就直接往下复制一行改一下文件名即可，如下：</span><br><span class="line">    - &lt;script src=&quot;/js/script1.js?v1&quot;&gt;&lt;/script&gt;</span><br><span class="line">    - &lt;script src=&quot;/js/script2.js?v1&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 建站攻略 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> butterfly </tag>
            
            <tag> hexo </tag>
            
            <tag> 自定义 </tag>
            
            <tag> 博客魔改 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客魔改内容（一）</title>
      <link href="/2023/01/18/%E5%8D%9A%E5%AE%A2%E9%AD%94%E6%94%B9%E5%86%85%E5%AE%B9%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2023/01/18/%E5%8D%9A%E5%AE%A2%E9%AD%94%E6%94%B9%E5%86%85%E5%AE%B9%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<blockquote><p>除参考butterfly主题文档进行正常配置之外，本博客还参照一些教程进行了魔改（复制）。记录一下，以便后期搞不清时查阅。</p></blockquote><h1 id="添加fps显示"><a href="#添加fps显示" class="headerlink" title="添加fps显示"></a>添加fps显示</h1><p>来源：<a href="https://yisous.xyz/posts/670e47f/#fps%E6%98%BE%E7%A4%BA">博客魔改日记(3)</a><br>参考：<a href="https://www.fomal.cc/posts/d739261b.html">博客魔改教程总结（四）</a></p><ol><li><p>在主题配置文件<code>_config.butterfly.yml</code>中找到<code>inject</code>项，插入代码。</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">head:</span><br><span class="line">   - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/fps.css?1&quot;&gt;</span><br><span class="line">   # 在.css后面添加 ?1 ,在修改此文件后改成 ?2 ,用户访问网站时,不会使用本地的缓存,而是请求新的内容。没修改的话就不用动</span><br><span class="line">   - &lt;span id=&quot;fps&quot;&gt;&lt;/span&gt; # 帧率检测</span><br><span class="line"> bottom:</span><br><span class="line">   - &lt;script async src=&quot;/js/fps.js&quot;&gt;&lt;/script&gt; # 帧率检测</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/css</code>文件夹下新建<code>fps.css</code>，插入代码。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 帧率检测 */</span></span><br><span class="line"><span class="selector-id">#fps</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="comment">/* 指定位置 */</span></span><br><span class="line">  <span class="attribute">left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1919810</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#fps</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.85</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#fps</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.72</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/js</code>文件夹下新建<code>fps.js</code>，插入代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;fpson&quot;</span>) == <span class="literal">undefined</span> || <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;fpson&quot;</span>) == <span class="string">&quot;1&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> rAF = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> ||</span><br><span class="line">            <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> ||</span><br><span class="line">            <span class="keyword">function</span> (<span class="params">callback</span>) &#123;</span><br><span class="line">                <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(callback, <span class="number">1000</span> / <span class="number">60</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;();</span><br><span class="line">    <span class="keyword">var</span> frame = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> allFrameCount = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> lastTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">var</span> lastFameTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">var</span> loop = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="keyword">var</span> fs = (now - lastFameTime);</span><br><span class="line">        <span class="keyword">var</span> fps = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="number">1000</span> / fs);</span><br><span class="line"></span><br><span class="line">        lastFameTime = now;</span><br><span class="line">        <span class="comment">// 不置 0，在动画的开头及结尾记录此值的差值算出 FPS</span></span><br><span class="line">        allFrameCount++;</span><br><span class="line">        frame++;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (now &gt; <span class="number">1000</span> + lastTime) &#123;</span><br><span class="line">            <span class="keyword">var</span> fps = <span class="title class_">Math</span>.<span class="title function_">round</span>((frame * <span class="number">1000</span>) / (now - lastTime));</span><br><span class="line">            <span class="keyword">if</span> (fps &lt;= <span class="number">5</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:#bd0000&quot;&gt;卡成ppt🤢&lt;/span&gt;`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fps &lt;= <span class="number">15</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:red&quot;&gt;电竞级帧率😖&lt;/span&gt;`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fps &lt;= <span class="number">25</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:orange&quot;&gt;有点难受😨&lt;/span&gt;`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fps &lt; <span class="number">35</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:#9338e6&quot;&gt;不太流畅🙄&lt;/span&gt;`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (fps &lt;= <span class="number">45</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:#08b7e4&quot;&gt;还不错哦🤣&lt;/span&gt;`</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> kd = <span class="string">`&lt;span style=&quot;color:#39c5bb&quot;&gt;十分流畅😁&lt;/span&gt;`</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fps&quot;</span>).<span class="property">innerHTML</span> = <span class="string">`FPS:<span class="subst">$&#123;fps&#125;</span> <span class="subst">$&#123;kd&#125;</span>`</span>;</span><br><span class="line">            frame = <span class="number">0</span>;</span><br><span class="line">            lastTime = now;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">rAF</span>(loop);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">loop</span>();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;fps&quot;</span>).<span class="property">style</span> = <span class="string">&quot;display:none!important&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h1 id="文章统计功能"><a href="#文章统计功能" class="headerlink" title="文章统计功能"></a>文章统计功能</h1><p>来源：<a href="https://blog.eurkon.com/post/1213ef82.html#%E5%BC%95%E5%85%A5-ECharts-js">Hexo博客文章统计图</a></p><ol><li><p>新建<code>charts</code>页面（已删除，改到about页面去了）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page charts</span><br></pre></td></tr></table></figure></li><li><p>引入<code>ECharts.js</code></p><p>有两种引入方式。一种是全局引用，即在<code>_config.butterfly.yml</code>的<code>inject</code>中引入<code>echarts.js</code>文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:  </span><br><span class="line">    - &lt;script src=&quot;https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js&quot;&gt;&lt;/script&gt; </span><br><span class="line">    #文章统计</span><br></pre></td></tr></table></figure><p>另一种为页面引入，即在需要引入文章统计图的页面中插入<code>echarts.js</code>文件。例如，可在<code>/source/charts/index.md</code>中添加以下内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;https://npm.elemecdn.com/echarts@4.9.0/dist/echarts.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>本博客采用第一种方法。</p></li><li><p>文章统计代码</p><p>在<code>/themes/butterfly/scripts/helpers</code>目录下新建<code>charts.js</code>文件，然后添加下述内容：</p><p>更多属性见<a href="https://echarts.apache.org/zh/option.html#title">官方文档</a>，可根据自行喜好对 ECharts 统计图进行修改。但不好意思，看不懂。只粘贴了现有的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> moment = <span class="built_in">require</span>(<span class="string">&#x27;moment&#x27;</span>)</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_render:html&#x27;</span>, <span class="keyword">function</span> (<span class="params">locals</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> $ = cheerio.<span class="title function_">load</span>(locals)</span><br><span class="line">  <span class="keyword">const</span> post = $(<span class="string">&#x27;#posts-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> tag = $(<span class="string">&#x27;#tags-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> category = $(<span class="string">&#x27;#categories-chart&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> htmlEncode = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (post.<span class="property">length</span> &gt; <span class="number">0</span> || tag.<span class="property">length</span> &gt; <span class="number">0</span> || category.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (post.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#postsChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (post.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      post.<span class="title function_">after</span>(<span class="title function_">postsChart</span>(post.<span class="title function_">attr</span>(<span class="string">&#x27;data-start&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (tag.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#tagsChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (tag.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      tag.<span class="title function_">after</span>(<span class="title function_">tagsChart</span>(tag.<span class="title function_">attr</span>(<span class="string">&#x27;data-length&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (category.<span class="property">length</span> &gt; <span class="number">0</span> &amp;&amp; $(<span class="string">&#x27;#categoriesChart&#x27;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (category.<span class="title function_">attr</span>(<span class="string">&#x27;data-encode&#x27;</span>) === <span class="string">&#x27;true&#x27;</span>) htmlEncode = <span class="literal">true</span></span><br><span class="line">      category.<span class="title function_">after</span>(<span class="title function_">categoriesChart</span>(category.<span class="title function_">attr</span>(<span class="string">&#x27;data-parent&#x27;</span>)))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (htmlEncode) &#123;</span><br><span class="line">      <span class="keyword">return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>().<span class="title function_">replace</span>(<span class="regexp">/&amp;amp;#/g</span>, <span class="string">&#x27;&amp;#&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> $.<span class="title function_">root</span>().<span class="title function_">html</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> locals</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">postsChart</span> (startMonth) &#123;</span><br><span class="line">  <span class="keyword">const</span> startDate = <span class="title function_">moment</span>(startMonth || <span class="string">&#x27;2020-01&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> endDate = <span class="title function_">moment</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> monthMap = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line">  <span class="keyword">const</span> dayTime = <span class="number">3600</span> * <span class="number">24</span> * <span class="number">1000</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> time = startDate; time &lt;= endDate; time += dayTime) &#123;</span><br><span class="line">    <span class="keyword">const</span> month = <span class="title function_">moment</span>(time).<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class="line">      monthMap.<span class="title function_">set</span>(month, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;posts&#x27;</span>).<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">post</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> month = post.<span class="property">date</span>.<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (monthMap.<span class="title function_">has</span>(month)) &#123;</span><br><span class="line">      monthMap.<span class="title function_">set</span>(month, monthMap.<span class="title function_">get</span>(month) + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">const</span> monthArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">keys</span>()])</span><br><span class="line">  <span class="keyword">const</span> monthValueArr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>([...monthMap.<span class="title function_">values</span>()])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;postsChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var postsChart = echarts.init(document.getElementById(&#x27;posts-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var postsOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;文章发布统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;</span></span><br><span class="line"><span class="string">        trigger: &#x27;axis&#x27;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      xAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;日期&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;category&#x27;,</span></span><br><span class="line"><span class="string">        boundaryGap: false,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;monthArr&#125;</span></span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      yAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;value&#x27;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        splitLine: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: [&#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;line&#x27;,</span></span><br><span class="line"><span class="string">        smooth: true,</span></span><br><span class="line"><span class="string">        lineStyle: &#123;</span></span><br><span class="line"><span class="string">            width: 0</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        showSymbol: false,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          opacity: 1,</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;,</span></span><br><span class="line"><span class="string">          &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        areaStyle: &#123;</span></span><br><span class="line"><span class="string">          opacity: 1,</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;, &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;monthValueArr&#125;</span>,</span></span><br><span class="line"><span class="string">        markLine: &#123;</span></span><br><span class="line"><span class="string">          data: [&#123;</span></span><br><span class="line"><span class="string">            name: &#x27;平均值&#x27;,</span></span><br><span class="line"><span class="string">            type: &#x27;average&#x27;,</span></span><br><span class="line"><span class="string">            label: &#123;</span></span><br><span class="line"><span class="string">              color: color</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;]</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    postsChart.setOption(postsOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class="line"><span class="string">      postsChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    postsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if (event.componentType === &#x27;series&#x27;) window.location.href = &#x27;/archives/&#x27; + event.name.replace(&#x27;-&#x27;, &#x27;/&#x27;);</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">tagsChart</span> (len) &#123;</span><br><span class="line">  <span class="keyword">const</span> tagArr = []</span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;tags&#x27;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">tag</span>) &#123;</span><br><span class="line">    tagArr.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: tag.<span class="property">name</span>, <span class="attr">value</span>: tag.<span class="property">length</span>, <span class="attr">path</span>: tag.<span class="property">path</span> &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  tagArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123; <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span> &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dataLength = <span class="title class_">Math</span>.<span class="title function_">min</span>(tagArr.<span class="property">length</span>, len) || tagArr.<span class="property">length</span></span><br><span class="line">  <span class="keyword">const</span> tagNameArr = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; dataLength; i++) &#123;</span><br><span class="line">    tagNameArr.<span class="title function_">push</span>(tagArr[i].<span class="property">name</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> tagNameArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagNameArr)</span><br><span class="line">  <span class="keyword">const</span> tagArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(tagArr)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;tagsChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var tagsChart = echarts.init(document.getElementById(&#x27;tags-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var tagsOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;Top <span class="subst">$&#123;dataLength&#125;</span> 标签统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;&#125;,</span></span><br><span class="line"><span class="string">      xAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;标签&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;category&#x27;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color,</span></span><br><span class="line"><span class="string">          interval: 0</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;tagNameArrJson&#125;</span></span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      yAxis: &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;value&#x27;,</span></span><br><span class="line"><span class="string">        splitLine: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        nameTextStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisTick: &#123;</span></span><br><span class="line"><span class="string">          show: false</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLabel: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        axisLine: &#123;</span></span><br><span class="line"><span class="string">          show: true,</span></span><br><span class="line"><span class="string">          lineStyle: &#123;</span></span><br><span class="line"><span class="string">            color: color</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: [&#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;bar&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;tagArrJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          borderRadius: [5, 5, 0, 0],</span></span><br><span class="line"><span class="string">          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">            offset: 0,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(128, 255, 165)&#x27;</span></span><br><span class="line"><span class="string">          &#125;,</span></span><br><span class="line"><span class="string">          &#123;</span></span><br><span class="line"><span class="string">            offset: 1,</span></span><br><span class="line"><span class="string">            color: &#x27;rgba(1, 191, 236)&#x27;</span></span><br><span class="line"><span class="string">          &#125;])</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        emphasis: &#123;</span></span><br><span class="line"><span class="string">          itemStyle: &#123;</span></span><br><span class="line"><span class="string">            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [&#123;</span></span><br><span class="line"><span class="string">              offset: 0,</span></span><br><span class="line"><span class="string">              color: &#x27;rgba(128, 255, 195)&#x27;</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">              offset: 1,</span></span><br><span class="line"><span class="string">              color: &#x27;rgba(1, 211, 255)&#x27;</span></span><br><span class="line"><span class="string">            &#125;])</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        markLine: &#123;</span></span><br><span class="line"><span class="string">          data: [&#123;</span></span><br><span class="line"><span class="string">            name: &#x27;平均值&#x27;,</span></span><br><span class="line"><span class="string">            type: &#x27;average&#x27;,</span></span><br><span class="line"><span class="string">            label: &#123;</span></span><br><span class="line"><span class="string">              color: color</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">          &#125;]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;]</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    tagsChart.setOption(tagsOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class="line"><span class="string">      tagsChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    tagsChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">categoriesChart</span> (dataParent) &#123;</span><br><span class="line">  <span class="keyword">const</span> categoryArr = []</span><br><span class="line">  <span class="keyword">let</span> categoryParentFlag = <span class="literal">false</span></span><br><span class="line">  hexo.<span class="property">locals</span>.<span class="title function_">get</span>(<span class="string">&#x27;categories&#x27;</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">category</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (category.<span class="property">parent</span>) categoryParentFlag = <span class="literal">true</span></span><br><span class="line">    categoryArr.<span class="title function_">push</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: category.<span class="property">name</span>,</span><br><span class="line">      <span class="attr">value</span>: category.<span class="property">length</span>,</span><br><span class="line">      <span class="attr">path</span>: category.<span class="property">path</span>,</span><br><span class="line">      <span class="attr">id</span>: category.<span class="property">_id</span>,</span><br><span class="line">      <span class="attr">parentId</span>: category.<span class="property">parent</span> || <span class="string">&#x27;0&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  categoryParentFlag = categoryParentFlag &amp;&amp; dataParent === <span class="string">&#x27;true&#x27;</span></span><br><span class="line">  categoryArr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123; <span class="keyword">return</span> b.<span class="property">value</span> - a.<span class="property">value</span> &#125;)</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">translateListToTree</span> (data, parent) &#123;</span><br><span class="line">    <span class="keyword">let</span> tree = []</span><br><span class="line">    <span class="keyword">let</span> temp</span><br><span class="line">    data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (data[index].<span class="property">parentId</span> == parent) &#123;</span><br><span class="line">        <span class="keyword">let</span> obj = data[index];</span><br><span class="line">        temp = <span class="title function_">translateListToTree</span>(data, data[index].<span class="property">id</span>);</span><br><span class="line">        <span class="keyword">if</span> (temp.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          obj.<span class="property">children</span> = temp</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tree.<span class="title function_">indexOf</span>())</span><br><span class="line">          tree.<span class="title function_">push</span>(obj)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> tree</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> categoryNameJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">category</span>) &#123; <span class="keyword">return</span> category.<span class="property">name</span> &#125;))</span><br><span class="line">  <span class="keyword">const</span> categoryArrJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(categoryArr)</span><br><span class="line">  <span class="keyword">const</span> categoryArrParentJson = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title function_">translateListToTree</span>(categoryArr, <span class="string">&#x27;0&#x27;</span>))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;script id=&quot;categoriesChart&quot;&gt;</span></span><br><span class="line"><span class="string">    var color = document.documentElement.getAttribute(&#x27;data-theme&#x27;) === &#x27;light&#x27; ? &#x27;#4c4948&#x27; : &#x27;rgba(255,255,255,0.7)&#x27;</span></span><br><span class="line"><span class="string">    var categoriesChart = echarts.init(document.getElementById(&#x27;categories-chart&#x27;), &#x27;light&#x27;);</span></span><br><span class="line"><span class="string">    var categoryParentFlag = <span class="subst">$&#123;categoryParentFlag&#125;</span></span></span><br><span class="line"><span class="string">    var categoriesOption = &#123;</span></span><br><span class="line"><span class="string">      title: &#123;</span></span><br><span class="line"><span class="string">        text: &#x27;文章分类统计图&#x27;,</span></span><br><span class="line"><span class="string">        x: &#x27;center&#x27;,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      legend: &#123;</span></span><br><span class="line"><span class="string">        top: &#x27;bottom&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryNameJson&#125;</span>,</span></span><br><span class="line"><span class="string">        textStyle: &#123;</span></span><br><span class="line"><span class="string">          color: color</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      tooltip: &#123;</span></span><br><span class="line"><span class="string">        trigger: &#x27;item&#x27;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      series: []</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">    categoriesOption.series.push(</span></span><br><span class="line"><span class="string">      categoryParentFlag ? </span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        nodeClick :false,</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;sunburst&#x27;,</span></span><br><span class="line"><span class="string">        radius: [&#x27;15%&#x27;, &#x27;90%&#x27;],</span></span><br><span class="line"><span class="string">        center: [&#x27;50%&#x27;, &#x27;55%&#x27;],</span></span><br><span class="line"><span class="string">        sort: &#x27;desc&#x27;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryArrParentJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          borderColor: &#x27;#fff&#x27;,</span></span><br><span class="line"><span class="string">          borderWidth: 2,</span></span><br><span class="line"><span class="string">          emphasis: &#123;</span></span><br><span class="line"><span class="string">            focus: &#x27;ancestor&#x27;,</span></span><br><span class="line"><span class="string">            shadowBlur: 10,</span></span><br><span class="line"><span class="string">            shadowOffsetX: 0,</span></span><br><span class="line"><span class="string">            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      :</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        name: &#x27;文章篇数&#x27;,</span></span><br><span class="line"><span class="string">        type: &#x27;pie&#x27;,</span></span><br><span class="line"><span class="string">        radius: [30, 80],</span></span><br><span class="line"><span class="string">        roseType: &#x27;area&#x27;,</span></span><br><span class="line"><span class="string">        label: &#123;</span></span><br><span class="line"><span class="string">          color: color,</span></span><br><span class="line"><span class="string">          formatter: &#x27;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&#x27;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        data: <span class="subst">$&#123;categoryArrJson&#125;</span>,</span></span><br><span class="line"><span class="string">        itemStyle: &#123;</span></span><br><span class="line"><span class="string">          emphasis: &#123;</span></span><br><span class="line"><span class="string">            shadowBlur: 10,</span></span><br><span class="line"><span class="string">            shadowOffsetX: 0,</span></span><br><span class="line"><span class="string">            shadowColor: &#x27;rgba(255, 255, 255, 0.5)&#x27;</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    )</span></span><br><span class="line"><span class="string">    categoriesChart.setOption(categoriesOption);</span></span><br><span class="line"><span class="string">    window.addEventListener(&#x27;resize&#x27;, () =&gt; &#123; </span></span><br><span class="line"><span class="string">      categoriesChart.resize();</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    categoriesChart.on(&#x27;click&#x27;, &#x27;series&#x27;, (event) =&gt; &#123;</span></span><br><span class="line"><span class="string">      if(event.data.path) window.location.href = &#x27;/&#x27; + event.data.path;</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  &lt;/script&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在建立的charts页面使用统计图（已改到about页面）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 文章发布时间统计图 --&gt;</span><br><span class="line">&lt;div id=&quot;posts-chart&quot; data-start=&quot;2023-01&quot; style=&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!-- 文章标签统计图 --&gt;</span><br><span class="line">&lt;div id=&quot;tags-chart&quot; data-length=&quot;10&quot; style=&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!-- 文章分类统计图 --&gt;</span><br><span class="line">&lt;div id=&quot;categories-chart&quot; data-parent=&quot;true&quot; style=&quot;border-radius: 8px; height: 300px; padding: 10px;&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>其中：</p><ul><li><code>posts-chart</code>的<code>data-start=&quot;2023-01&quot;</code>属性表示文章发布时间统计图仅显示2023年1月及以后的文章数据。</li><li><code>tags-chart</code>的<code>data-length=&quot;10&quot;</code>属性表示仅显示排名前10的标签。</li><li><code>categories-chart</code>的<code>data-parent=&quot;true&quot;</code>属性表示<code>有子分类</code>时以旭日图显示分类，其他<code>无子分类</code>或<code>设置为false</code>或<code>不设置该属性</code>或<code>设置为其他非true属性</code>情况都以饼状图显示分类。</li></ul></li><li><p>在其他页面使用统计图</p><p>本博客暂未引用，详见<a href="https://blog.eurkon.com/post/1213ef82.html#%E5%BC%95%E5%85%A5-ECharts-js">Hexo博客文章统计图</a>。</p></li></ol><h1 id="随机访问一篇文章"><a href="#随机访问一篇文章" class="headerlink" title="随机访问一篇文章"></a>随机访问一篇文章</h1><p>来源：<a href="https://blog.leonus.cn/2022/randomPost.html">随机访问一篇文章的实现</a></p><p>功能主要基于<code>baidusitemap插件</code>实现。</p><ol><li><p>在主题配置文件<code>_config.butterfly.yml</code>中找到<code>inject</code>项，插入代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  bottom:</span><br><span class="line">    - &lt;script src=&quot;/js/randompost.js&quot;&gt;&lt;/script&gt; # 随机访问一篇文章</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/js</code>文件夹下新建<code>randompost.js</code>，插入代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">randomPost</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;/baidusitemap.xml&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">text</span>()).<span class="title function_">then</span>(<span class="function"><span class="params">str</span> =&gt;</span> (<span class="keyword">new</span> <span class="variable language_">window</span>.<span class="title class_">DOMParser</span>()).<span class="title function_">parseFromString</span>(str, <span class="string">&quot;text/xml&quot;</span>)).<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> ls = data.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;url loc&#x27;</span>);</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> url = ls[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * ls.<span class="property">length</span>)].<span class="property">innerHTML</span>;</span><br><span class="line">            <span class="keyword">if</span> (location.<span class="property">href</span> == url) <span class="keyword">continue</span>;</span><br><span class="line">            location.<span class="property">href</span> = url;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件<code>_config.butterfly.yml</code>中增加导航按钮即可。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  随机访问: javascript:randomPost(); || fa-solid fa-shuffle</span><br></pre></td></tr></table></figure></li></ol><h1 id="网站标题提示"><a href="#网站标题提示" class="headerlink" title="网站标题提示"></a>网站标题提示</h1><p>来源：<a href="https://www.fomal.cc/posts/d1927166.html#%E7%BD%91%E7%AB%99%E6%81%B6%E6%90%9E%E6%A0%87%E9%A2%98">博客魔改教程总结（五）</a></p><ol><li><p>在主题配置文件<code>_config.butterfly.yml</code>中找到<code>inject</code>项，插入代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">   bottom:</span><br><span class="line">    - &lt;script async src=&quot;/js/title.js&quot;&gt;&lt;/script&gt; #网站标题提示</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/js</code>文件夹下新建<code>title.js</code>，插入代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//动态标题</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">OriginTitile</span> = <span class="variable language_">document</span>.<span class="property">title</span>;</span><br><span class="line"><span class="keyword">var</span> titleTime;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">hidden</span>) &#123;</span><br><span class="line">    <span class="comment">//离开当前页面时标签显示内容</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;爱你😘~别走&#x27;</span>;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(titleTime);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//返回当前页面时标签显示内容</span></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = <span class="string">&#x27;终于等到你/(ㄒoㄒ)/~~~&#x27;</span>;</span><br><span class="line">    <span class="comment">//四秒后变回正常标题</span></span><br><span class="line">    titleTime = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">title</span> = <span class="title class_">OriginTitile</span>;</span><br><span class="line">    &#125;, <span class="number">4000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><h1 id="加载动画"><a href="#加载动画" class="headerlink" title="加载动画"></a>加载动画</h1><p>来源：<a href="https://anzhiy.cn/posts/52d8.html">Heo同款loading动画</a></p><ol><li><p>打开<code>/themes/butterfly/layout/includes/loading/fullpage-loading.pug</code>文件。</p><p>原代码为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#loading-box</span><br><span class="line">  .loading-left-bg</span><br><span class="line">  .loading-right-bg</span><br><span class="line">  .spinner-box</span><br><span class="line">    .configure-border-1</span><br><span class="line">      .configure-core</span><br><span class="line">    .configure-border-2</span><br><span class="line">      .configure-core</span><br><span class="line">    .loading-word= _p(&#x27;loading&#x27;)</span><br><span class="line"></span><br><span class="line">script.</span><br><span class="line">  const preloader = &#123;</span><br><span class="line">    endLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;auto&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.add(&quot;loaded&quot;)</span><br><span class="line">    &#125;,</span><br><span class="line">    initLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.remove(&quot;loaded&quot;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  window.addEventListener(&#x27;load&#x27;,()=&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line"></span><br><span class="line">  if (!&#123;theme.pjax &amp;&amp; theme.pjax.enable&#125;) &#123;</span><br><span class="line">    document.addEventListener(&#x27;pjax:send&#x27;, () =&gt; &#123; preloader.initLoading() &#125;)</span><br><span class="line">    document.addEventListener(&#x27;pjax:complete&#x27;, () =&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>删去，改为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#loading-box(onclick=&#x27;document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)&#x27;)</span><br><span class="line">  .loading-bg</span><br><span class="line">    div.loading-img</span><br><span class="line">    .loading-image-dot</span><br><span class="line"></span><br><span class="line">script.</span><br><span class="line">  const preloader = &#123;</span><br><span class="line">    endLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;auto&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.add(&quot;loaded&quot;)</span><br><span class="line">    &#125;,</span><br><span class="line">    initLoading: () =&gt; &#123;</span><br><span class="line">      document.body.style.overflow = &#x27;&#x27;;</span><br><span class="line">      document.getElementById(&#x27;loading-box&#x27;).classList.remove(&quot;loaded&quot;)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  window.addEventListener(&#x27;load&#x27;,()=&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line"></span><br><span class="line">  if (!&#123;theme.pjax &amp;&amp; theme.pjax.enable&#125;) &#123;</span><br><span class="line">    document.addEventListener(&#x27;pjax:send&#x27;, () =&gt; &#123; preloader.initLoading() &#125;)</span><br><span class="line">    document.addEventListener(&#x27;pjax:complete&#x27;, () =&gt; &#123; preloader.endLoading() &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>打开<code>/themes/butterfly/layout/includes/loading/index.pug</code>文件。</p><p>原代码为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if theme.preloader.source === 1</span><br><span class="line">  include ./fullpage-loading.pug</span><br><span class="line">else</span><br><span class="line">  include ./pace.pug</span><br></pre></td></tr></table></figure><p>删去，改为：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if theme.preloader.source === 1</span><br><span class="line">  include ./fullpage-loading.pug</span><br><span class="line">else if theme.preloader.source === 2</span><br><span class="line">  include ./pace.pug</span><br><span class="line">else</span><br><span class="line">  include ./fullpage-loading.pug</span><br><span class="line">  include ./pace.pug</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/css</code>中新建<code>progress_bar.css</code>文件，这是加载图片上方胶囊的样式。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">.pace &#123;</span><br><span class="line">  -webkit-pointer-events: none;</span><br><span class="line">  pointer-events: none;</span><br><span class="line">  -webkit-user-select: none;</span><br><span class="line">  -moz-user-select: none;</span><br><span class="line">  user-select: none;</span><br><span class="line">  z-index: 2000;</span><br><span class="line">  position: fixed;</span><br><span class="line">  margin: auto;</span><br><span class="line">  top: 10px;</span><br><span class="line">  left: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  height: 8px;</span><br><span class="line">  border-radius: 8px;</span><br><span class="line">  width: 4rem;</span><br><span class="line">  background: #eaecf2;</span><br><span class="line">  border: 1px #e3e8f7;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.pace-inactive .pace-progress &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transition: 0.3s ease-in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.pace .pace-progress &#123;</span><br><span class="line">  -webkit-box-sizing: border-box;</span><br><span class="line">  -moz-box-sizing: border-box;</span><br><span class="line">  -ms-box-sizing: border-box;</span><br><span class="line">  -o-box-sizing: border-box;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">  -webkit-transform: translate3d(0, 0, 0);</span><br><span class="line">  -moz-transform: translate3d(0, 0, 0);</span><br><span class="line">  -ms-transform: translate3d(0, 0, 0);</span><br><span class="line">  -o-transform: translate3d(0, 0, 0);</span><br><span class="line">  transform: translate3d(0, 0, 0);</span><br><span class="line">  max-width: 200px;</span><br><span class="line">  position: absolute;</span><br><span class="line">  z-index: 2000;</span><br><span class="line">  display: block;</span><br><span class="line">  top: 0;</span><br><span class="line">  right: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">  width: 100%;</span><br><span class="line">  background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);</span><br><span class="line">  animation: gradient 1.5s ease infinite;</span><br><span class="line">  background-size: 200%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.pace.pace-inactive &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transition: 0.3s;</span><br><span class="line">  top: -8px;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes gradient &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    background-position: 0% 50%;</span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    background-position: 100% 50%;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    background-position: 0% 50%;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>打开<code>/themes/butterfly/source/css/_layout/loading.styl</code>文件。</p><p>原代码为:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">if hexo-config(&#x27;preloader.enable&#x27;) &amp;&amp; hexo-config(&#x27;preloader.source&#x27;) == 1</span><br><span class="line">  .loading-bg</span><br><span class="line">    position: fixed</span><br><span class="line">    z-index: 1000</span><br><span class="line">    width: 50%</span><br><span class="line">    height: 100%</span><br><span class="line">    background-color: var(--preloader-bg)</span><br><span class="line"></span><br><span class="line">  #loading-box</span><br><span class="line">    .loading-left-bg</span><br><span class="line">      @extend .loading-bg</span><br><span class="line"></span><br><span class="line">    .loading-right-bg</span><br><span class="line">      @extend .loading-bg</span><br><span class="line">      right: 0</span><br><span class="line"></span><br><span class="line">    .spinner-box</span><br><span class="line">      position: fixed</span><br><span class="line">      z-index: 1001</span><br><span class="line">      display: flex</span><br><span class="line">      justify-content: center</span><br><span class="line">      align-items: center</span><br><span class="line">      width: 100%</span><br><span class="line">      height: 100vh</span><br><span class="line"></span><br><span class="line">      .configure-border-1</span><br><span class="line">        position: absolute</span><br><span class="line">        padding: 3px</span><br><span class="line">        width: 115px</span><br><span class="line">        height: 115px</span><br><span class="line">        background: #ffab91</span><br><span class="line">        animation: configure-clockwise 3s ease-in-out 0s infinite alternate</span><br><span class="line"></span><br><span class="line">      .configure-border-2</span><br><span class="line">        left: -115px</span><br><span class="line">        padding: 3px</span><br><span class="line">        width: 115px</span><br><span class="line">        height: 115px</span><br><span class="line">        background: rgb(63, 249, 220)</span><br><span class="line">        transform: rotate(45deg)</span><br><span class="line">        animation: configure-xclockwise 3s ease-in-out 0s infinite alternate</span><br><span class="line"></span><br><span class="line">      .loading-word</span><br><span class="line">        position: absolute</span><br><span class="line">        color: var(--preloader-color)</span><br><span class="line">        font-size: 16px</span><br><span class="line"></span><br><span class="line">      .configure-core</span><br><span class="line">        width: 100%</span><br><span class="line">        height: 100%</span><br><span class="line">        background-color: var(--preloader-bg)</span><br><span class="line"></span><br><span class="line">    &amp;.loaded</span><br><span class="line">      .loading-left-bg</span><br><span class="line">        transition: all .5s</span><br><span class="line">        transform: translate(-100%, 0)</span><br><span class="line"></span><br><span class="line">      .loading-right-bg</span><br><span class="line">        transition: all .5s</span><br><span class="line">        transform: translate(100%, 0)</span><br><span class="line"></span><br><span class="line">      .spinner-box</span><br><span class="line">        display: none</span><br><span class="line"></span><br><span class="line">  @keyframes configure-clockwise</span><br><span class="line">    0%</span><br><span class="line">      transform: rotate(0)</span><br><span class="line"></span><br><span class="line">    25%</span><br><span class="line">      transform: rotate(90deg)</span><br><span class="line"></span><br><span class="line">    50%</span><br><span class="line">      transform: rotate(180deg)</span><br><span class="line"></span><br><span class="line">    75%</span><br><span class="line">      transform: rotate(270deg)</span><br><span class="line"></span><br><span class="line">    100%</span><br><span class="line">      transform: rotate(360deg)</span><br><span class="line"></span><br><span class="line">  @keyframes configure-xclockwise</span><br><span class="line">    0%</span><br><span class="line">      transform: rotate(45deg)</span><br><span class="line"></span><br><span class="line">    25%</span><br><span class="line">      transform: rotate(-45deg)</span><br><span class="line"></span><br><span class="line">    50%</span><br><span class="line">      transform: rotate(-135deg)</span><br><span class="line"></span><br><span class="line">    75%</span><br><span class="line">      transform: rotate(-225deg)</span><br><span class="line"></span><br><span class="line">    100%</span><br><span class="line">      transform: rotate(-315deg)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>删去，改为以下代码。代码中背景颜色修改。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">if hexo-config(&#x27;preloader&#x27;)</span><br><span class="line">  .loading-bg</span><br><span class="line">    display: flex;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 100%;</span><br><span class="line">    position: fixed;</span><br><span class="line">    background: #f5f5f5;</span><br><span class="line">    z-index: 1001;</span><br><span class="line">    opacity: 1;</span><br><span class="line">    transition: .3s;</span><br><span class="line"></span><br><span class="line">  #loading-box</span><br><span class="line">    .loading-img</span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">      margin: auto;</span><br><span class="line">      border: 4px solid #f0f0f2;</span><br><span class="line">      animation-duration: .3s;</span><br><span class="line">      animation-name: loadingAction;</span><br><span class="line">      animation-iteration-count: infinite;</span><br><span class="line">      animation-direction: alternate;</span><br><span class="line">    .loading-image-dot</span><br><span class="line">      width: 30px;</span><br><span class="line">      height: 30px;</span><br><span class="line">      background: #39ce42; </span><br><span class="line">      position: absolute;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">      border: 6px solid #fff;</span><br><span class="line">      top: 50%;</span><br><span class="line">      left: 50%;</span><br><span class="line">      transform: translate(18px, 24px);</span><br><span class="line">    &amp;.loaded</span><br><span class="line">      .loading-bg</span><br><span class="line">        opacity: 0;</span><br><span class="line">        z-index: -1000;</span><br><span class="line"></span><br><span class="line">  @keyframes loadingAction</span><br><span class="line">    0% &#123;</span><br><span class="line">        opacity: 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    100% &#123;</span><br><span class="line">        opacity: .4;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/css/custom.css</code>中新增代码，其中<code>background</code>中的<code>url</code>用于设置加载图片。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/*加载动画*/</span><br><span class="line">.loading-img &#123;</span><br><span class="line">  background: url(https://img.heyjian.cn/1.jpg) no-repeat center center;</span><br><span class="line">  background-size: cover;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件<code>_config.butterfly.yml</code>中找到<code>inject</code>项，插入代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/css/custom.css?1&quot;&gt;</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件<code>_config.butterfly.yml</code>中找到<code>preloader</code>项。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">preloader:</span><br><span class="line">  enable: true</span><br><span class="line">  # source</span><br><span class="line">  # 1. fullpage-loading</span><br><span class="line">  # 2. pace (progress bar)</span><br><span class="line">  source: 3</span><br><span class="line">  # pace theme (see https://codebyzach.github.io/pace/)</span><br><span class="line">  pace_css_url: /css/progress_bar.css</span><br></pre></td></tr></table></figure><p>其中<code>source: 1</code>为满屏加载但加载图片上方无胶囊动画，<code>source: 2</code>为有胶囊但无满屏动画，<code>source: 3</code>为两者皆有。</p></li></ol><h1 id="首页文章置顶滚动轮播"><a href="#首页文章置顶滚动轮播" class="headerlink" title="首页文章置顶滚动轮播"></a>首页文章置顶滚动轮播</h1><p>来源：<a href="https://akilar.top/posts/8e1264d1/">Swiper Bar</a></p><ol><li><p>在本地站点根目录执行下述指令，安装插件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-swiper --save</span><br></pre></td></tr></table></figure></li><li><p>在站点配置文件<code>_config.yml</code>中添加下述代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">swiper:</span><br><span class="line">  enable: true # 开关</span><br><span class="line">  priority: 5 #过滤器优先权,数值越小，执行越早，默认为10</span><br><span class="line">  enable_page: / # 填写想要应用的页面的相对路径（即路由地址）,如根目录就填’/‘,分类页面就填’/categories/‘。若要应用于所有页面，就填’all’，默认为all</span><br><span class="line">  timemode: date #date/updated时间显示，date为显示创建日期，updated为显示更新日期,默认为date</span><br><span class="line">  layout: # 挂载容器类型</span><br><span class="line">    type: id #挂载容器类型，填写id或class，不填则默认为id</span><br><span class="line">    name: recent-posts #挂载容器名称</span><br><span class="line">    index: 0 #填0或正整数，前提是layout.type为class，因为同一页面可能有多个class，此项用来确认究竟排在第几个顺位</span><br><span class="line">  default_descr: 怎么可能没有描述呢！！！ #默认文章描述</span><br><span class="line">  swiper_css: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css #swiper css依赖</span><br><span class="line">  swiper_js: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js #swiper js依赖</span><br><span class="line">  custom_css: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css # 适配主题样式补丁</span><br><span class="line">  custom_js: https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js # swiper初始化方法</span><br></pre></td></tr></table></figure></li><li><p>使用方法</p><p>在文章<code>front_matter</code>中添加<code>swiper_index: 1</code>即可，其中<code>swiper_index:</code>后的数字为非负整数，代表置顶轮播图顺序，数字越大越靠前。</p></li></ol><h1 id="右下角增加分享分页按钮以及直达底部按钮"><a href="#右下角增加分享分页按钮以及直达底部按钮" class="headerlink" title="右下角增加分享分页按钮以及直达底部按钮"></a>右下角增加分享分页按钮以及直达底部按钮</h1><p>来源：<a href="https://blog.leonus.cn/2022/rightside.html">Butterfly右下角悬浮菜单栏魔改指南</a></p><ol><li><p>打开<code>/themes/butterfly/layout/includes/rightside.pug</code>文件，在一众<code>when</code>下面添加一个<code>when</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">when &#x27;share&#x27;</span><br><span class="line">       button.share(type=&quot;button&quot; title=&#x27;分享链接&#x27; onclick=&quot;share()&quot;)</span><br><span class="line">         i.fas.fa-share-nodes</span><br></pre></td></tr></table></figure></li><li><p>在此文档下面的·#rightside·数组中添加<code>share</code>函数。</p><p>原代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#rightside</span><br><span class="line">  - const &#123; enable, hide, show &#125; = theme.rightside_item_order</span><br><span class="line">  - const hideArray = enable ? hide &amp;&amp; hide.split(&#x27;,&#x27;) : [&#x27;readmode&#x27;,&#x27;translate&#x27;,&#x27;darkmode&#x27;,&#x27;hideAside&#x27;]</span><br><span class="line">  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;toc&#x27;,&#x27;chat&#x27;,&#x27;comment&#x27;]</span><br></pre></td></tr></table></figure><p>添加<code>share</code>函数后的代码:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#rightside</span><br><span class="line">  - const &#123; enable, hide, show &#125; = theme.rightside_item_order</span><br><span class="line">  - const hideArray = enable ? hide &amp;&amp; hide.split(&#x27;,&#x27;) : [&#x27;readmode&#x27;,&#x27;translate&#x27;,&#x27;darkmode&#x27;,&#x27;hideAside&#x27;]</span><br><span class="line">  - const showArray = enable ? show &amp;&amp; show.split(&#x27;,&#x27;) : [&#x27;toc&#x27;,&#x27;share&#x27;,&#x27;chat&#x27;,&#x27;comment&#x27;]</span><br></pre></td></tr></table></figure><p>其中：在<code>hideArray</code>里面添加会在点击齿轮按钮之后显示，在<code>showArray</code>里面添加按钮会直接显示。</p><p>虽然，在主题配置文档<code>rightside_item_order</code>中可对右下角按钮进行排序，但由于添加了自定义按钮，为了方便，直接更改此处顺序就可以对其进行排序。</p></li><li><p>在主题配置文档的<code>inject</code>中的<code>bottom</code>项里引入下述代码，其中，该处代码必须要放在自定义分享功能js文件的前面。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bottom:</span><br><span class="line">    - &lt;script src=&quot;https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js&quot;&gt;&lt;/script&gt; #分享本页引入外部js，一定要在该自定义功能js的上面</span><br><span class="line">    - &lt;script src=&quot;/js/custom.js&quot;&gt;&lt;/script&gt; #自定义分享功能js存放处</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/js/custom.js</code>中插入自定义分享本页js。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 分享本页</span><br><span class="line">function share() &#123;</span><br><span class="line">    let url = window.location.origin + window.location.pathname</span><br><span class="line">    new ClipboardJS(&quot;.share&quot;, &#123; text: function() &#123; return &#x27;标题：&#x27; + document.title + &#x27;\n链接：&#x27; + url &#125; &#125;); #此处可以更改，例如只复制链接，但不想改。</span><br><span class="line">    btf.snackbarShow(&quot;本页面信息已成功复制至剪贴板！小伙子，尽情分享去吧o(*￣▽￣*)ブ&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>直达底部功能在<code>/themes/butterfly/layout/includes/rightside.pug</code>文件最后添加代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">button#go-down(type=&quot;button&quot; title=&quot;直达底部&quot; onclick=&quot;btf.scrollToDest(document.body.scrollHeight, 500)&quot;)</span><br><span class="line">  i.fas.fa-arrow-down</span><br></pre></td></tr></table></figure></li></ol><h1 id="复制、粘贴、F12弹窗提醒"><a href="#复制、粘贴、F12弹窗提醒" class="headerlink" title="复制、粘贴、F12弹窗提醒"></a>复制、粘贴、F12弹窗提醒</h1><p>用<code>f12</code>从<a href="https://blog.leonus.cn/2022/rightside.html">Butterfly右下角悬浮菜单栏魔改指南</a>那扒来的。</p><p>​由于之前已经引用了<code>/source/js/custom.js</code>,因此，只需要在<code>/source/js/custom.js</code>中插入下述代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//f12提醒、复制提醒、粘贴提醒</span><br><span class="line">window.onkeydown=e=&gt;&#123;123===e.keyCode&amp;&amp;btf.snackbarShow(&quot;开发者模式已打开，请记得遵循GPL协议哟(●&#x27;◡&#x27;●)&quot;)&#125;</span><br><span class="line">document.body.addEventListener(&quot;copy&quot;,(e=&gt;&#123;&quot;TEXTAREA&quot;==e.target.tagName&amp;&amp;&quot;&quot;==e.target.className||btf.snackbarShow(&quot;滴\^o^/复制成功~&quot;)&#125;))</span><br><span class="line">document.body.addEventListener(&quot;paste&quot;,(e=&gt;&#123;btf.snackbarShow(&quot;滴\^o^/粘贴成功~&quot;)&#125;))</span><br></pre></td></tr></table></figure><h1 id="控制台样式自定义"><a href="#控制台样式自定义" class="headerlink" title="控制台样式自定义"></a>控制台样式自定义</h1><p>来源：<a href="https://www.fomal.cc/posts/d739261b.html">博客魔改教程总结（四）</a></p><ol><li><p>在已经建立并在主题配置文件中引用的<code>/source/js/custom.js</code>文件中加入下述代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">//控制台样式自定义</span><br><span class="line">var now1 = new Date();</span><br><span class="line">function createtime1() &#123;</span><br><span class="line">    var grt = new Date(&quot;01/14/2023 22:00:00&quot;); //此处修改你的建站时间或者网站上线时间</span><br><span class="line">    now1.setTime(now1.getTime() + 250);</span><br><span class="line">    var days = (now1 - grt) / 1000 / 60 / 60 / 24;</span><br><span class="line">    var dnum = Math.floor(days);</span><br><span class="line"></span><br><span class="line">    var ascll = [</span><br><span class="line">        `欢迎来到jianerssr的个人小屋`,</span><br><span class="line">        `---便是仙禁春深，御炉香袅，临轩亲试。对天颜咫尺，定然魁甲登高第。`,</span><br><span class="line">        `</span><br><span class="line">     ██╗██╗ █████╗ ███╗   ██╗███████╗██████╗ ███████╗███████╗██████╗ </span><br><span class="line">     ██║██║██╔══██╗████╗  ██║██╔════╝██╔══██╗██╔════╝██╔════╝██╔══██╗</span><br><span class="line">     ██║██║███████║██╔██╗ ██║█████╗  ██████╔╝███████╗███████╗██████╔╝</span><br><span class="line">██   ██║██║██╔══██║██║╚██╗██║██╔══╝  ██╔══██╗╚════██║╚════██║██╔══██╗</span><br><span class="line">╚█████╔╝██║██║  ██║██║ ╚████║███████╗██║  ██║███████║███████║██║  ██║</span><br><span class="line"> ╚════╝ ╚═╝╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚══════╝╚══════╝╚═╝  ╚═╝</span><br><span class="line">`,</span><br><span class="line">        &quot;jianerssr的个人小屋已经运行&quot;,</span><br><span class="line">        dnum,</span><br><span class="line">        &quot;天啦!&quot;,</span><br><span class="line">        &quot;©2023 By jianerssr&quot;,</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    setTimeout(</span><br><span class="line">        console.log.bind(</span><br><span class="line">            console,</span><br><span class="line">            `\n%c$&#123;ascll[0]&#125; %c $&#123;ascll[1]&#125; %c $&#123;ascll[2]&#125; %c$&#123;ascll[3]&#125;%c $&#123;ascll[4]&#125;%c $&#123;ascll[5]&#125;\n\n%c $&#123;ascll[6]&#125;\n`,</span><br><span class="line">            &quot;color:#3366ff&quot;,</span><br><span class="line">            &quot;&quot;,</span><br><span class="line">            &quot;color:#3366ff&quot;,</span><br><span class="line">            &quot;color:#3366ff&quot;,</span><br><span class="line">            &quot;&quot;,</span><br><span class="line">            &quot;color:#3366ff&quot;,</span><br><span class="line">            &quot;&quot;</span><br><span class="line">        )</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">createtime1();</span><br><span class="line">// 重写console方法</span><br><span class="line">console.log = function () &#123; &#125;;</span><br><span class="line">console.error = function () &#123; &#125;;</span><br><span class="line">console.warn = function () &#123; &#125;;</span><br></pre></td></tr></table></figure></li><li><p><code>F12</code>控制台处可看到效果。</p></li></ol><h1 id="文章顶部添加波浪效果"><a href="#文章顶部添加波浪效果" class="headerlink" title="文章顶部添加波浪效果"></a>文章顶部添加波浪效果</h1><p>来源：<a href="https://anzhiy.cn/posts/98c4.html">butterfly文章顶部添加波浪效果</a></p><ol><li><p>打开<code>/themes/butterfly/layout/includes/header/index.pug</code>文件。</p><p>找到<code>35</code>行<code>include ./post-info.pug</code>，在其下添加下述代码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">if is_post() #原有</span><br><span class="line">     include ./post-info.pug #原有</span><br><span class="line">     section.main-hero-waves-area.waves-area</span><br><span class="line">       svg.waves-svg(xmlns=&#x27;http://www.w3.org/2000/svg&#x27;, xlink=&#x27;http://www.w3.org/1999/xlink&#x27;, viewBox=&#x27;0 24 150 28&#x27;, preserveAspectRatio=&#x27;none&#x27;, shape-rendering=&#x27;auto&#x27;)</span><br><span class="line">         defs</span><br><span class="line">           path#gentle-wave(d=&#x27;M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z&#x27;)</span><br><span class="line">         g.parallax</span><br><span class="line">           use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;0&#x27;)</span><br><span class="line">           use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;3&#x27;)</span><br><span class="line">           use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;5&#x27;)</span><br><span class="line">           use(href=&#x27;#gentle-wave&#x27;, x=&#x27;48&#x27;, y=&#x27;7&#x27;)</span><br><span class="line">   else if is_home()  #原有</span><br></pre></td></tr></table></figure></li><li><p>在<code>/source/css/custom.css</code>中添加。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 波浪css */</span></span><br><span class="line"><span class="selector-class">.main-hero-waves-area</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: -<span class="number">11px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.waves-area</span> <span class="selector-class">.waves-svg</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* Animation */</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.parallax</span> &gt; use &#123;</span><br><span class="line">  <span class="attribute">animation</span>: move-forever <span class="number">25s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.55</span>, <span class="number">0.5</span>, <span class="number">0.45</span>, <span class="number">0.5</span>) infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">7s</span>;</span><br><span class="line">  fill: <span class="number">#f7f9febd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">10s</span>;</span><br><span class="line">  fill: <span class="number">#f7f9fe82</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">4s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">13s</span>;</span><br><span class="line">  fill: <span class="number">#f7f9fe36</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">5s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">20s</span>;</span><br><span class="line">  fill: <span class="number">#f7f9fe</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 黑色模式背景 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">7s</span>;</span><br><span class="line">  fill: <span class="number">#18171dc8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">3s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">10s</span>;</span><br><span class="line">  fill: <span class="number">#18171d80</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">4s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">13s</span>;</span><br><span class="line">  fill: <span class="number">#18171d3e</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.parallax</span> &gt; use<span class="selector-pseudo">:nth-child</span>(<span class="number">4</span>) &#123;</span><br><span class="line">  <span class="attribute">animation-delay</span>: -<span class="number">5s</span>;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">20s</span>;</span><br><span class="line">  fill: <span class="number">#18171d</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> move-forever &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(-<span class="number">90px</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">85px</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*Shrinking for mobile*/</span></span><br><span class="line"><span class="keyword">@media</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.waves-area</span> <span class="selector-class">.waves-svg</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">40px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 建站攻略 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> butterfly </tag>
            
            <tag> 备忘录 </tag>
            
            <tag> hexo </tag>
            
            <tag> 自定义 </tag>
            
            <tag> 博客魔改 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>butterfly主题front-matter设置说明</title>
      <link href="/2023/01/16/butterfly%E4%B8%BB%E9%A2%98front-matter%E8%AE%BE%E7%BD%AE%E8%AF%B4%E6%98%8E/"/>
      <url>/2023/01/16/butterfly%E4%B8%BB%E9%A2%98front-matter%E8%AE%BE%E7%BD%AE%E8%AF%B4%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<p><code>Front-matter</code> 是 markdown 文件最上方以 <code>---</code> 分隔的区域，用于文件最基本的配置。<br>其中：</p><ul><li><code>page Front-matter</code> 用于页面配置。</li><li><code>Post Front-matter</code> 用于文章页配置。</li></ul><h2 id="1-Post-Front-matter"><a href="#1-Post-Front-matter" class="headerlink" title="1. Post Front-matter"></a>1. Post Front-matter</h2><table><thead><tr><th align="center">参数</th><th align="center">说明</th><th align="center">备注</th></tr></thead><tbody><tr><td align="center"><code>title</code></td><td align="center">[必需]文章标题</td><td align="center"></td></tr><tr><td align="center"><code>date</code></td><td align="center">[必需]文章创建日期</td><td align="center"></td></tr><tr><td align="center"><code>updated</code></td><td align="center">[可选]文章更新日期</td><td align="center"></td></tr><tr><td align="center"><code>tags</code></td><td align="center">[可选]文章标签</td><td align="center">注3.1</td></tr><tr><td align="center"><code>categories</code></td><td align="center">[可选]文章分类</td><td align="center">注3.1</td></tr><tr><td align="center"><code>keywords</code></td><td align="center">[可选]文章关键字</td><td align="center"></td></tr><tr><td align="center"><code>description</code></td><td align="center">[可选]文章描述</td><td align="center">注3.3</td></tr><tr><td align="center"><code>top_img</code></td><td align="center">[可选]文章顶部图片</td><td align="center">注3.4</td></tr><tr><td align="center"><code>comments</code></td><td align="center">[可选]显示文章页面评论模块(默认 <code>true</code>)</td><td align="center"></td></tr><tr><td align="center"><code>cover</code></td><td align="center">[可选]文章缩略图</td><td align="center">注3.4</td></tr><tr><td align="center"><code>toc</code></td><td align="center">[可选]显示文章<code>TOC</code></td><td align="center">注3.7</td></tr><tr><td align="center"><code>toc_number</code></td><td align="center">[可选]显示<code>toc_number</code></td><td align="center">注3.7</td></tr><tr><td align="center"><code>toc_style_simple</code></td><td align="center">[可选]显示 <code>toc</code> 简洁模式</td><td align="center">注3.7</td></tr><tr><td align="center"><code>copyright</code></td><td align="center">[可选]显示文章版权模块</td><td align="center">注3.6</td></tr><tr><td align="center"><code>copyright_author</code></td><td align="center">[可选]文章版权模块的文章作者</td><td align="center">注3.6</td></tr><tr><td align="center"><code>copyright_author_href</code></td><td align="center">[可选]文章版权模块的文章作者链接</td><td align="center">注3.6</td></tr><tr><td align="center"><code>copyright_url</code></td><td align="center">[可选]文章版权模块的文章连结链接</td><td align="center">注3.6</td></tr><tr><td align="center"><code>copyright_info</code></td><td align="center">[可选]文章版权模块的版权声明文字</td><td align="center">注3.6</td></tr><tr><td align="center"><code>mathjax</code></td><td align="center">[可选]显示<code>mathjax</code></td><td align="center">注3.8</td></tr><tr><td align="center"><code>katex</code></td><td align="center">[可选]显示<code>katex</code></td><td align="center">注3.8</td></tr><tr><td align="center"><code>aplayer</code></td><td align="center">[可选]在需要的页面加载<code>aplayer</code>的<code>js</code>和<code>css</code></td><td align="center">注3.9</td></tr><tr><td align="center"><code>highlight_shrink</code></td><td align="center">[可选]配置代码框是否展开(<code>true/false</code>)</td><td align="center">注3.2</td></tr><tr><td align="center"><code>aside</code></td><td align="center">[可选]显示侧边栏 (默认 <code>true</code>)</td><td align="center"></td></tr><tr><td align="center"><code>sticky</code></td><td align="center">[可选]是否置顶</td><td align="center">注3.5</td></tr></tbody></table><h2 id="2-page-Front-matter"><a href="#2-page-Front-matter" class="headerlink" title="2. page Front-matter"></a>2. page Front-matter</h2><table><thead><tr><th align="center">参数</th><th align="center">说明</th><th align="center">备注</th></tr></thead><tbody><tr><td align="center"><code>title</code></td><td align="center">[必需]页面标题</td><td align="center"></td></tr><tr><td align="center"><code>date</code></td><td align="center">[必需]页面创建日期</td><td align="center"></td></tr><tr><td align="center"><code>updated</code></td><td align="center">[可选]页面更新日期</td><td align="center"></td></tr><tr><td align="center"><code>type</code></td><td align="center">[必需]标签、分类和友情链接三个页面需要配置</td><td align="center"></td></tr><tr><td align="center"><code>comments</code></td><td align="center">[可选]显示页面评论模块(默认 <code>true</code>)</td><td align="center"></td></tr><tr><td align="center"><code>description</code></td><td align="center">[可选]页面描述</td><td align="center">注3.3</td></tr><tr><td align="center"><code>keywords</code></td><td align="center">[可选]页面关键字</td><td align="center"></td></tr><tr><td align="center"><code>top_img</code></td><td align="center">[可选]页面顶部图片</td><td align="center">注3.4</td></tr><tr><td align="center"><code>mathjax</code></td><td align="center">[可选]显示<code>mathjax</code></td><td align="center">注3.8</td></tr><tr><td align="center"><code>katex</code></td><td align="center">[可选]显示<code>katex</code></td><td align="center">注3.8</td></tr><tr><td align="center"><code>aside</code></td><td align="center">[可选]显示侧边栏 (默认 <code>true</code>)</td><td align="center"></td></tr><tr><td align="center"><code>aplayer</code></td><td align="center">[可选]在需要的页面加载<code>aplayer</code>的<code>js</code>和<code>css</code></td><td align="center">注3.9</td></tr><tr><td align="center"><code>highlight_shrink</code></td><td align="center">[可选]配置代码框是否展开(<code>true/false</code>)(默认为设置中<code>highlight_shrink</code>的配置)</td><td align="center">注3.2</td></tr></tbody></table><h2 id="3-部分参数用法"><a href="#3-部分参数用法" class="headerlink" title="3.部分参数用法"></a>3.部分参数用法</h2><h3 id="3-1-tags-、categories用法"><a href="#3-1-tags-、categories用法" class="headerlink" title="3.1 tags 、categories用法"></a>3.1 tags 、categories用法</h3><p>标记都是在同一层次结构级别上定义的，因此它们的显示顺序并不重要。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tags:</span><br><span class="line">    - 标签1</span><br><span class="line">    - 标签2</span><br></pre></td></tr></table></figure><p>分类是有层级的，因此，在设置分类时应特别注意。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">    - 分类1</span><br><span class="line">    - 分类1下的二级分类1</span><br><span class="line">    - 二级分类1下的三级分类1</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">categories:</span><br><span class="line">    - [母分类1，子分类1，子子分类1......]</span><br><span class="line">    - [母分类1，子分类2......]</span><br><span class="line">    - [母分类2，子分类3......]</span><br></pre></td></tr></table></figure><h3 id="3-2-highlight-shrink用法"><a href="#3-2-highlight-shrink用法" class="headerlink" title="3.2 highlight_shrink用法"></a>3.2 highlight_shrink用法</h3><ul><li>当主题配置文件中的 <code>highlight_shrink</code> 设为<code>true</code>时，可在<code>front-matter</code>添加<code>highlight_shrink: false</code>来单独配置文章展开代码框。</li><li>当主题配置文件中的 <code>highlight_shrink</code> 设为<code>false</code>时，可在<code>front-matter</code>添加<code>highlight_shrink: true</code>来单独配置文章收缩代码框。</li><li>总而言之，默认为主题设置中<code>highlight_shrink</code>的配置，但可以在<code>Front-matter</code>配置，这里权限更高。</li></ul><h3 id="3-3-description用法"><a href="#3-3-description用法" class="headerlink" title="3.3 description用法"></a>3.3 description用法</h3><ul><li>对于<code>post</code>：用于主页文章下面的一段描述，本网站选择的是，如果写了<code>description</code>，主页文章描述就是这个，如果没写，就自动节选。</li><li>对于<code>page</code>：描述页面。</li></ul><h3 id="3-4-top-img-、cover用法"><a href="#3-4-top-img-、cover用法" class="headerlink" title="3.4 top_img 、cover用法"></a>3.4 top_img 、cover用法</h3><p><code>page</code>页面顶部图的获取顺序：</p><ul><li>各自配置的 <code>top_img</code> &gt; 配置文件的 <code>default_top_img</code>。</li></ul><p><code>post</code>文章页顶部图的获取顺序：</p><ul><li>各自配置的 <code>top_img</code> &gt; <code>cover</code> &gt; 配置文件的 <code>default_top_img</code>。</li><li>如果没有设置<code>top_img</code>,文章页顶部将显示缩略图，可设<code>top_img``cover</code>为<code>false/图片地址/留空</code>。<br>另外，<code>cove</code>为文章封面，就是主页文章旁边显示的那张图片，与文章内的顶部图还是有区别的。</li><li>文章封面的获取顺序 <code>Front-matter</code> 的 <code>cover</code> &gt; 配置文件的 <code>default_cover</code> &gt; <code>false</code>。</li></ul><h3 id="3-5-sticky用法"><a href="#3-5-sticky用法" class="headerlink" title="3.5 sticky用法"></a>3.5 sticky用法</h3><p>文章置顶功能。可以直接在文章的<code>front-matter</code>区域里添加<code>sticky: 1</code>属性来把这篇文章置顶。数值越大，置顶的优先级越大。</p><h3 id="3-6-文章版权相关Front-matter用法"><a href="#3-6-文章版权相关Front-matter用法" class="headerlink" title="3.6 文章版权相关Front-matter用法"></a>3.6 文章版权相关Front-matter用法</h3><p>文章版权信息默认为主题设置中<code>post_copyright</code>的<code>enable</code>配置，但也可以在这里设置，此处优先级更高。</p><ul><li>如果有文章（例如：转载文章）不需要显示版权，可以在文章<code>Front-matter</code>处单独设置<code>copyright: false</code>。</li><li>如果需要对单独文章设置版权信息，可以应在文章<code>Front-matter</code>处单独设置。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">copyright_author: xxxx</span><br><span class="line">copyright_author_href: https://xxxxxx.com</span><br><span class="line">copyright_url: https://xxxxxx.com</span><br><span class="line">copyright_info: 此文章版权归xxxxx所有，如有转载，请注明来自原作者</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-7-目录相关Front-matter用法"><a href="#3-7-目录相关Front-matter用法" class="headerlink" title="3.7 目录相关Front-matter用法"></a>3.7 目录相关Front-matter用法</h3><p>一般来说，<code>toc</code>默认为主题设置中<code>toc</code>的<code>enable</code>配置，<code>toc_number</code>默认为主题设置中<code>toc</code>的<code>number</code>配置，<code>toc_style_simple</code>也是如此。<br>但也可以在文章md文件的头部加入<code>toc_number</code>和<code>toc</code>，并配置<code>true</code>或者<code>false</code>即可。主题会优先判断文章Markdown的<code>Front-matter</code>是否有配置，如有，则以<code>Front-matter</code>的配置为准。否则，以主题配置文件中的配置为准。</p><ul><li><code>toc</code>是否在文章页显示目录<code>true/false</code>。</li><li><code>toc_number</code>是否显示章节数<code>true/false</code>。</li><li><code>toc_style_simple</code>是否开启简介模式（侧边栏只显示<code>toc</code>，只对文章页有效）<code>true/false</code>。</li></ul><h3 id="3-8-mathjax-KaTex用法"><a href="#3-8-mathjax-KaTex用法" class="headerlink" title="3.8 mathjax KaTex用法"></a>3.8 mathjax KaTex用法</h3><ul><li>当设置<code>mathjax</code>的<code>per_page: false</code>时，才需要配置，默认 <code>false</code>。</li><li>当设置<code>katex</code>的<code>per_page: false</code>时，才需要配置，默认 <code>false</code>。</li><li>本博客暂未配置<code>mathjax</code>和<code>katex</code>，因此没用。</li></ul><h3 id="3-9-aplayer用法"><a href="#3-9-aplayer用法" class="headerlink" title="3.9 aplayer用法"></a>3.9 aplayer用法</h3><p>主要为是否在该页面开启音乐等全局吸底，不想就开输入<code>false</code>，本博客没有配置，没用。</p>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 建站攻略 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> butterfly </tag>
            
            <tag> 备忘录 </tag>
            
            <tag> 说明 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>人工湿地技术处理高盐工业废水的研究及应用综述</title>
      <link href="/2023/01/16/%E4%BA%BA%E5%B7%A5%E6%B9%BF%E5%9C%B0%E6%8A%80%E6%9C%AF%E5%A4%84%E7%90%86%E9%AB%98%E7%9B%90%E5%B7%A5%E4%B8%9A%E5%BA%9F%E6%B0%B4%E7%9A%84%E7%A0%94%E7%A9%B6%E5%8F%8A%E5%BA%94%E7%94%A8%E7%BB%BC%E8%BF%B0/"/>
      <url>/2023/01/16/%E4%BA%BA%E5%B7%A5%E6%B9%BF%E5%9C%B0%E6%8A%80%E6%9C%AF%E5%A4%84%E7%90%86%E9%AB%98%E7%9B%90%E5%B7%A5%E4%B8%9A%E5%BA%9F%E6%B0%B4%E7%9A%84%E7%A0%94%E7%A9%B6%E5%8F%8A%E5%BA%94%E7%94%A8%E7%BB%BC%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="人工湿地技术处理高盐工业废水的研究及应用综述"><a href="#人工湿地技术处理高盐工业废水的研究及应用综述" class="headerlink" title="人工湿地技术处理高盐工业废水的研究及应用综述"></a>人工湿地技术处理高盐工业废水的研究及应用综述</h1><p><strong>摘要:</strong> 在工业生产过程中，会产生大量的高盐废水。这些高盐废水未经处理直接排放将会严重影响生态系统乃至危害人体健康。因此，世界各国普遍重视高盐工业废水技术的研发。本文在《环境工程技术进展》所学知识的基础上，进一步阅读有关文献，简要地综述了人工湿地技术在高盐工业废水处理中的研究与应用。<br><strong>关键词:</strong> 人工湿地；高盐工业废水；耐盐植物；环境工程；废水治理</p><h3 id="A-review-of-research-and-application-of-constructed-wetland-technology-to-treat-high-salt-industrial-wastewater"><a href="#A-review-of-research-and-application-of-constructed-wetland-technology-to-treat-high-salt-industrial-wastewater" class="headerlink" title="A review of research and application of constructed wetland technology to treat high-salt industrial wastewater"></a>A review of research and application of constructed wetland technology to treat high-salt industrial wastewater</h3><p><strong>Abstract:</strong> In the process of industrial production, a large amount of high-salt wastewater will be generated. The direct discharge of these high-salt wastewater without treatment will seriously affect the ecosystem and even endanger human health. Therefore, countries around the world generally attach great importance to the research and development of high-salt industrial wastewater technology. On the basis of the knowledge learned in “Advances in Environmental Engineering Technology”, this paper further reads the relevant literature, and briefly reviews the research and application of constructed wetland technology in the treatment of high-salt industrial wastewater.<br><strong>Keywords:</strong> constructed wetland;  high-salt industrial wastewater;  salt-tolerant plants;<br>environmental engineering;  wastewater treatment</p><p>高盐废水是指总含盐质量分数大于或等于1%的废水。在工业生产领域，其来源十分广泛。在化工、制药、石油、造纸等行业[1]都会产生大量的高盐废水。这些废水如果未经处理直接排放，将会对生态环境造成严重的威胁。因此，世界各国普遍重视高盐工业废水的治理。目前，高盐工业废水主要通过物理化学法、生物法或者物理化学-生物组合法来进行治理[2]。这些技术大多成本较高，需要消耗大量的能源，部分企业可能负担不起高盐工业废水的治理费用。市场对廉价的高盐工业废水处理工艺的需求日益旺盛。<br>人工湿地作为一项常用的污水处理技术，已经在生活污水、农业废水的处理过程中得到了广泛应用。由于人工湿地在处理污水时集物理、化学、生物过程于一体，运行稳定、操作方便、生态友好，且建设费用和运营费用相对较低[3]，因此，近年来已有不少研究开始探讨人工湿地在高盐工业废水领域的作用。<br>本文在综述人工湿地处理高盐工业废水的主要原理的基础上，进一步介绍了高盐工业废水对人工湿地系统的负面影响以及现阶段该领域的研究方向，以期为今后的学习以及知识储备打下良好的基础。</p><h2 id="1-高盐工业废水的特点及危害"><a href="#1-高盐工业废水的特点及危害" class="headerlink" title="1 高盐工业废水的特点及危害"></a>1 高盐工业废水的特点及危害</h2><p>由于高盐工业废水的来源十分广泛，因此，不同行业所产生排放的高盐工业废水的组成和浓度也会有所不同。例如，制革废水作为一种典型的高盐工业废水，其BOD浓度为2982-4886mg&#x2F;L，总铬为12-133mg&#x2F;L,硫化物为55-630mg&#x2F;L，硫酸盐为502-800mg&#x2F;L，总氮为245-1330mg&#x2F;L，氨氮为122-127mg&#x2F;L，盐度为7.1%-15%NaCl，同时根据工艺的不同一些制革废水还含有一些特定的有机物及其他有毒污染物[4]。<br>根据有关文献归纳[5,6]，高盐废水一般都具有以下特点：1）总固体含量（TDS）大于3.5%；2）有机污染物以苯、苯酚、含氮杂环化合物、多环芳烃等难降解有机污染物为主；3）无机污染物主要为钾离子、钠离子、钙离子、镁离子、氯离子、硫酸根等，其中，氯离子、钠离子、硫酸根离子含量占无机离子总量的90%以上。<br>高盐工业废水未经处理直接排放产生的危害主要表现在以下4个方面[3,7]：1）引起地表水或土壤盐度分布变化，影响水生生物和动植物的正常生长、繁殖，进而对陆地、水体生态系统造成负面影响；2）高浓度氮、磷等无机盐会引起“赤潮”现象发生；3）污染物质可能随食物链进入动植物体内，会导致代谢紊乱，甚至死亡，同时危害人体健康；4）对住房建筑、工业设备产生负面的影响。</p><h2 id="2-人工湿地处理高盐工业废水的主要原理"><a href="#2-人工湿地处理高盐工业废水的主要原理" class="headerlink" title="2 人工湿地处理高盐工业废水的主要原理"></a>2 人工湿地处理高盐工业废水的主要原理</h2><p>人工湿地的分类方式多种多样。根据水流的特性，人工湿地主要分为表面流人工湿地、水平潜流人工湿地、垂直潜流人工湿地。虽然，不同类型的人工湿地结构有所不同，但它们大致都是由植物、微生物、基质共同组成。在高盐工业废水的处理过程中，人工湿地在植物、微生物、基质以及其他因素的共同影响下通过一系列的物理、化学、生物协同作用来处理高盐工业废水中的污染物质。</p><h3 id="2-1-植物的作用"><a href="#2-1-植物的作用" class="headerlink" title="2.1 植物的作用"></a>2.1 植物的作用</h3><p>植物是人工湿地的重要组成部分，在人工湿地处理高盐工业废水时起着不可忽视的作用。首先，在处理高盐工业废水时，植物可以直接吸收废水中的污染物物质，将其作为植物自身生长、繁殖的营养元素。其次，湿地中的植物可以将大气中的氧气通过叶和茎运输到根部，为根系中好氧和兼性好氧微生物提供良好的生存环境。再次，湿地植物还可以为微生物提供附着点，并在根部分泌化学物质作为微生物反应的催化剂，间接影响微生物去除污染物，保证人工湿地结构和功能的完整。最后，植物死后可留下相互连接的孔道和有机物，促使更多地微生物附着，为湿地系统提供优质的营养物质。</p><h3 id="2-2-微生物的作用"><a href="#2-2-微生物的作用" class="headerlink" title="2.2 微生物的作用"></a>2.2 微生物的作用</h3><p>湿地中的微生物在许多污染物的去除过程中起着最主要的作用，其是对污染物进行吸附和降解的主要生物群体和承担者[2]。微生物在湿地基质中与其他动物和植物共生体的相互关系往往也起着核心作用[3]。微生物的氨化、硝化、反硝化和厌氧氨氧化是废水氮去除的重要途径，有机物的矿化同样也主要是由微生物在厌氧和好氧条件下进行的。<br>此外，人工湿地中微生物的数量在很大程度上可以影响湿地系统的处理效果。相关文献表明[8]，湿地中细菌的数量与有机物的去除有较好的相关性；亚硝酸菌的数量与TN的去除有较好的相关性。</p><h3 id="2-3-基质的作用"><a href="#2-3-基质的作用" class="headerlink" title="2.3 基质的作用"></a>2.3 基质的作用</h3><p>大部分的物理、化学和生物反应都是在基质中进行的。湿地中的基质是去除某些污染物的主要因素之一，其对高盐工业废水的净化机制主要包括过滤、吸附、沉淀、络合、离子交换、植物吸收以及基质中微生物的降解等[9]。例如，通过基质吸附可以去除湿地废水中的磷；通过化学沉淀、吸附、络合、植物吸收和微生物氧化还原反应可以去除和固定高盐工业废水中的重金属；通过物理吸附可以将金属阳离子吸附在基质表面[2]。<br>此外，以土壤、砂、砾石为代表的基质还可以为植物提供物理支持，为各种复杂离子、化学物提供反应界面，为微生物提供附着[10]。</p><h3 id="2-4-其他因素的作用"><a href="#2-4-其他因素的作用" class="headerlink" title="2.4 其他因素的作用"></a>2.4 其他因素的作用</h3><p>在高盐工业废水的处理过程中，除了植物、微生物、基质之外，还有其他因素，例如废水类型、环境温度、湿度、pH值、人工湿地的结构和操作参数等，同样也会影响人工湿地的性能。<br>例如，温度和湿度可以共同影响人工湿地的蒸发速率，并在物理上影响人工湿地的性能。在干旱环境中，由于温度和湿度增强了蒸散作用，此时出水盐浓度可能高于进水[11]。又比如，每种微生物都有自己适宜的pH值。通过调节pH值可以影响人工湿地微生物的活性，从而影响人工湿地的生物反应过程，影响其最终去除污染物的能力。<br>值得注意的是，所有的这些因素都是相互作用和相互联系的。即使一个因素可能对人工湿地产生负效应，也可以通过调节另外几个因素消减该因素对人工湿地的影响。例如，高温增强了蒸散作用，导致盐浓度升高，可以通过降低水力停留时间和改变地下水位深度来消除温度的影响[2]。因此，在人工湿地处理高盐工业废水的过程中，有必要对除植物、微生物、基质之外的这些因素进行综合、全面的考量。</p><h2 id="3-高盐工业废水对人工湿地系统的负面影响"><a href="#3-高盐工业废水对人工湿地系统的负面影响" class="headerlink" title="3 高盐工业废水对人工湿地系统的负面影响"></a>3 高盐工业废水对人工湿地系统的负面影响</h2><p>相较于处理其他类型的工业废水，人工湿地在处理高盐工业废水时，由于该废水具有过高的盐浓度，因此，其还会受到高盐浓度的影响。高盐工业废水对人工湿地系统的负面影响主要为对植物、微生物、基质的影响。</p><h3 id="3-1-对植物的影响"><a href="#3-1-对植物的影响" class="headerlink" title="3.1 对植物的影响"></a>3.1 对植物的影响</h3><p>过高的盐浓度将会严重影响植物的抗性和耐受性。其主要机制如下[2]：1）大多数湿地植物的细胞质不能承受高盐胁迫，过高的盐浓度将会破坏植物细胞渗透压的平衡。2）在高盐胁迫下，抗氧化酶如过氧化氢酶、谷胱甘肽过氧化物酶等为了防止受到伤害，会加速细胞的氧化。3）当植物受到胁迫时，枝条和根部的脱落酸增加，从而抑制细胞生长，减轻盐的抑制作用。</p><h3 id="3-2-对微生物的影响"><a href="#3-2-对微生物的影响" class="headerlink" title="3.2 对微生物的影响"></a>3.2 对微生物的影响</h3><p>微生物对各种污染物的降解作用是人工湿地实现污水净化的最主要途径。过高的盐浓度将会影响微生物对污染物质的去除效率，对微生物起抑制作用。其主要机制如下[2,12]：1）无机离子可以降低非极性或弱极性有机分子的溶解度，微生物食物来源有机物一般都是非极性或弱极性分子。2）溶解的离子会降低气体的溶解度，导致微生物缺氧。3）过高的盐浓度可诱导真核体失水，导致微生物细胞进一步凹陷甚至解体。</p><h3 id="3-3-对基质的影响"><a href="#3-3-对基质的影响" class="headerlink" title="3.3 对基质的影响"></a>3.3 对基质的影响</h3><p>随着高盐工业废水处理过程的不断运行，湿地中的微生物开始飞速繁殖，再加上植物的腐败分解以及基质对污染物质的吸附吸收使得基质开始逐渐趋于饱和[13]。过高的盐浓度会加速基质的饱和。如果人工湿地维护不当，十分容易造成淤积、堵塞的现象。基质如果发生堵塞不仅会影响湿地系统的水力负荷，同时还会影响湿地系统的寿命以及湿地长期运行的稳定性，甚至会使湿地系统丧失功能[13]。</p><h2 id="4-现阶段人工湿地处理高盐工业废水的研究方向"><a href="#4-现阶段人工湿地处理高盐工业废水的研究方向" class="headerlink" title="4 现阶段人工湿地处理高盐工业废水的研究方向"></a>4 现阶段人工湿地处理高盐工业废水的研究方向</h2><p>目前，人工湿地处理高盐工业废水的研究主要集中于耐盐植物的筛选、耐盐微生物的使用、基质的优化以及人工湿地与其他技术的组合。</p><h3 id="4-1-耐盐植物的筛选"><a href="#4-1-耐盐植物的筛选" class="headerlink" title="4.1 耐盐植物的筛选"></a>4.1 耐盐植物的筛选</h3><p>耐盐植物由于具有更适应高盐浓度的特性，因此其处理高盐工业废水时具有很高的应用价值。在处理废水时，有植物的人工湿地处理效果比没有植物的人工湿地好，适应的耐盐植物也更有利于废水中污染物质的净化。<br>研究表明[14]，当人工湿地进水氯离子浓度在1000~3000mg&#x2F;L范围内时，芦苇、睡莲、狭叶香蒲、宽叶香蒲和水葱这5种人工湿地植物可以正常生长，且芦苇、睡莲和狭叶香蒲这3种植物对COD和BOD的净化效果相对较好。</p><h3 id="4-2-耐盐微生物的使用"><a href="#4-2-耐盐微生物的使用" class="headerlink" title="4.2 耐盐微生物的使用"></a>4.2 耐盐微生物的使用</h3><p>虽然在处理高盐工业废水时，盐的存在抑制了许多微生物的功能，但这也为耐盐微生物大放异彩制造了可能。由于耐盐微生物喜盐，能在含盐或高盐环境中繁荣生长。如果耐盐微生物能够处理废水中的污染物质，那么在一定程度上可以缓解高盐浓度对常规微生物的负面影响。如今，许多耐盐微生物已被发现可以用于污水处理。据报道[15]，活性污泥在好氧系统中,经过2个月的驯化,逐步适应了高盐环境，形成了以耐盐细菌为优势菌种的微生物群体后，当盐的质量浓度在8g&#x2F;L范围内时,该活性污泥处理实际含盐废水COD去除率达到70%以上。</p><h3 id="4-3-基质的优化"><a href="#4-3-基质的优化" class="headerlink" title="4.3 基质的优化"></a>4.3 基质的优化</h3><p>对于某些污染物质的去除，人工湿地的基质起着至关重要的作用。优化基质可以提高人工湿地对某些污染物质的去除效率。例如，据报道[16]，在处理含磷酸盐和金属的复杂盐水时，往人工湿地中投加工业废物例如炉渣、钢渣等，可以有效提升基质的吸附效率。<br>此外，无论是含盐废水处理还是非含盐废水处理，人工湿地基质堵塞问题是不可避免的。在缓解基质堵塞问题时，应该注意吸附和堵塞的可逆性，而不是简单地关注污染物质的去除。目前，缓解基质堵塞问题的策略有砂砾清洗、化学处理等[17]。</p><h3 id="4-4-人工湿地与其他技术的组合"><a href="#4-4-人工湿地与其他技术的组合" class="headerlink" title="4.4 人工湿地与其他技术的组合"></a>4.4 人工湿地与其他技术的组合</h3><p>人工湿地与其他技术组合可以有效结合多种处理工艺的优点，避免人工湿地处理系统现阶段的一些不足，提高人工湿地对高盐工业废水污染物的去除效率。例如，铁碳微电解耦合人工湿地如果用于处理高盐工业废水，那么高盐工业废水中的高浓度的阴阳离子可以加快离子迁移速度，使高盐工业废水具有良好的导电性，降低耦合系统的内阻，有利于产电[18]，因此，根据“产电所主导的污染物强化去除在一定浓度范围内往往与产电呈正比例关系[19]”这一现象，高盐浓度在一定程度上可以提高产电量，进而促进污染物的去除。</p><h2 id="5-总结"><a href="#5-总结" class="headerlink" title="5 总结"></a>5 总结</h2><p>人工湿地作为一种经济环保的污水处理系统，在植物、微生物、基质以及其他因素的共同影响下通过一系列的物理、化学、生物协同作用可以有效去除高盐工业废水中的污染物质，具有广阔的应用前景。然而，由于人工湿地高盐工业废水处理还处于起步阶段，其相关机理尚未完全探明，高盐浓度带来的负面影响也尚未完全解决，需要进一步探索。</p><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[1]李凤娟,徐菲,李小龙,李琦,曹保久.高盐度废水处理技术研究进展[J].环境科学与管理,2014,39(02):72-75.</span><br><span class="line">[2]Liang Y, Zhu H, Banuelos G, et al. Constructed wetlands for saline wastewater treatment: A review[J/OL]. Ecological Engineering, 2017, 98: 275-285.</span><br><span class="line">[3]黄铭意,许丹,李寻,李朝明,李泽兵,邵辉良,马天仪,崔文鑫.人工湿地处理高盐废水研究进展[J].工业水处理,2021,41(03):10-16.</span><br><span class="line">[4]Alemu T, Lemma E, Mekonnen A, et al. Performance of pilot scale anaerobic-SBR system integrated with constructed wetlands for the treatment of tannery wastewater[J]. Environmental Processes, 2016, 3(4): 815-827.</span><br><span class="line">[5]朱秋楠.煤化工高盐废水分质提盐基础与结晶工艺研究[D].宁夏大学,2019.</span><br><span class="line">[6]马旭东,李辉,吴锋,朱绘美,王志浩.高盐废水对Ca(OH)2激发煤气化炉渣基胶凝材料力学性能的影响机理[J].材料科学与工程学报,2022,40(01):83-87+147.</span><br><span class="line">[7]邱立萍,张晓凤.高盐废水处理技术研究及应用进展[J/OL].无机盐工业,2022:1-17.</span><br><span class="line">[8]付融冰,杨海真,顾国维,张政.人工湿地基质微生物状况与净化效果相关分析[J].环境科学研究,2005(06):46-51.</span><br><span class="line">[9]Wang Yanting, Cai Zhengqin, Sheng Sheng, et al. Comprehensive evaluation of substrate materials for contaminants removal in constructed wetlands[J]. Science of The Total Environment, 2020, 701: 134736.</span><br><span class="line">[10]白晓慧,王宝贞,余敏,聂梅生.人工湿地污水处理技术及其发展应用[J].哈尔滨建筑大学学报,1999(06):88-92.</span><br><span class="line">[11]Freedman A, Gross A, Shelef O, et al. Salt uptake and evapotranspiration under arid conditions in horizontal subsurface flow constructed wetland planted with halophytes[J]. Ecological Engineering, 2014, 70: 282-286.</span><br><span class="line">[12]Aloui F, Khoufi S, Loukil S, Sayadi S. Performances of an activated sludge process for the treatment of fish processing saline wastewater[J]. Desalination, 2009, 246(3): 389-396.</span><br><span class="line">[13]黄锦楼,陈琴,许连煌.人工湿地在应用中存在的问题及解决措施[J].环境科学,2013,34(01):401-408.</span><br><span class="line">[14]王琴,张海涛, Jean-PierreArcangeli,瞿贤,王晓青,王乔,李国华,方方,王毓明,李鹏.高盐工业废水人工湿地处理中植物的筛选[J].环境工程学报,2012,6(01):226-231.</span><br><span class="line">[15]余宗学,严学亿,安立超.耐盐微生物的培养与高含盐废水处理的研究[J].工业安全与环保,2008(12):20-22.</span><br><span class="line">[16]Haynes, R.J. Use of industrial wastes as media in constructed wetlands and filter beds-prospects for removal of phosphate and metals from wastewater streams[J]. Critical Reviews in Environmental Control, 2015, 45(10): 1041-1103.</span><br><span class="line">[17]Nivala J, Knowles P, Dotro G, et al. Clogging in subsurface-flow treatment wetlands: measurement,modeling and management[J]. Water Research, 2012, 46(6): 1625-1640.</span><br><span class="line">[18]Grattieri M, Minteer D. Microbial fuel cells in saline and hypersaline environments: Advancements, challenges and future perspectives[J]. Bioelectrochemistry, 2018, 120: 127-137.</span><br><span class="line">[19]Zhen He, Minteer S, Angenent L. Electricity generation from artificial wastewater using an upflow microbial fuel cell[J]. Environmental Science&amp;Technology, 2005, 39(14): 5262-5267.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 专业进阶 </category>
          
          <category> 课程论文 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境工程 </tag>
            
            <tag> 水处理 </tag>
            
            <tag> 人工湿地 </tag>
            
            <tag> 综述 </tag>
            
            <tag> 高盐工业废水 </tag>
            
            <tag> 耐盐植物 </tag>
            
            <tag> 废水治理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo常用指令及说明</title>
      <link href="/2023/01/14/hexo%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E5%8F%8A%E8%AF%B4%E6%98%8E/"/>
      <url>/2023/01/14/hexo%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E5%8F%8A%E8%AF%B4%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<h1 id="1-创建新文章"><a href="#1-创建新文章" class="headerlink" title="1. 创建新文章"></a>1. 创建新文章</h1><p><code>hexo new &quot;title&quot;</code><br><code>hexo n &quot;title&quot;</code><br><code>hexo new post &quot;title&quot;</code></p><h1 id="2-创建新页面"><a href="#2-创建新页面" class="headerlink" title="2. 创建新页面"></a>2. 创建新页面</h1><p><code>hexo new page &quot;title&quot;</code></p><h1 id="3-清除缓存"><a href="#3-清除缓存" class="headerlink" title="3. 清除缓存"></a>3. 清除缓存</h1><p><code>hexo clean</code>执行此指令后清除缓存，会删除站点根目录下的<code>public</code>文件夹。</p><h1 id="4-生成静态网页"><a href="#4-生成静态网页" class="headerlink" title="4. 生成静态网页"></a>4. 生成静态网页</h1><p><code>hexo g</code> <code>hexo generate</code>执行指令后会在站点根目录下生成<code>public</code>文件夹，hexo会将<code>source</code>文件夹里的.md文件编译为.html文件，存放在<code>public</code>文件夹里。</p><h1 id="5-本地启动服务"><a href="#5-本地启动服务" class="headerlink" title="5. 本地启动服务"></a>5. 本地启动服务</h1><p><code>hexo s</code> <code>hexo server</code>除站点及主题配置文件外，hexo会启动服务预览并自动更新，无需重启服务器，直接网页功能即可生效。默认地址<a href="http://localhost:4000/">http://localhost:4000/</a><br><code>hexo server -s</code>以静态模式启动。</p><h1 id="6-部署服务器"><a href="#6-部署服务器" class="headerlink" title="6. 部署服务器"></a>6. 部署服务器</h1><p><code>hexo d</code> <code>hexo deploy</code>将本地数据部署到github。</p><h1 id="7-amp-amp-的使用"><a href="#7-amp-amp-的使用" class="headerlink" title="7. &amp;&amp;的使用"></a>7. &amp;&amp;的使用</h1><p><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s --debug</code> hexo将会依次执行<code>hexo clean``hexo g``hexo s --debug</code>指令，可以随意组合，只要hexo执行后不报错。</p><h1 id="8-本地站点根目录文件夹说明"><a href="#8-本地站点根目录文件夹说明" class="headerlink" title="8. 本地站点根目录文件夹说明"></a>8. 本地站点根目录文件夹说明</h1><p><code>_config.yml</code>网站的配置信息，可以在此配置大部分的参数。<br><code>package.json</code>应用程序信息，以及需要安装的模块信息。<br><code>scaffolds</code>模板文件夹，新建文章时，hexo会根据<code>scaffolds</code>中的模板文件夹新建文件。例如，如果修改<code>scaffold/post.md</code>中的<code>Front-matter</code>内容，那么每次新建一篇文章时都会包含这个修改。<br><code>source</code>资源文件夹，存放用户资源的地方，如markdown文章，当执行<code>hexo g</code>指令后，除 <code>_posts</code>文件夹之外，开头命名为<code> _</code>(下划线)的文件及文件夹和隐藏的文件将会被忽略。Markdown和Html文件会被解析并放到<code> public</code>文件夹，而其他文件会被拷贝过去。<br><code>themes</code>主题文件夹，Hexo会根据主题来生成静态页面。<br><code>_config.[theme].yml</code>主题配置文件，为用户自己创建。以butterfly主题的<code>_config.butterfly.yml</code>为例，当用户将主题目录（<code>/themes/butterfly</code>）的<code>_config.yml</code>内容复制到<code>_config.butterfly.yml</code>后(注意:复制的是主题的<code>_config.yml</code>，而不是hexo根目录的<code>_config.yml</code>，且不用删除hexo根目录的<code>_config.yml</code>)，以后只需要在<code>_config.butterfly.yml</code>进行配置就行，如果使用了<code>_config.butterfly.yml</code>，配置主题的<code>_config.yml</code>将不会有效果。这将不用担心如果更新主题需要重新配置该主题文件。</p>]]></content>
      
      
      <categories>
          
          <category> 业余学习 </category>
          
          <category> 常用指令 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备忘录 </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
